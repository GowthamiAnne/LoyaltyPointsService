2025-12-21 12:05:54.405 [main] WARN  i.n.r.d.DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
2025-12-21 12:05:55.180 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52573
2025-12-21 12:05:55.182 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52576
2025-12-21 12:05:55.948 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 12:05:55.965 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 06:35:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/23.0.2)"
2025-12-21 12:05:55.966 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 12:05:56.364 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52580
2025-12-21 12:05:56.364 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52583
2025-12-21 12:05:56.383 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 12:05:56.383 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 12:05:56.495 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 12:05:56.497 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 06:35:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/23.0.2)"
2025-12-21 12:05:56.497 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 12:05:56.590 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52586
2025-12-21 12:05:56.590 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52589
2025-12-21 12:05:56.597 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 12:05:56.597 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 12:05:56.605 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 12:05:56.605 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 12:05:56.608 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 12:05:56.608 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 06:35:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/23.0.2)"
2025-12-21 12:05:56.608 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 12:10:39.064 [main] WARN  i.n.r.d.DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
2025-12-21 12:10:39.869 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52735
2025-12-21 12:10:39.871 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52738
2025-12-21 12:10:40.671 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 12:10:40.700 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 06:40:40 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/23.0.2)"
2025-12-21 12:10:40.700 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 12:10:41.079 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52740
2025-12-21 12:10:41.080 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52743
2025-12-21 12:10:41.098 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 12:10:41.098 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 12:10:41.209 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 12:10:41.211 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 06:40:41 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/23.0.2)"
2025-12-21 12:10:41.211 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 12:10:41.315 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52746
2025-12-21 12:10:41.316 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52749
2025-12-21 12:10:41.323 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 12:10:41.323 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 12:10:41.332 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 12:10:41.332 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 12:10:41.334 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 12:10:41.335 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 06:40:41 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/23.0.2)"
2025-12-21 12:10:41.335 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 12:14:41.824 [main] WARN  i.n.r.d.DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
2025-12-21 12:14:42.551 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52837
2025-12-21 12:14:42.553 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52840
2025-12-21 12:14:43.332 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 12:14:43.347 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 06:44:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/23.0.2)"
2025-12-21 12:14:43.347 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 12:14:43.709 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52842
2025-12-21 12:14:43.709 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52845
2025-12-21 12:14:43.727 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 12:14:43.727 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 12:14:43.848 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 12:14:43.849 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 06:44:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/23.0.2)"
2025-12-21 12:14:43.849 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 12:14:43.933 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52848
2025-12-21 12:14:43.934 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52851
2025-12-21 12:14:43.941 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 12:14:43.942 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 12:14:43.950 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 12:14:43.950 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 12:14:43.952 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 12:14:43.953 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 06:44:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/23.0.2)"
2025-12-21 12:14:43.953 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 12:16:05.018 [main] WARN  i.n.r.d.DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
2025-12-21 12:16:05.771 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52878
2025-12-21 12:16:05.772 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52881
2025-12-21 12:16:06.593 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 12:16:06.611 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 06:46:06 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/23.0.2)"
2025-12-21 12:16:06.612 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 12:16:06.979 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52884
2025-12-21 12:16:06.979 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52887
2025-12-21 12:16:06.997 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 12:16:06.998 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 12:16:07.111 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 12:16:07.112 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 06:46:06 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/23.0.2)"
2025-12-21 12:16:07.113 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 12:16:07.197 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52890
2025-12-21 12:16:07.198 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52893
2025-12-21 12:16:07.205 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 12:16:07.205 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 12:16:07.213 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 12:16:07.213 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 12:16:07.216 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 12:16:07.216 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 06:46:07 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/23.0.2)"
2025-12-21 12:16:07.216 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 12:36:55.913 [main] WARN  i.n.r.d.DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
2025-12-21 12:36:56.674 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53197
2025-12-21 12:36:56.675 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53200
2025-12-21 12:36:57.425 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 12:36:57.442 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:06:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/23.0.2)"
2025-12-21 12:36:57.442 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 12:36:57.809 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53203
2025-12-21 12:36:57.810 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53206
2025-12-21 12:36:57.827 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 12:36:57.827 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 12:36:57.938 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 12:36:57.940 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:06:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/23.0.2)"
2025-12-21 12:36:57.940 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 12:36:58.027 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53210
2025-12-21 12:36:58.027 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53213
2025-12-21 12:36:58.034 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 12:36:58.035 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 12:36:58.043 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 12:36:58.043 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 12:36:58.045 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 12:36:58.046 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:06:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/23.0.2)"
2025-12-21 12:36:58.046 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 12:43:00.276 [main] WARN  i.n.r.d.DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
2025-12-21 12:43:06.151 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53412
2025-12-21 12:43:06.155 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53415
2025-12-21 12:43:06.920 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 12:43:06.936 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:13:06 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/17.0.17)"
2025-12-21 12:43:06.936 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 12:43:07.301 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53420
2025-12-21 12:43:07.301 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53423
2025-12-21 12:43:07.319 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 12:43:07.319 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 12:43:07.438 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 12:43:07.440 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:13:07 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/17.0.17)"
2025-12-21 12:43:07.440 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 12:43:07.528 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53426
2025-12-21 12:43:07.529 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53429
2025-12-21 12:43:07.536 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 12:43:07.537 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 12:43:07.545 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 12:43:07.545 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 12:43:07.547 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 12:43:07.548 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:13:07 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/17.0.17)"
2025-12-21 12:43:07.548 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 12:44:29.220 [main] WARN  i.n.r.d.DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
2025-12-21 12:44:29.999 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53471
2025-12-21 12:44:30.001 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53474
2025-12-21 12:44:30.769 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 12:44:30.788 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:14:30 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/17.0.17)"
2025-12-21 12:44:30.788 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 12:44:31.156 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53476
2025-12-21 12:44:31.157 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53479
2025-12-21 12:44:31.175 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 12:44:31.175 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 12:44:31.284 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 12:44:31.286 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:14:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/17.0.17)"
2025-12-21 12:44:31.286 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 12:44:31.370 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53482
2025-12-21 12:44:31.370 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53485
2025-12-21 12:44:31.379 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 12:44:31.379 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 12:44:31.388 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 12:44:31.388 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 12:44:31.390 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 12:44:31.391 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:14:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/17.0.17)"
2025-12-21 12:44:31.391 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 12:46:05.389 [main] WARN  i.n.r.d.DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
2025-12-21 12:46:11.227 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53535
2025-12-21 12:46:11.229 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53538
2025-12-21 12:46:11.982 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 12:46:11.999 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:16:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/17.0.17)"
2025-12-21 12:46:11.999 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 12:46:12.349 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53541
2025-12-21 12:46:12.350 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53544
2025-12-21 12:46:12.368 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 12:46:12.368 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 12:46:12.478 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 12:46:12.479 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:16:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/17.0.17)"
2025-12-21 12:46:12.479 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 12:46:12.567 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53547
2025-12-21 12:46:12.567 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53550
2025-12-21 12:46:12.575 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 12:46:12.575 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 12:46:12.583 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 12:46:12.583 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 12:46:12.585 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 12:46:12.586 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:16:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/17.0.17)"
2025-12-21 12:46:12.586 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 12:47:02.326 [main] WARN  i.n.r.d.DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'
2025-12-21 12:47:03.113 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53574
2025-12-21 12:47:03.116 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53577
2025-12-21 12:47:03.943 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 12:47:03.960 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:17:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/17.0.17)"
2025-12-21 12:47:03.960 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 12:47:04.335 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53580
2025-12-21 12:47:04.336 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53583
2025-12-21 12:47:04.355 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 12:47:04.355 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 12:47:04.466 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 12:47:04.468 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:17:04 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/17.0.17)"
2025-12-21 12:47:04.468 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 12:47:04.559 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53586
2025-12-21 12:47:04.559 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53589
2025-12-21 12:47:04.570 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 12:47:04.570 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 12:47:04.579 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 12:47:04.580 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 12:47:04.582 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 12:47:04.583 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:17:04 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/17.0.17)"
2025-12-21 12:47:04.583 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 07:23:21.792 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63942
2025-12-21 07:23:21.813 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63945
2025-12-21 07:23:24.784 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 07:23:24.866 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:23:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:23:24.866 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 07:23:26.365 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63948
2025-12-21 07:23:26.366 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63951
2025-12-21 07:23:26.421 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 07:23:26.422 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 07:23:26.891 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 07:23:26.895 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:23:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:23:26.895 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 07:23:27.278 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63954
2025-12-21 07:23:27.278 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63957
2025-12-21 07:23:27.298 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 07:23:27.298 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 07:23:27.328 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 07:23:27.329 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 07:23:27.340 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 07:23:27.341 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:23:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:23:27.342 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 07:28:47.191 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56869
2025-12-21 07:28:47.204 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56872
2025-12-21 07:28:49.258 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:28:49 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:28:50.700 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56874
2025-12-21 07:28:50.702 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56877
2025-12-21 07:28:50.996 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 07:28:51.089 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:28:50 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:28:51.089 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 07:28:51.300 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56879
2025-12-21 07:28:51.301 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56882
2025-12-21 07:28:51.341 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 07:28:51.342 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 07:28:51.675 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 07:28:51.679 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:28:51 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:28:51.680 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 07:28:51.998 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56885
2025-12-21 07:28:51.999 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56888
2025-12-21 07:28:52.019 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 07:28:52.019 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 07:28:52.052 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 07:28:52.053 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 07:28:52.064 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 07:28:52.066 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:28:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:28:52.066 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 07:28:52.284 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56892
2025-12-21 07:28:52.286 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56895
2025-12-21 07:28:52.307 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 07:28:52.308 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:28:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:28:52.309 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 07:28:52.447 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56897
2025-12-21 07:28:52.449 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56900
2025-12-21 07:28:52.473 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 07:28:52.475 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:28:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:28:52.475 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 07:28:52.576 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56902
2025-12-21 07:28:52.578 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56905
2025-12-21 07:28:52.593 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 07:28:52.594 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:28:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:28:52.594 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 07:28:52.679 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56907
2025-12-21 07:28:52.680 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56910
2025-12-21 07:28:52.695 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 07:28:52.695 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 07:28:52.704 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 07:28:52.705 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 07:28:52.717 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 07:28:52.719 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:28:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:28:52.720 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 07:28:52.870 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56914
2025-12-21 07:28:52.871 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56917
2025-12-21 07:28:52.886 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 07:28:52.887 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 07:28:52.894 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 07:28:52.895 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:28:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:28:52.895 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 07:28:53.003 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56920
2025-12-21 07:28:53.004 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56923
2025-12-21 07:28:53.021 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 07:28:53.023 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:28:53 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:28:53.023 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 07:35:08.906 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56802
2025-12-21 07:35:08.919 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56805
2025-12-21 07:35:11.092 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:35:11 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:35:12.479 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56807
2025-12-21 07:35:12.482 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56810
2025-12-21 07:35:12.729 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 07:35:12.822 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:35:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:35:12.822 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 07:35:12.972 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56812
2025-12-21 07:35:12.974 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56815
2025-12-21 07:35:13.015 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 07:35:13.015 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 07:35:13.388 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 07:35:13.394 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:35:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:35:13.394 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 07:35:13.743 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56818
2025-12-21 07:35:13.745 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56821
2025-12-21 07:35:13.763 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 07:35:13.763 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 07:35:13.793 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 07:35:13.794 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 07:35:13.804 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 07:35:13.808 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:35:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:35:13.808 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 07:35:14.079 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56825
2025-12-21 07:35:14.082 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56828
2025-12-21 07:35:14.107 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 07:35:14.108 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:35:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:35:14.109 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 07:35:14.248 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56830
2025-12-21 07:35:14.250 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56833
2025-12-21 07:35:14.268 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 07:35:14.270 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:35:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:35:14.270 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 07:35:14.363 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56835
2025-12-21 07:35:14.365 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56838
2025-12-21 07:35:14.380 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 07:35:14.382 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:35:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:35:14.382 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 07:35:14.473 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56840
2025-12-21 07:35:14.475 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56843
2025-12-21 07:35:14.492 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 07:35:14.493 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 07:35:14.502 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 07:35:14.502 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 07:35:14.512 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 07:35:14.513 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:35:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:35:14.514 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 07:35:14.692 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56847
2025-12-21 07:35:14.693 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56850
2025-12-21 07:35:14.709 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 07:35:14.710 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 07:35:14.718 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 07:35:14.719 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:35:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:35:14.720 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 07:35:14.839 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56853
2025-12-21 07:35:14.841 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56856
2025-12-21 07:35:14.859 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 07:35:14.862 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:35:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:35:14.862 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 07:36:32.221 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56863
2025-12-21 07:36:32.229 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56866
2025-12-21 07:36:34.632 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:36:34 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:36:35.955 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56868
2025-12-21 07:36:35.957 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56871
2025-12-21 07:36:36.175 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 07:36:36.241 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:36:36 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:36:36.242 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 07:36:36.415 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56873
2025-12-21 07:36:36.418 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56876
2025-12-21 07:36:36.468 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 07:36:36.469 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 07:36:36.839 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 07:36:36.843 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:36:36 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:36:36.844 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 07:36:37.224 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56879
2025-12-21 07:36:37.226 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56882
2025-12-21 07:36:37.247 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 07:36:37.247 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 07:36:37.284 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 07:36:37.285 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 07:36:37.296 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 07:36:37.298 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:36:37 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:36:37.298 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 07:36:37.509 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56886
2025-12-21 07:36:37.512 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56889
2025-12-21 07:36:37.541 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 07:36:37.542 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:36:37 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:36:37.542 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 07:36:37.691 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56891
2025-12-21 07:36:37.693 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56894
2025-12-21 07:36:37.713 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 07:36:37.714 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:36:37 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:36:37.714 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 07:36:37.850 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56896
2025-12-21 07:36:37.853 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56899
2025-12-21 07:36:37.870 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 07:36:37.871 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:36:37 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:36:37.871 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 07:36:37.997 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56901
2025-12-21 07:36:38.000 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56904
2025-12-21 07:36:38.018 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 07:36:38.018 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 07:36:38.026 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 07:36:38.026 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 07:36:38.034 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 07:36:38.035 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:36:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:36:38.035 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 07:36:38.219 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56908
2025-12-21 07:36:38.221 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56911
2025-12-21 07:36:38.236 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 07:36:38.236 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 07:36:38.242 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 07:36:38.243 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:36:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:36:38.244 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 07:36:38.348 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56914
2025-12-21 07:36:38.350 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56917
2025-12-21 07:36:38.363 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 07:36:38.365 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:36:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:36:38.366 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 07:50:13.756 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63064
2025-12-21 07:50:13.766 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63067
2025-12-21 07:50:16.145 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:50:16 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:50:17.583 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63069
2025-12-21 07:50:17.585 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63072
2025-12-21 07:50:17.840 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 07:50:17.978 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:50:17 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:50:17.979 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 07:50:18.114 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63074
2025-12-21 07:50:18.115 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63077
2025-12-21 07:50:18.161 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 07:50:18.162 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 07:50:18.516 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 07:50:18.519 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:50:18 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:50:18.520 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 07:50:18.846 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63080
2025-12-21 07:50:18.847 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63083
2025-12-21 07:50:18.864 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 07:50:18.865 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 07:50:18.889 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 07:50:18.890 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 07:50:18.898 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 07:50:18.899 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:50:18 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:50:18.899 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 07:50:19.101 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63087
2025-12-21 07:50:19.103 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63090
2025-12-21 07:50:19.123 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 07:50:19.125 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:50:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:50:19.125 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 07:50:19.250 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63092
2025-12-21 07:50:19.252 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63095
2025-12-21 07:50:19.276 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 07:50:19.277 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:50:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:50:19.278 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 07:50:19.391 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63097
2025-12-21 07:50:19.393 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63100
2025-12-21 07:50:19.412 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 07:50:19.413 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:50:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:50:19.413 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 07:50:19.507 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63102
2025-12-21 07:50:19.510 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63105
2025-12-21 07:50:19.530 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 07:50:19.530 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 07:50:19.539 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 07:50:19.539 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 07:50:19.546 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 07:50:19.547 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:50:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:50:19.547 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 07:50:19.698 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63109
2025-12-21 07:50:19.700 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63112
2025-12-21 07:50:19.718 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 07:50:19.718 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 07:50:19.728 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 07:50:19.729 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:50:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:50:19.729 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 07:50:19.830 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63115
2025-12-21 07:50:19.831 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63118
2025-12-21 07:50:19.851 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 07:50:19.852 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:50:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:50:19.853 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 07:52:17.863 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52588
2025-12-21 07:52:17.877 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52591
2025-12-21 07:52:20.141 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:52:20 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:52:21.478 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52593
2025-12-21 07:52:21.480 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52596
2025-12-21 07:52:21.751 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 07:52:21.817 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:52:21 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:52:21.818 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 07:52:21.995 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52598
2025-12-21 07:52:21.996 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52601
2025-12-21 07:52:22.037 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 07:52:22.037 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 07:52:22.439 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 07:52:22.446 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:52:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:52:22.446 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 07:52:22.849 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52604
2025-12-21 07:52:22.850 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52607
2025-12-21 07:52:22.872 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 07:52:22.872 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 07:52:22.918 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 07:52:22.919 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 07:52:22.928 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 07:52:22.930 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:52:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:52:22.931 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 07:52:23.190 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52611
2025-12-21 07:52:23.192 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52614
2025-12-21 07:52:23.213 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 07:52:23.214 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:52:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:52:23.215 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 07:52:23.375 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52616
2025-12-21 07:52:23.376 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52619
2025-12-21 07:52:23.395 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 07:52:23.397 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:52:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:52:23.398 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 07:52:23.493 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52621
2025-12-21 07:52:23.495 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52624
2025-12-21 07:52:23.510 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 07:52:23.511 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:52:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:52:23.512 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 07:52:23.648 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52626
2025-12-21 07:52:23.650 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52629
2025-12-21 07:52:23.666 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 07:52:23.666 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 07:52:23.675 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 07:52:23.676 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 07:52:23.685 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 07:52:23.686 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:52:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:52:23.686 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 07:52:23.863 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52633
2025-12-21 07:52:23.864 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52636
2025-12-21 07:52:23.878 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 07:52:23.878 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 07:52:23.885 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 07:52:23.886 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:52:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:52:23.886 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 07:52:24.002 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52639
2025-12-21 07:52:24.003 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52642
2025-12-21 07:52:24.017 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 07:52:24.018 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 07:52:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 07:52:24.018 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 08:11:51.079 [vert.x-eventloop-thread-0] ERROR i.v.c.i.l.c.VertxIsolatedDeployer - Failed in deploying verticle
java.lang.NullPointerException: Cannot invoke "io.vertx.core.json.JsonObject.getString(String)" because "fxConfig" is null
	at com.airline.loyalty.service.FxServiceClient.<init>(FxServiceClient.java:24)
	at com.airline.loyalty.MainVerticle.start(MainVerticle.java:36)
	at io.vertx.core.impl.DeploymentManager.lambda$doDeploy$5(DeploymentManager.java:210)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 08:34:18.969 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64369
2025-12-21 08:34:18.990 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64372
2025-12-21 08:34:23.907 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 08:34:23 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/17.0.11)"
2025-12-21 08:34:25.896 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53140
2025-12-21 08:34:25.898 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53143
2025-12-21 08:34:26.114 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 08:34:26.139 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 08:34:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/17.0.11)"
2025-12-21 08:34:26.140 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 08:34:26.358 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53145
2025-12-21 08:34:26.358 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53148
2025-12-21 08:34:26.436 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 08:34:26.436 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 08:34:26.977 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 08:34:26.983 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 08:34:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/17.0.11)"
2025-12-21 08:34:26.983 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 08:34:27.423 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53151
2025-12-21 08:34:27.423 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53154
2025-12-21 08:34:27.461 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 08:34:27.461 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 08:34:27.503 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 08:34:27.503 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 08:34:27.515 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 08:34:27.515 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 08:34:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/17.0.11)"
2025-12-21 08:34:27.515 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 08:34:27.728 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53158
2025-12-21 08:34:27.728 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53161
2025-12-21 08:34:27.744 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 08:34:27.744 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 08:34:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/17.0.11)"
2025-12-21 08:34:27.744 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 08:34:27.859 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53163
2025-12-21 08:34:27.859 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53166
2025-12-21 08:34:27.883 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 08:34:27.883 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 08:34:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/17.0.11)"
2025-12-21 08:34:27.883 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 08:34:27.983 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53168
2025-12-21 08:34:27.983 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53171
2025-12-21 08:34:27.993 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 08:34:27.993 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 08:34:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/17.0.11)"
2025-12-21 08:34:27.993 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 08:34:28.116 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53173
2025-12-21 08:34:28.116 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53176
2025-12-21 08:34:28.147 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 08:34:28.147 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 08:34:28.149 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 08:34:28.149 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 08:34:28.149 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 08:34:28.163 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 08:34:28 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/17.0.11)"
2025-12-21 08:34:28.163 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 08:34:28.331 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53183
2025-12-21 08:34:28.331 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53186
2025-12-21 08:34:28.345 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 08:34:28.345 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 08:34:28.353 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 08:34:28.356 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 08:34:28 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/17.0.11)"
2025-12-21 08:34:28.356 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 08:34:28.474 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53189
2025-12-21 08:34:28.474 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53192
2025-12-21 08:34:28.490 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 08:34:28.490 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 08:34:28 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/17.0.11)"
2025-12-21 08:34:28.490 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 08:37:19.050 [vert.x-eventloop-thread-0] ERROR i.v.c.i.l.c.VertxIsolatedDeployer - Failed in deploying verticle
java.lang.NullPointerException: Cannot invoke "io.vertx.core.json.JsonObject.getString(String)" because "fxConfig" is null
	at com.airline.loyalty.service.FxServiceClient.<init>(FxServiceClient.java:24)
	at com.airline.loyalty.MainVerticle.start(MainVerticle.java:36)
	at io.vertx.core.impl.DeploymentManager.lambda$doDeploy$5(DeploymentManager.java:210)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 08:42:04.266 [main] ERROR i.v.c.i.launcher.commands.RunCommand - The -conf argument does not point to an existing file or is not a valid JSON object
io.vertx.core.json.DecodeException: Failed to decode:Unrecognized token 'config': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"config.json"; line: 1, column: 7]
	at io.vertx.core.json.jackson.DatabindCodec.fromParser(DatabindCodec.java:129)
	at io.vertx.core.json.jackson.DatabindCodec.fromString(DatabindCodec.java:90)
	at io.vertx.core.json.JsonObject.fromJson(JsonObject.java:1250)
	at io.vertx.core.json.JsonObject.<init>(JsonObject.java:51)
	at io.vertx.core.impl.launcher.commands.BareCommand.getJsonFromFileOrString(BareCommand.java:304)
	at io.vertx.core.impl.launcher.commands.RunCommand.getConfiguration(RunCommand.java:414)
	at io.vertx.core.impl.launcher.commands.RunCommand.run(RunCommand.java:240)
	at io.vertx.core.impl.launcher.VertxCommandLauncher.execute(VertxCommandLauncher.java:248)
	at io.vertx.core.impl.launcher.VertxCommandLauncher.dispatch(VertxCommandLauncher.java:402)
	at io.vertx.core.impl.launcher.VertxCommandLauncher.dispatch(VertxCommandLauncher.java:346)
	at io.vertx.core.Launcher.main(Launcher.java:45)
Caused by: com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'config': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"config.json"; line: 1, column: 7]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:760)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3041)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._handleOddValue(ReaderBasedJsonParser.java:2082)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextToken(ReaderBasedJsonParser.java:808)
	at com.fasterxml.jackson.databind.ObjectMapper._initForReading(ObjectMapper.java:4986)
	at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:4867)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3033)
	at io.vertx.core.json.jackson.DatabindCodec.fromParser(DatabindCodec.java:126)
	... 10 common frames omitted
2025-12-21 08:42:04.595 [vert.x-eventloop-thread-0] ERROR i.v.c.i.l.c.VertxIsolatedDeployer - Failed in deploying verticle
java.lang.NullPointerException: Cannot invoke "io.vertx.core.json.JsonObject.getString(String)" because "fxConfig" is null
	at com.airline.loyalty.service.FxServiceClient.<init>(FxServiceClient.java:24)
	at com.airline.loyalty.MainVerticle.start(MainVerticle.java:36)
	at io.vertx.core.impl.DeploymentManager.lambda$doDeploy$5(DeploymentManager.java:210)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 08:42:19.546 [vert.x-eventloop-thread-1] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on 0.0.0.0:8080
2025-12-21 08:42:19.557 [vert.x-eventloop-thread-1] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 9090
2025-12-21 08:42:19.557 [vert.x-eventloop-thread-0] INFO  i.v.c.i.l.c.VertxIsolatedDeployer - Succeeded in deploying verticle
2025-12-21 08:44:32.023 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1500.0 USD in ECONOMY
2025-12-21 08:44:32.031 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: null
2025-12-21 08:44:32.854 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 08:44:32.936 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 08:44:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 08:44:32.938 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1725 total points
2025-12-21 08:45:09.652 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1500.0 USD in ECONOMY
2025-12-21 08:45:09.653 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 08:45:09.738 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 08:45:09.741 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 08:45:09 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 08:45:09.742 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1725 total points
2025-12-21 08:45:13.404 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1500.0 USD in ECONOMY
2025-12-21 08:45:13.406 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 08:45:13.482 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 08:45:13.491 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 08:45:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 08:45:13.492 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1725 total points
2025-12-21 08:45:50.225 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for -1500.0 USD in ECONOMY
2025-12-21 08:45:50.226 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 08:45:50.234 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 08:45:50 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "PostmanRuntime/7.51.0"
2025-12-21 08:46:11.951 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 08:46:11 GMT] "POST /health HTTP/1.1" 405 0 "-" "PostmanRuntime/7.51.0"
2025-12-21 08:46:26.365 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 08:46:26 GMT] "GET /health HTTP/1.1" 200 41 "-" "PostmanRuntime/7.51.0"
2025-12-21 09:01:32.997 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60450
2025-12-21 09:01:33.015 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60453
2025-12-21 09:01:35.271 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:01:35 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:01:36.505 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60455
2025-12-21 09:01:36.508 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60458
2025-12-21 09:01:36.713 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 09:01:36.938 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:01:36 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:01:36.938 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 09:01:37.082 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60460
2025-12-21 09:01:37.083 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60463
2025-12-21 09:01:37.135 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 09:01:37.136 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 09:01:37.484 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 09:01:37.489 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:01:37 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:01:37.489 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 09:01:37.787 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60466
2025-12-21 09:01:37.788 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60469
2025-12-21 09:01:37.804 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 09:01:37.805 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 09:01:37.847 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 09:01:37.847 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 09:01:37.855 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 09:01:37.857 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:01:37 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:01:37.857 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 09:01:38.033 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60473
2025-12-21 09:01:38.035 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60476
2025-12-21 09:01:38.053 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 09:01:38.054 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:01:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:01:38.054 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 09:01:38.175 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60478
2025-12-21 09:01:38.176 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60481
2025-12-21 09:01:38.193 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 09:01:38.194 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:01:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:01:38.194 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 09:01:38.272 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60483
2025-12-21 09:01:38.274 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60486
2025-12-21 09:01:38.289 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 09:01:38.290 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:01:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:01:38.290 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 09:01:38.374 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60488
2025-12-21 09:01:38.375 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60491
2025-12-21 09:01:38.390 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 09:01:38.391 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 09:01:38.398 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 09:01:38.399 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 09:01:38.407 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 09:01:38.408 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:01:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:01:38.408 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 09:01:38.572 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60495
2025-12-21 09:01:38.573 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60498
2025-12-21 09:01:38.593 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 09:01:38.593 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 09:01:38.600 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 09:01:38.601 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:01:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:01:38.601 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 09:01:38.712 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60501
2025-12-21 09:01:38.713 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60504
2025-12-21 09:01:38.732 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 09:01:38.733 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:01:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:01:38.733 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 09:11:20.042 [vert.x-eventloop-thread-0] ERROR i.v.c.i.l.c.VertxIsolatedDeployer - Failed in deploying verticle
java.lang.NullPointerException: Cannot invoke "io.vertx.core.json.JsonObject.getString(String)" because "fxConfig" is null
	at com.airline.loyalty.service.FxServiceClient.<init>(FxServiceClient.java:24)
	at com.airline.loyalty.MainVerticle.start(MainVerticle.java:35)
	at io.vertx.core.impl.DeploymentManager.lambda$doDeploy$5(DeploymentManager.java:210)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 09:11:51.204 [vert.x-eventloop-thread-0] ERROR i.v.c.i.l.c.VertxIsolatedDeployer - Failed in deploying verticle
java.lang.NullPointerException: Cannot invoke "io.vertx.core.json.JsonObject.getString(String)" because "fxConfig" is null
	at com.airline.loyalty.service.FxServiceClient.<init>(FxServiceClient.java:24)
	at com.airline.loyalty.MainVerticle.start(MainVerticle.java:35)
	at io.vertx.core.impl.DeploymentManager.lambda$doDeploy$5(DeploymentManager.java:210)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 09:13:35.621 [vert.x-eventloop-thread-0] ERROR i.v.c.i.l.c.VertxIsolatedDeployer - Failed in deploying verticle
java.lang.NullPointerException: Cannot invoke "io.vertx.core.json.JsonObject.getString(String)" because "fxConfig" is null
	at com.airline.loyalty.service.FxServiceClient.<init>(FxServiceClient.java:24)
	at com.airline.loyalty.MainVerticle.start(MainVerticle.java:35)
	at io.vertx.core.impl.DeploymentManager.lambda$doDeploy$5(DeploymentManager.java:210)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 09:14:23.527 [vert.x-eventloop-thread-0] ERROR i.v.c.i.l.c.VertxIsolatedDeployer - Failed in deploying verticle
java.lang.NullPointerException: Cannot invoke "io.vertx.core.json.JsonObject.getString(String)" because "fxConfig" is null
	at com.airline.loyalty.service.FxServiceClient.<init>(FxServiceClient.java:24)
	at com.airline.loyalty.MainVerticle.start(MainVerticle.java:35)
	at io.vertx.core.impl.DeploymentManager.lambda$doDeploy$5(DeploymentManager.java:210)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 09:15:35.360 [vert.x-eventloop-thread-1] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on 0.0.0.0:8080
2025-12-21 09:15:35.366 [vert.x-eventloop-thread-1] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 9090
2025-12-21 09:15:35.366 [vert.x-eventloop-thread-0] INFO  i.v.c.i.l.c.VertxIsolatedDeployer - Succeeded in deploying verticle
2025-12-21 09:53:42.079 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59181
2025-12-21 09:53:42.087 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59184
2025-12-21 09:53:44.062 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:53:43 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:53:45.417 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59186
2025-12-21 09:53:45.419 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59189
2025-12-21 09:53:45.680 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 09:53:45.730 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:53:45 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:53:45.731 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 09:53:45.875 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59191
2025-12-21 09:53:45.876 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59194
2025-12-21 09:53:45.914 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 09:53:45.915 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 09:53:46.241 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 09:53:46.244 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:53:45 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:53:46.245 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 09:53:46.520 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59197
2025-12-21 09:53:46.521 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59200
2025-12-21 09:53:46.535 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 09:53:46.536 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 09:53:46.556 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 09:53:46.557 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 09:53:46.564 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 09:53:46.566 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:53:46 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:53:46.566 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 09:53:46.734 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59204
2025-12-21 09:53:46.735 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59207
2025-12-21 09:53:46.750 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 09:53:46.751 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:53:46 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:53:46.751 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 09:53:46.843 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59209
2025-12-21 09:53:46.845 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59212
2025-12-21 09:53:46.862 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 09:53:46.863 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:53:46 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:53:46.863 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 09:53:46.939 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59214
2025-12-21 09:53:46.941 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59217
2025-12-21 09:53:46.956 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 09:53:46.957 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:53:46 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:53:46.957 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 09:53:47.039 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59219
2025-12-21 09:53:47.040 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59222
2025-12-21 09:53:47.054 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 09:53:47.054 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 09:53:47.062 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 09:53:47.063 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 09:53:47.070 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 09:53:47.071 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:53:47 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:53:47.071 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 09:53:47.200 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59226
2025-12-21 09:53:47.201 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59229
2025-12-21 09:53:47.213 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 09:53:47.214 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 09:53:47.220 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 09:53:47.221 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:53:47 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:53:47.221 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 09:53:47.321 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59232
2025-12-21 09:53:47.322 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59235
2025-12-21 09:53:47.337 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 09:53:47.338 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 09:53:47 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 09:53:47.338 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 10:01:50.187 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64092
2025-12-21 10:01:50.218 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64095
2025-12-21 10:01:52.390 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:01:52 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:01:53.603 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64097
2025-12-21 10:01:53.605 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64100
2025-12-21 10:01:53.691 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 10:01:53.712 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:01:53 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:01:53.712 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 10:01:53.851 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64102
2025-12-21 10:01:53.853 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64105
2025-12-21 10:01:53.895 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 10:01:53.895 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 10:01:54.232 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 10:01:54.235 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:01:53 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:01:54.236 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 10:01:54.518 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64108
2025-12-21 10:01:54.520 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64111
2025-12-21 10:01:54.537 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 10:01:54.538 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 10:01:54.557 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 10:01:54.558 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 10:01:54.565 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 10:01:54.566 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:01:54 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:01:54.566 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 10:01:54.738 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64115
2025-12-21 10:01:54.740 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64118
2025-12-21 10:01:54.760 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 10:01:54.762 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:01:54 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:01:54.762 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 10:01:54.856 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64120
2025-12-21 10:01:54.858 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64123
2025-12-21 10:01:54.871 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 10:01:54.872 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:01:54 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:01:54.872 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 10:01:54.954 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64125
2025-12-21 10:01:54.955 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64128
2025-12-21 10:01:54.978 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 10:01:54.979 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:01:54 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:01:54.979 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 10:01:55.058 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64130
2025-12-21 10:01:55.059 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64133
2025-12-21 10:01:55.071 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 10:01:55.072 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 10:01:55.079 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 10:01:55.079 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 10:01:55.087 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 10:01:55.088 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:01:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:01:55.088 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 10:01:55.227 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64137
2025-12-21 10:01:55.227 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64140
2025-12-21 10:01:55.239 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 10:01:55.240 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 10:01:55.245 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 10:01:55.246 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:01:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:01:55.246 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 10:01:55.357 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64143
2025-12-21 10:01:55.358 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64146
2025-12-21 10:01:55.373 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 10:01:55.374 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:01:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:01:55.374 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 10:26:02.726 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52500
2025-12-21 10:26:02.743 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52503
2025-12-21 10:26:04.604 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:26:04 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:26:05.857 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52505
2025-12-21 10:26:05.859 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52508
2025-12-21 10:26:05.991 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 10:26:06.019 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:26:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:26:06.019 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 10:26:06.161 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52510
2025-12-21 10:26:06.162 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52513
2025-12-21 10:26:06.197 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 10:26:06.198 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 10:26:06.473 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 10:26:06.477 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:26:06 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:26:06.477 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 10:26:06.765 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52516
2025-12-21 10:26:06.766 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52519
2025-12-21 10:26:06.785 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 10:26:06.786 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 10:26:06.816 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 10:26:06.817 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 10:26:06.824 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 10:26:06.826 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:26:06 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:26:06.826 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 10:26:06.953 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52523
2025-12-21 10:26:06.955 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52526
2025-12-21 10:26:06.968 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 10:26:06.969 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:26:06 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:26:06.969 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 10:26:07.055 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52528
2025-12-21 10:26:07.057 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52531
2025-12-21 10:26:07.069 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 10:26:07.070 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:26:07 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:26:07.070 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 10:26:07.139 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52533
2025-12-21 10:26:07.140 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52536
2025-12-21 10:26:07.155 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 10:26:07.156 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:26:07 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:26:07.156 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 10:26:07.233 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52538
2025-12-21 10:26:07.234 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52541
2025-12-21 10:26:07.246 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 10:26:07.246 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 10:26:07.256 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 10:26:07.256 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 10:26:07.263 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 10:26:07.265 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:26:07 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:26:07.265 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 10:26:07.393 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52545
2025-12-21 10:26:07.394 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52548
2025-12-21 10:26:07.407 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 10:26:07.407 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 10:26:07.414 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 10:26:07.415 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:26:07 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:26:07.415 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 10:26:07.507 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52551
2025-12-21 10:26:07.509 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52554
2025-12-21 10:26:07.523 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 10:26:07.524 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 10:26:07 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 10:26:07.524 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 10:26:32.749 [vert.x-eventloop-thread-1] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on 0.0.0.0:8080
2025-12-21 10:26:32.754 [vert.x-eventloop-thread-1] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 9090
2025-12-21 10:26:32.755 [vert.x-eventloop-thread-0] INFO  i.v.c.i.l.c.VertxIsolatedDeployer - Succeeded in deploying verticle
2025-12-21 10:26:41.409 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 10:26:41.416 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 10:26:41.910 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 10:26:41.942 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 10:26:41 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 10:26:41.942 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1419 total points
2025-12-21 10:28:18.078 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 10:28:18.079 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 10:28:18.295 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 10:28:18.298 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 10:28:18 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 10:28:18.299 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1419 total points
2025-12-21 10:29:48.799 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 10:29:48.802 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 10:29:48 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 10:29:48.803 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1419 total points
2025-12-21 10:29:55.692 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 10:29:55.694 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 10:29:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 10:29:55.695 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1419 total points
2025-12-21 10:30:03.786 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 10:30:03.786 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 10:30:03.866 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 10:30:03.872 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 10:30:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 10:30:03.872 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1419 total points
2025-12-21 10:31:22.048 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for -100.0 USD in ECONOMY
2025-12-21 10:31:22.049 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 10:31:22.057 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 10:31:22 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "PostmanRuntime/7.51.0"
2025-12-21 10:35:50.638 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1200.0 EUR in BUSINESS
2025-12-21 10:35:50.638 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 10:35:50.733 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 )
2025-12-21 10:35:50.733 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 10:35:50.942 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 )
2025-12-21 10:35:50.943 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 10:35:51.005 [vert.x-eventloop-thread-1] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
java.net.UnknownHostException: Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1097)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1044)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.access$800(DnsResolveContext.java:66)
	at io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:504)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625)
	at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:105)
	at io.netty.resolver.dns.DnsQueryContext.trySuccess(DnsQueryContext.java:317)
	at io.netty.resolver.dns.DnsQueryContext.finishSuccess(DnsQueryContext.java:309)
	at io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1400)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:97)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 10:35:51.012 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.PromiseImpl.onFailure(PromiseImpl.java:54)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:43)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:393)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:387)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:310)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$handleCreateRequest$6(HttpContext.java:493)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.lambda$emitFailure$1(FutureBase.java:75)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:305)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:181)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:72)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.http.impl.HttpClientImpl.lambda$doRequest$4(HttpClientImpl.java:398)
	at io.vertx.core.net.impl.pool.Endpoint.lambda$getConnection$0(Endpoint.java:52)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:162)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:123)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$ConnectFailed$1.run(SimpleConnectionPool.java:380)
	at io.vertx.core.net.impl.pool.Task.runNextTasks(Task.java:43)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:82)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:244)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.lambda$connect$2(SimpleConnectionPool.java:258)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint.lambda$connect$2(SharedClientHttpStreamEndpoint.java:104)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.NetClientImpl.failed(NetClientImpl.java:347)
	at io.vertx.core.net.impl.NetClientImpl.lambda$connectInternal2$6(NetClientImpl.java:319)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:157)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.netty.channel.DefaultChannelPromise.setFailure(DefaultChannelPromise.java:89)
	at io.netty.bootstrap.Bootstrap$2.operationComplete(Bootstrap.java:242)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.netty.resolver.InetSocketAddressResolver$1.operationComplete(InetSocketAddressResolver.java:62)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.resolver.dns.DnsNameResolver.tryFailure(DnsNameResolver.java:1052)
	at io.netty.resolver.dns.DnsNameResolver.access$500(DnsNameResolver.java:95)
	at io.netty.resolver.dns.DnsNameResolver$6.operationComplete(DnsNameResolver.java:1072)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1105)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1044)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.access$800(DnsResolveContext.java:66)
	at io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:504)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625)
	at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:105)
	at io.netty.resolver.dns.DnsQueryContext.trySuccess(DnsQueryContext.java:317)
	at io.netty.resolver.dns.DnsQueryContext.finishSuccess(DnsQueryContext.java:309)
	at io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1400)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:97)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.net.UnknownHostException: Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1097)
	... 37 common frames omitted
2025-12-21 10:35:51.016 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 10:35:50 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 10:36:45.808 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1200.0 EUR in ECONOMY
2025-12-21 10:36:45.808 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 10:36:45.886 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 )
2025-12-21 10:36:45.887 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 10:36:45.950 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 )
2025-12-21 10:36:45.952 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 10:36:46.008 [vert.x-eventloop-thread-1] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
java.net.UnknownHostException: Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1097)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1044)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.access$800(DnsResolveContext.java:66)
	at io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:504)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625)
	at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:105)
	at io.netty.resolver.dns.DnsQueryContext.trySuccess(DnsQueryContext.java:317)
	at io.netty.resolver.dns.DnsQueryContext.finishSuccess(DnsQueryContext.java:309)
	at io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1400)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:97)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 10:36:46.010 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.PromiseImpl.onFailure(PromiseImpl.java:54)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:43)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:393)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:387)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:310)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$handleCreateRequest$6(HttpContext.java:493)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.lambda$emitFailure$1(FutureBase.java:75)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:305)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:181)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:72)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.http.impl.HttpClientImpl.lambda$doRequest$4(HttpClientImpl.java:398)
	at io.vertx.core.net.impl.pool.Endpoint.lambda$getConnection$0(Endpoint.java:52)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:162)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:123)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$ConnectFailed$1.run(SimpleConnectionPool.java:380)
	at io.vertx.core.net.impl.pool.Task.runNextTasks(Task.java:43)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:82)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:244)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.lambda$connect$2(SimpleConnectionPool.java:258)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint.lambda$connect$2(SharedClientHttpStreamEndpoint.java:104)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.NetClientImpl.failed(NetClientImpl.java:347)
	at io.vertx.core.net.impl.NetClientImpl.lambda$connectInternal2$6(NetClientImpl.java:319)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:157)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.netty.channel.DefaultChannelPromise.setFailure(DefaultChannelPromise.java:89)
	at io.netty.bootstrap.Bootstrap$2.operationComplete(Bootstrap.java:242)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.netty.resolver.InetSocketAddressResolver$1.operationComplete(InetSocketAddressResolver.java:62)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.resolver.dns.DnsNameResolver.tryFailure(DnsNameResolver.java:1052)
	at io.netty.resolver.dns.DnsNameResolver.access$500(DnsNameResolver.java:95)
	at io.netty.resolver.dns.DnsNameResolver$6.operationComplete(DnsNameResolver.java:1072)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1105)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1044)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.access$800(DnsResolveContext.java:66)
	at io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:504)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625)
	at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:105)
	at io.netty.resolver.dns.DnsQueryContext.trySuccess(DnsQueryContext.java:317)
	at io.netty.resolver.dns.DnsQueryContext.finishSuccess(DnsQueryContext.java:309)
	at io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1400)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:97)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.net.UnknownHostException: Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1097)
	... 37 common frames omitted
2025-12-21 10:36:46.016 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 10:36:45 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 10:37:17.011 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1200.0 EUR in ECONOMY
2025-12-21 10:37:17.012 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 10:37:17.070 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 )
2025-12-21 10:37:17.071 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 10:37:17.129 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 )
2025-12-21 10:37:17.130 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 10:37:17.186 [vert.x-eventloop-thread-1] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
java.net.UnknownHostException: Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1097)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1044)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.access$800(DnsResolveContext.java:66)
	at io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:504)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625)
	at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:105)
	at io.netty.resolver.dns.DnsQueryContext.trySuccess(DnsQueryContext.java:317)
	at io.netty.resolver.dns.DnsQueryContext.finishSuccess(DnsQueryContext.java:309)
	at io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1400)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:97)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 10:37:17.188 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.PromiseImpl.onFailure(PromiseImpl.java:54)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:43)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:393)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:387)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:310)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$handleCreateRequest$6(HttpContext.java:493)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.lambda$emitFailure$1(FutureBase.java:75)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:305)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:181)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:72)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.http.impl.HttpClientImpl.lambda$doRequest$4(HttpClientImpl.java:398)
	at io.vertx.core.net.impl.pool.Endpoint.lambda$getConnection$0(Endpoint.java:52)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:162)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:123)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$ConnectFailed$1.run(SimpleConnectionPool.java:380)
	at io.vertx.core.net.impl.pool.Task.runNextTasks(Task.java:43)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:82)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:244)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.lambda$connect$2(SimpleConnectionPool.java:258)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint.lambda$connect$2(SharedClientHttpStreamEndpoint.java:104)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.NetClientImpl.failed(NetClientImpl.java:347)
	at io.vertx.core.net.impl.NetClientImpl.lambda$connectInternal2$6(NetClientImpl.java:319)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:157)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.netty.channel.DefaultChannelPromise.setFailure(DefaultChannelPromise.java:89)
	at io.netty.bootstrap.Bootstrap$2.operationComplete(Bootstrap.java:242)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.netty.resolver.InetSocketAddressResolver$1.operationComplete(InetSocketAddressResolver.java:62)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.resolver.dns.DnsNameResolver.tryFailure(DnsNameResolver.java:1052)
	at io.netty.resolver.dns.DnsNameResolver.access$500(DnsNameResolver.java:95)
	at io.netty.resolver.dns.DnsNameResolver$6.operationComplete(DnsNameResolver.java:1072)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1105)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1044)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.access$800(DnsResolveContext.java:66)
	at io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:504)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625)
	at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:105)
	at io.netty.resolver.dns.DnsQueryContext.trySuccess(DnsQueryContext.java:317)
	at io.netty.resolver.dns.DnsQueryContext.finishSuccess(DnsQueryContext.java:309)
	at io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1400)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:97)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.net.UnknownHostException: Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1097)
	... 37 common frames omitted
2025-12-21 10:37:17.191 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 10:37:17 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 10:37:24.027 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1200.0 EUR in ECONOMY
2025-12-21 10:37:24.027 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 10:37:24.085 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 )
2025-12-21 10:37:24.085 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 10:37:24.148 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 )
2025-12-21 10:37:24.148 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 10:37:24.204 [vert.x-eventloop-thread-1] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
java.net.UnknownHostException: Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1097)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1044)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.access$800(DnsResolveContext.java:66)
	at io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:504)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625)
	at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:105)
	at io.netty.resolver.dns.DnsQueryContext.trySuccess(DnsQueryContext.java:317)
	at io.netty.resolver.dns.DnsQueryContext.finishSuccess(DnsQueryContext.java:309)
	at io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1400)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:97)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 10:37:24.206 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.PromiseImpl.onFailure(PromiseImpl.java:54)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:43)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:393)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:387)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:310)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$handleCreateRequest$6(HttpContext.java:493)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.lambda$emitFailure$1(FutureBase.java:75)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:305)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:181)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:72)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.http.impl.HttpClientImpl.lambda$doRequest$4(HttpClientImpl.java:398)
	at io.vertx.core.net.impl.pool.Endpoint.lambda$getConnection$0(Endpoint.java:52)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:162)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:123)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$ConnectFailed$1.run(SimpleConnectionPool.java:380)
	at io.vertx.core.net.impl.pool.Task.runNextTasks(Task.java:43)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:82)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:244)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.lambda$connect$2(SimpleConnectionPool.java:258)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint.lambda$connect$2(SharedClientHttpStreamEndpoint.java:104)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.NetClientImpl.failed(NetClientImpl.java:347)
	at io.vertx.core.net.impl.NetClientImpl.lambda$connectInternal2$6(NetClientImpl.java:319)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:157)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.netty.channel.DefaultChannelPromise.setFailure(DefaultChannelPromise.java:89)
	at io.netty.bootstrap.Bootstrap$2.operationComplete(Bootstrap.java:242)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.netty.resolver.InetSocketAddressResolver$1.operationComplete(InetSocketAddressResolver.java:62)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.resolver.dns.DnsNameResolver.tryFailure(DnsNameResolver.java:1052)
	at io.netty.resolver.dns.DnsNameResolver.access$500(DnsNameResolver.java:95)
	at io.netty.resolver.dns.DnsNameResolver$6.operationComplete(DnsNameResolver.java:1072)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1105)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1044)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.access$800(DnsResolveContext.java:66)
	at io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:504)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625)
	at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:105)
	at io.netty.resolver.dns.DnsQueryContext.trySuccess(DnsQueryContext.java:317)
	at io.netty.resolver.dns.DnsQueryContext.finishSuccess(DnsQueryContext.java:309)
	at io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1400)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:97)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.net.UnknownHostException: Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1097)
	... 37 common frames omitted
2025-12-21 10:37:24.208 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 10:37:24 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 10:37:37.826 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 10:37:37.827 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 10:37:37.911 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 10:37:37.913 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 10:37:37 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 10:37:37.914 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1419 total points
2025-12-21 10:37:58.310 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for -100.0 EUR in ECONOMY
2025-12-21 10:37:58.310 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 10:37:58.311 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 10:37:58 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "PostmanRuntime/7.51.0"
2025-12-21 10:38:12.223 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 10:38:12.224 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 10:38:12.304 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 10:38:12.306 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 10:38:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 10:38:12.307 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1419 total points
2025-12-21 10:39:05.713 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 20000.0 USD in BUSINESS
2025-12-21 10:39:05.714 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 10:39:05.792 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 10:39:05.795 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 10:39:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "PostmanRuntime/7.51.0"
2025-12-21 10:39:05.795 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 23000 total points
2025-12-21 10:39:17.931 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 50000.0 USD in BUSINESS
2025-12-21 10:39:17.931 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 10:39:17.991 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 10:39:17.992 [vert.x-eventloop-thread-1] INFO  c.a.l.s.PointsCalculationService - Points capped: 57500 -> 50000
2025-12-21 10:39:18.008 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 10:39:17 GMT] "POST /v1/points/quote HTTP/1.1" 200 130 "-" "PostmanRuntime/7.51.0"
2025-12-21 10:39:18.009 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 50000 total points
2025-12-21 11:06:34.726 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 GBP in BUSINESS
2025-12-21 11:06:34.727 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 11:06:34.806 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 )
2025-12-21 11:06:34.807 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 2)
2025-12-21 11:06:34.886 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 )
2025-12-21 11:06:34.887 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 3)
2025-12-21 11:06:34.944 [vert.x-eventloop-thread-1] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
java.net.UnknownHostException: Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1097)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1044)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.access$800(DnsResolveContext.java:66)
	at io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:504)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625)
	at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:105)
	at io.netty.resolver.dns.DnsQueryContext.trySuccess(DnsQueryContext.java:317)
	at io.netty.resolver.dns.DnsQueryContext.finishSuccess(DnsQueryContext.java:309)
	at io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1400)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:97)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 11:06:34.945 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.PromiseImpl.onFailure(PromiseImpl.java:54)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:43)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:393)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:387)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:310)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$handleCreateRequest$6(HttpContext.java:493)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.lambda$emitFailure$1(FutureBase.java:75)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:305)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:181)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:72)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.http.impl.HttpClientImpl.lambda$doRequest$4(HttpClientImpl.java:398)
	at io.vertx.core.net.impl.pool.Endpoint.lambda$getConnection$0(Endpoint.java:52)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:162)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:123)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$ConnectFailed$1.run(SimpleConnectionPool.java:380)
	at io.vertx.core.net.impl.pool.Task.runNextTasks(Task.java:43)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:82)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:244)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.lambda$connect$2(SimpleConnectionPool.java:258)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint.lambda$connect$2(SharedClientHttpStreamEndpoint.java:104)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.NetClientImpl.failed(NetClientImpl.java:347)
	at io.vertx.core.net.impl.NetClientImpl.lambda$connectInternal2$6(NetClientImpl.java:319)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:157)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.netty.channel.DefaultChannelPromise.setFailure(DefaultChannelPromise.java:89)
	at io.netty.bootstrap.Bootstrap$2.operationComplete(Bootstrap.java:242)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.netty.resolver.InetSocketAddressResolver$1.operationComplete(InetSocketAddressResolver.java:62)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.resolver.dns.DnsNameResolver.tryFailure(DnsNameResolver.java:1052)
	at io.netty.resolver.dns.DnsNameResolver.access$500(DnsNameResolver.java:95)
	at io.netty.resolver.dns.DnsNameResolver$6.operationComplete(DnsNameResolver.java:1072)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1105)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1044)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.access$800(DnsResolveContext.java:66)
	at io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:504)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625)
	at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:105)
	at io.netty.resolver.dns.DnsQueryContext.trySuccess(DnsQueryContext.java:317)
	at io.netty.resolver.dns.DnsQueryContext.finishSuccess(DnsQueryContext.java:309)
	at io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1400)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:97)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.net.UnknownHostException: Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1097)
	... 37 common frames omitted
2025-12-21 11:06:34.949 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:06:34 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:29:14.206 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 45000.0 USD in BUSINESS
2025-12-21 11:29:14.207 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 11:29:14.418 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 11:29:14.419 [vert.x-eventloop-thread-1] INFO  c.a.l.s.PointsCalculationService - Points capped: 51750 -> 50000
2025-12-21 11:29:14.421 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:29:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 130 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:29:14.421 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 50000 total points
2025-12-21 11:29:37.070 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for -100.0 USD in ECONOMY
2025-12-21 11:29:37.071 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 11:29:37.072 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:29:37 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:30:28.648 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 11:30:28.649 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 11:30:28.732 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 11:30:28.737 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:30:28 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:30:28.738 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1419 total points
2025-12-21 11:31:50.298 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 11:31:50.298 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 11:31:50.378 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 11:31:50.380 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:31:50 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:31:50.380 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1604 total points
2025-12-21 11:33:19.645 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 11:33:19.645 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 11:33:19.725 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 11:33:19.727 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:33:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:33:19.727 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1851 total points
2025-12-21 11:50:25.983 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 52000.0 USD in BUSINESS
2025-12-21 11:50:25.983 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 11:50:26.198 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 11:50:26.198 [vert.x-eventloop-thread-1] INFO  c.a.l.s.PointsCalculationService - Points capped: 59800 -> 50000
2025-12-21 11:50:26.199 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:50:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 130 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:50:26.199 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 50000 total points
2025-12-21 11:50:43.896 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 45000.0 USD in BUSINESS
2025-12-21 11:50:43.896 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 11:50:43.973 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 11:50:43.973 [vert.x-eventloop-thread-1] INFO  c.a.l.s.PointsCalculationService - Points capped: 51750 -> 50000
2025-12-21 11:50:43.975 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:50:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 130 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:50:43.975 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 50000 total points
2025-12-21 11:50:54.844 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 44000.0 USD in BUSINESS
2025-12-21 11:50:54.844 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 11:50:54.908 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 11:50:54.908 [vert.x-eventloop-thread-1] INFO  c.a.l.s.PointsCalculationService - Points capped: 50600 -> 50000
2025-12-21 11:50:54.914 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:50:54 GMT] "POST /v1/points/quote HTTP/1.1" 200 130 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:50:54.914 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 50000 total points
2025-12-21 11:51:16.261 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 45000.0 USD in BUSINESS
2025-12-21 11:51:16.261 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 11:51:16.330 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 11:51:16.331 [vert.x-eventloop-thread-1] INFO  c.a.l.s.PointsCalculationService - Points capped: 51750 -> 50000
2025-12-21 11:51:16.332 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:51:16 GMT] "POST /v1/points/quote HTTP/1.1" 200 130 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:51:16.332 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 50000 total points
2025-12-21 11:51:38.045 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 11:51:38.046 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 11:51:38.123 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 11:51:38.125 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:51:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:51:38.125 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1851 total points
2025-12-21 11:52:01.445 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for -100.0 USD in ECONOMY
2025-12-21 11:52:01.446 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 11:52:01.447 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:52:01 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:52:34.563 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 11:52:34.563 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 11:52:34.564 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:52:34 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:52:53.879 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.5 USD in ECONOMY
2025-12-21 11:52:53.879 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 11:52:53.989 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 11:52:53.991 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:52:53 GMT] "POST /v1/points/quote HTTP/1.1" 200 97 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:52:53.992 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 0 total points
2025-12-21 11:54:41.556 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 11:54:41.557 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 11:54:41.557 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:54:41 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:55:02.986 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in BUSINESS
2025-12-21 11:55:02.987 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 11:55:03.060 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 11:55:03.062 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:55:02 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:55:03.063 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1419 total points
2025-12-21 11:55:17.000 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 11:55:17.000 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 11:55:17.052 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 11:55:17.055 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:55:16 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:55:17.055 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1419 total points
2025-12-21 11:55:26.738 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5  in ECONOMY
2025-12-21 11:55:26.738 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid currency code
2025-12-21 11:55:26.739 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:55:26 GMT] "POST /v1/points/quote HTTP/1.1" 400 107 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:57:22.821 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5  in 123
2025-12-21 11:57:22.822 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid currency code
2025-12-21 11:57:22.823 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:57:22 GMT] "POST /v1/points/quote HTTP/1.1" 400 107 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:57:42.262 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in 123
2025-12-21 11:57:42.269 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: 123
2025-12-21 11:57:42.270 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:57:42 GMT] "POST /v1/points/quote HTTP/1.1" 400 110 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:57:53.824 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ABC
2025-12-21 11:57:53.824 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: ABC
2025-12-21 11:57:53.825 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:57:53 GMT] "POST /v1/points/quote HTTP/1.1" 400 110 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:58:21.159 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 11:58:21.160 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 11:58:21.719 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 11:58:21.721 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 11:58:21 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 11:58:21.722 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1419 total points
2025-12-21 12:00:12.506 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in PREMIUM
2025-12-21 12:00:12.507 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: PREMIUM
2025-12-21 12:00:12.511 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 12:00:12 GMT] "POST /v1/points/quote HTTP/1.1" 400 114 "-" "PostmanRuntime/7.51.0"
2025-12-21 12:00:43.506 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in PREMIUM
2025-12-21 12:00:43.507 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: PREMIUM
2025-12-21 12:00:43.510 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 12:00:43 GMT] "POST /v1/points/quote HTTP/1.1" 400 114 "-" "PostmanRuntime/7.51.0"
2025-12-21 12:02:04.699 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in PREMIUM
2025-12-21 12:02:04.699 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: PREMIUM
2025-12-21 12:02:04.700 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 12:02:04 GMT] "POST /v1/points/quote HTTP/1.1" 400 114 "-" "PostmanRuntime/7.51.0"
2025-12-21 12:02:14.050 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 12:02:14.051 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid customer tier: BASIC
2025-12-21 12:02:14.052 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 12:02:14 GMT] "POST /v1/points/quote HTTP/1.1" 400 114 "-" "PostmanRuntime/7.51.0"
2025-12-21 12:16:52.193 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 12:16:52.193 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 12:16:52.274 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Failed to resolve 'promo-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
2025-12-21 12:16:52.276 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 12:16:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 12:16:52.276 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1419 total points
2025-12-21 12:26:03.632 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.0 EUR in BUSINESS
2025-12-21 12:26:03.633 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 12:26:03.712 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 )
2025-12-21 12:26:03.712 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 12:26:03.792 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 )
2025-12-21 12:26:03.793 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 12:26:03.857 [vert.x-eventloop-thread-1] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
java.net.UnknownHostException: Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1097)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1044)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.access$800(DnsResolveContext.java:66)
	at io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:504)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625)
	at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:105)
	at io.netty.resolver.dns.DnsQueryContext.trySuccess(DnsQueryContext.java:317)
	at io.netty.resolver.dns.DnsQueryContext.finishSuccess(DnsQueryContext.java:309)
	at io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1400)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:97)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 12:26:03.861 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.PromiseImpl.onFailure(PromiseImpl.java:54)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:43)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:393)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:387)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:310)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$handleCreateRequest$6(HttpContext.java:493)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.lambda$emitFailure$1(FutureBase.java:75)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:305)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:181)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:72)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.http.impl.HttpClientImpl.lambda$doRequest$4(HttpClientImpl.java:398)
	at io.vertx.core.net.impl.pool.Endpoint.lambda$getConnection$0(Endpoint.java:52)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:162)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:123)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$ConnectFailed$1.run(SimpleConnectionPool.java:380)
	at io.vertx.core.net.impl.pool.Task.runNextTasks(Task.java:43)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:82)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:244)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.lambda$connect$2(SimpleConnectionPool.java:258)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint.lambda$connect$2(SharedClientHttpStreamEndpoint.java:104)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.NetClientImpl.failed(NetClientImpl.java:347)
	at io.vertx.core.net.impl.NetClientImpl.lambda$connectInternal2$6(NetClientImpl.java:319)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:157)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.netty.channel.DefaultChannelPromise.setFailure(DefaultChannelPromise.java:89)
	at io.netty.bootstrap.Bootstrap$2.operationComplete(Bootstrap.java:242)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.netty.resolver.InetSocketAddressResolver$1.operationComplete(InetSocketAddressResolver.java:62)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.resolver.dns.DnsNameResolver.tryFailure(DnsNameResolver.java:1052)
	at io.netty.resolver.dns.DnsNameResolver.access$500(DnsNameResolver.java:95)
	at io.netty.resolver.dns.DnsNameResolver$6.operationComplete(DnsNameResolver.java:1072)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1105)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1044)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.access$800(DnsResolveContext.java:66)
	at io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:504)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625)
	at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:105)
	at io.netty.resolver.dns.DnsQueryContext.trySuccess(DnsQueryContext.java:317)
	at io.netty.resolver.dns.DnsQueryContext.finishSuccess(DnsQueryContext.java:309)
	at io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1400)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:97)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.net.UnknownHostException: Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1097)
	... 37 common frames omitted
2025-12-21 12:26:03.866 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 12:26:03 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 12:26:47.720 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.0 EUR in BUSINESS
2025-12-21 12:26:47.720 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 12:26:47.799 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 )
2025-12-21 12:26:47.801 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 12:26:47.860 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 )
2025-12-21 12:26:47.861 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 12:26:47.922 [vert.x-eventloop-thread-1] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
java.net.UnknownHostException: Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1097)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1044)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.access$800(DnsResolveContext.java:66)
	at io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:504)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625)
	at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:105)
	at io.netty.resolver.dns.DnsQueryContext.trySuccess(DnsQueryContext.java:317)
	at io.netty.resolver.dns.DnsQueryContext.finishSuccess(DnsQueryContext.java:309)
	at io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1400)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:97)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 12:26:47.923 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.PromiseImpl.onFailure(PromiseImpl.java:54)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:43)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:393)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:387)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:310)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$handleCreateRequest$6(HttpContext.java:493)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.lambda$emitFailure$1(FutureBase.java:75)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:305)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:181)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:72)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.http.impl.HttpClientImpl.lambda$doRequest$4(HttpClientImpl.java:398)
	at io.vertx.core.net.impl.pool.Endpoint.lambda$getConnection$0(Endpoint.java:52)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:162)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:123)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$ConnectFailed$1.run(SimpleConnectionPool.java:380)
	at io.vertx.core.net.impl.pool.Task.runNextTasks(Task.java:43)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:82)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:244)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.lambda$connect$2(SimpleConnectionPool.java:258)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint.lambda$connect$2(SharedClientHttpStreamEndpoint.java:104)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.NetClientImpl.failed(NetClientImpl.java:347)
	at io.vertx.core.net.impl.NetClientImpl.lambda$connectInternal2$6(NetClientImpl.java:319)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:157)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.netty.channel.DefaultChannelPromise.setFailure(DefaultChannelPromise.java:89)
	at io.netty.bootstrap.Bootstrap$2.operationComplete(Bootstrap.java:242)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.netty.resolver.InetSocketAddressResolver$1.operationComplete(InetSocketAddressResolver.java:62)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.resolver.dns.DnsNameResolver.tryFailure(DnsNameResolver.java:1052)
	at io.netty.resolver.dns.DnsNameResolver.access$500(DnsNameResolver.java:95)
	at io.netty.resolver.dns.DnsNameResolver$6.operationComplete(DnsNameResolver.java:1072)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1105)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1044)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432)
	at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1015)
	at io.netty.resolver.dns.DnsResolveContext.access$800(DnsResolveContext.java:66)
	at io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:504)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625)
	at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:105)
	at io.netty.resolver.dns.DnsQueryContext.trySuccess(DnsQueryContext.java:317)
	at io.netty.resolver.dns.DnsQueryContext.finishSuccess(DnsQueryContext.java:309)
	at io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1400)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:97)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.net.UnknownHostException: Failed to resolve 'fx-api.example.com' [A(1), AAAA(28)]. Exceeded max queries per resolve 4 
	at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1097)
	... 37 common frames omitted
2025-12-21 12:26:47.925 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 12:26:47 GMT] "POST /v1/points/quote HTTP/1.1" 500 122 "-" "PostmanRuntime/7.51.0"
2025-12-21 12:30:00.811 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54011
2025-12-21 12:30:00.831 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54014
2025-12-21 12:30:02.809 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 12:30:02 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 12:30:03.994 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54016
2025-12-21 12:30:03.995 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54019
2025-12-21 12:30:04.141 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 12:30:04.205 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 12:30:04 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 12:30:04.206 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 12:30:04.371 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54021
2025-12-21 12:30:04.373 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54024
2025-12-21 12:30:04.416 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 12:30:04.416 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 12:30:04.790 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 12:30:04.794 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 12:30:04 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 12:30:04.794 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 12:30:05.028 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54027
2025-12-21 12:30:05.029 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54030
2025-12-21 12:30:05.045 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 12:30:05.045 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 12:30:05.068 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 12:30:05.069 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 12:30:05.076 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 12:30:05.077 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 12:30:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 12:30:05.077 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 12:30:05.231 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54034
2025-12-21 12:30:05.232 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54037
2025-12-21 12:30:05.246 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 12:30:05.247 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 12:30:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 12:30:05.248 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 12:30:05.336 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54039
2025-12-21 12:30:05.338 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54043
2025-12-21 12:30:05.350 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 12:30:05.351 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 12:30:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 12:30:05.351 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 12:30:05.439 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54045
2025-12-21 12:30:05.440 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54048
2025-12-21 12:30:05.452 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 12:30:05.453 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 12:30:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 12:30:05.453 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 12:30:05.528 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54050
2025-12-21 12:30:05.529 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54053
2025-12-21 12:30:05.543 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 12:30:05.543 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 12:30:05.552 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 12:30:05.552 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 12:30:05.559 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 12:30:05.560 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 12:30:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 12:30:05.560 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 12:30:05.695 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54057
2025-12-21 12:30:05.697 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54060
2025-12-21 12:30:05.711 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 12:30:05.711 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 12:30:05.720 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 12:30:05.721 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 12:30:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 12:30:05.722 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 12:30:05.811 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54063
2025-12-21 12:30:05.812 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54066
2025-12-21 12:30:05.826 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 12:30:05.827 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 12:30:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 12:30:05.827 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 12:41:58.791 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 12:41:58 GMT] "GET /health HTTP/1.1" 200 41 "-" "PostmanRuntime/7.51.0"
2025-12-21 13:51:14.621 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64266
2025-12-21 13:51:14.635 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64269
2025-12-21 13:51:16.608 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 13:51:16 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 13:51:17.853 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64271
2025-12-21 13:51:17.854 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64274
2025-12-21 13:51:17.961 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 13:51:17.982 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 13:51:17 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 13:51:17.983 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 13:51:18.140 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64276
2025-12-21 13:51:18.142 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64279
2025-12-21 13:51:18.177 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 13:51:18.178 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 13:51:18.519 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 13:51:18.524 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 13:51:18 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 13:51:18.525 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 13:51:18.815 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64282
2025-12-21 13:51:18.816 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64285
2025-12-21 13:51:18.835 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 13:51:18.835 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 13:51:18.860 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 13:51:18.860 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 13:51:18.870 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 13:51:18.872 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 13:51:18 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 13:51:18.872 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 13:51:19.041 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64289
2025-12-21 13:51:19.043 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64292
2025-12-21 13:51:19.058 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 13:51:19.059 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 13:51:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 13:51:19.059 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 13:51:19.191 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64294
2025-12-21 13:51:19.192 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64297
2025-12-21 13:51:19.207 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 13:51:19.208 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 13:51:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 13:51:19.208 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 13:51:19.279 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64299
2025-12-21 13:51:19.280 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64302
2025-12-21 13:51:19.295 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 13:51:19.296 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 13:51:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 13:51:19.296 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 13:51:19.394 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64304
2025-12-21 13:51:19.395 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64307
2025-12-21 13:51:19.412 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 13:51:19.412 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 13:51:19.424 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 13:51:19.425 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 13:51:19.432 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 13:51:19.434 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 13:51:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 13:51:19.434 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 13:51:19.582 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64311
2025-12-21 13:51:19.583 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64314
2025-12-21 13:51:19.595 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 13:51:19.595 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 13:51:19.603 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 13:51:19.605 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 13:51:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 13:51:19.605 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 13:51:19.700 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64317
2025-12-21 13:51:19.701 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64320
2025-12-21 13:51:19.716 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 13:51:19.717 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 13:51:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 13:51:19.717 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 13:57:57.831 [vert.x-eventloop-thread-1] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on 0.0.0.0:8080
2025-12-21 13:57:57.836 [vert.x-eventloop-thread-1] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 9090
2025-12-21 13:57:57.836 [vert.x-eventloop-thread-0] INFO  i.v.c.i.l.c.VertxIsolatedDeployer - Succeeded in deploying verticle
2025-12-21 14:01:27.258 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50065
2025-12-21 14:01:27.270 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50068
2025-12-21 14:01:29.153 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:01:29 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:01:30.312 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50070
2025-12-21 14:01:30.313 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50073
2025-12-21 14:01:30.403 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 14:01:30.419 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:01:30 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:01:30.419 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 14:01:30.559 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50075
2025-12-21 14:01:30.560 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50078
2025-12-21 14:01:30.593 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 14:01:30.593 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 14:01:30.907 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 14:01:30.910 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:01:30 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:01:30.910 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 14:01:31.193 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50081
2025-12-21 14:01:31.195 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50084
2025-12-21 14:01:31.214 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 14:01:31.214 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 14:01:31.235 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 14:01:31.235 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 14:01:31.242 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 14:01:31.243 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:01:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:01:31.244 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 14:01:31.408 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50088
2025-12-21 14:01:31.409 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50091
2025-12-21 14:01:31.422 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:01:31.423 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:01:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:01:31.423 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 14:01:31.499 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50093
2025-12-21 14:01:31.500 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50096
2025-12-21 14:01:31.517 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:01:31.519 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:01:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:01:31.519 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 14:01:31.602 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50098
2025-12-21 14:01:31.603 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50101
2025-12-21 14:01:31.615 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:01:31.616 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:01:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:01:31.616 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 14:01:31.695 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50103
2025-12-21 14:01:31.696 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50106
2025-12-21 14:01:31.707 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 14:01:31.707 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 14:01:31.714 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 14:01:31.714 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 14:01:31.721 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 14:01:31.723 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:01:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:01:31.723 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 14:01:31.860 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50110
2025-12-21 14:01:31.861 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50113
2025-12-21 14:01:31.875 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 14:01:31.875 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 14:01:31.882 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 14:01:31.883 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:01:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:01:31.884 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 14:01:31.968 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50116
2025-12-21 14:01:31.969 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50119
2025-12-21 14:01:31.983 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 14:01:31.984 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:01:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:01:31.984 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 14:03:26.361 [vert.x-eventloop-thread-1] ERROR com.airline.loyalty.MainVerticle - Failed to start server
java.net.BindException: Address already in use: bind
	at java.base/sun.nio.ch.Net.bind0(Native Method)
	at java.base/sun.nio.ch.Net.bind(Net.java:555)
	at java.base/sun.nio.ch.ServerSocketChannelImpl.netBind(ServerSocketChannelImpl.java:337)
	at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:294)
	at io.netty.channel.socket.nio.NioServerSocketChannel.doBind(NioServerSocketChannel.java:141)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.bind(AbstractChannel.java:562)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.bind(DefaultChannelPipeline.java:1334)
	at io.netty.channel.AbstractChannelHandlerContext.invokeBind(AbstractChannelHandlerContext.java:600)
	at io.netty.channel.AbstractChannelHandlerContext.bind(AbstractChannelHandlerContext.java:579)
	at io.netty.channel.DefaultChannelPipeline.bind(DefaultChannelPipeline.java:973)
	at io.netty.channel.AbstractChannel.bind(AbstractChannel.java:260)
	at io.netty.bootstrap.AbstractBootstrap$2.run(AbstractBootstrap.java:380)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasksFrom(SingleThreadEventExecutor.java:426)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:375)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:557)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 14:03:26.378 [vert.x-eventloop-thread-0] ERROR i.v.c.i.l.c.VertxIsolatedDeployer - Failed in deploying verticle
java.net.BindException: Address already in use: bind
	at java.base/sun.nio.ch.Net.bind0(Native Method)
	at java.base/sun.nio.ch.Net.bind(Net.java:555)
	at java.base/sun.nio.ch.ServerSocketChannelImpl.netBind(ServerSocketChannelImpl.java:337)
	at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:294)
	at io.netty.channel.socket.nio.NioServerSocketChannel.doBind(NioServerSocketChannel.java:141)
	at io.netty.channel.AbstractChannel$AbstractUnsafe.bind(AbstractChannel.java:562)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.bind(DefaultChannelPipeline.java:1334)
	at io.netty.channel.AbstractChannelHandlerContext.invokeBind(AbstractChannelHandlerContext.java:600)
	at io.netty.channel.AbstractChannelHandlerContext.bind(AbstractChannelHandlerContext.java:579)
	at io.netty.channel.DefaultChannelPipeline.bind(DefaultChannelPipeline.java:973)
	at io.netty.channel.AbstractChannel.bind(AbstractChannel.java:260)
	at io.netty.bootstrap.AbstractBootstrap$2.run(AbstractBootstrap.java:380)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasksFrom(SingleThreadEventExecutor.java:426)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:375)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:557)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 14:30:05.005 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55436
2025-12-21 14:30:05.017 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55439
2025-12-21 14:30:07.088 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:30:07 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:30:08.190 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55441
2025-12-21 14:30:08.192 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55444
2025-12-21 14:30:08.289 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 14:30:08.305 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:30:08 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:30:08.305 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 14:30:08.459 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55446
2025-12-21 14:30:08.461 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55449
2025-12-21 14:30:08.497 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:30:08.497 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 14:30:08.803 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 14:30:08.806 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 14:30:08.808 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:30:08 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:30:08.808 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 14:30:08.935 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55452
2025-12-21 14:30:08.937 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55455
2025-12-21 14:30:08.952 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 14:30:08.952 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 14:30:08.958 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 14:30:08.959 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:30:08 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:30:08.959 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 14:30:09.231 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55458
2025-12-21 14:30:09.233 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55461
2025-12-21 14:30:09.249 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:30:09.250 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:30:09 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:30:09.250 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 14:30:09.356 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55463
2025-12-21 14:30:09.358 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55466
2025-12-21 14:30:09.374 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 14:30:09.375 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 14:30:09.397 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 14:30:09.397 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 14:30:09.404 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 14:30:09.405 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:30:09 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:30:09.405 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 14:30:09.548 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55470
2025-12-21 14:30:09.550 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55473
2025-12-21 14:30:09.564 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:30:09.566 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:30:09 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:30:09.566 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 14:30:09.667 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55475
2025-12-21 14:30:09.668 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55478
2025-12-21 14:30:09.685 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:30:09.686 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:30:09 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:30:09.686 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 14:30:09.772 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55480
2025-12-21 14:30:09.774 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55483
2025-12-21 14:30:09.786 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:30:09.787 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:30:09 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:30:09.787 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 14:30:09.865 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55485
2025-12-21 14:30:09.866 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55488
2025-12-21 14:30:09.884 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 14:30:09.884 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 14:30:09.893 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 14:30:09.893 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 14:30:09.901 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 14:30:09.903 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:30:09 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:30:09.904 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 14:30:10.053 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55492
2025-12-21 14:30:10.054 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55495
2025-12-21 14:30:10.066 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 14:30:10.067 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 14:30:10.072 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 14:30:10.073 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:30:10 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:30:10.073 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 14:30:10.181 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55498
2025-12-21 14:30:10.182 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55501
2025-12-21 14:30:10.200 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 14:30:10.201 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:30:10 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:30:10.201 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 14:33:20.202 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54950
2025-12-21 14:33:20.217 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54953
2025-12-21 14:33:22.157 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:33:22 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:33:23.339 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54955
2025-12-21 14:33:23.340 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54958
2025-12-21 14:33:23.430 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 14:33:23.446 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:33:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:33:23.447 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 14:33:23.583 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54960
2025-12-21 14:33:23.584 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54963
2025-12-21 14:33:23.623 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:33:23.623 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 14:33:23.950 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 14:33:23.953 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 14:33:23.956 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:33:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:33:23.956 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 14:33:24.097 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54966
2025-12-21 14:33:24.098 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54969
2025-12-21 14:33:24.111 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 14:33:24.111 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 14:33:24.118 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 14:33:24.119 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:33:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:33:24.119 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 14:33:24.385 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54972
2025-12-21 14:33:24.386 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54975
2025-12-21 14:33:24.407 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:33:24.408 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:33:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:33:24.408 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 14:33:24.519 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54977
2025-12-21 14:33:24.520 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54980
2025-12-21 14:33:24.533 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000000.0 USD in FIRST
2025-12-21 14:33:24.533 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Points capped: 1500000 -> 50000
2025-12-21 14:33:24.537 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:33:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 134 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:33:24.537 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 50000 total points
2025-12-21 14:33:24.651 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54982
2025-12-21 14:33:24.652 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54985
2025-12-21 14:33:24.671 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 14:33:24.672 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 14:33:24.693 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 14:33:24.694 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 14:33:24.702 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 14:33:24.704 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:33:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:33:24.705 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 14:33:24.849 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54989
2025-12-21 14:33:24.850 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54992
2025-12-21 14:33:24.864 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:33:24.865 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:33:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:33:24.865 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 14:33:24.952 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54994
2025-12-21 14:33:24.954 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54997
2025-12-21 14:33:24.965 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:33:24.966 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:33:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:33:24.966 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 14:33:25.030 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54999
2025-12-21 14:33:25.032 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55002
2025-12-21 14:33:25.045 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:33:25.046 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:33:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:33:25.046 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 14:33:25.128 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55004
2025-12-21 14:33:25.129 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55007
2025-12-21 14:33:25.141 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 14:33:25.141 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 14:33:25.147 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 14:33:25.148 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 14:33:25.154 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 14:33:25.155 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:33:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:33:25.156 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 14:33:25.276 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55011
2025-12-21 14:33:25.277 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55014
2025-12-21 14:33:25.290 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 14:33:25.290 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 14:33:25.297 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 14:33:25.298 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:33:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:33:25.298 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 14:33:25.400 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55017
2025-12-21 14:33:25.401 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55020
2025-12-21 14:33:25.411 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 14:33:25.412 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:33:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:33:25.412 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 14:40:19.363 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52361
2025-12-21 14:40:19.377 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52364
2025-12-21 14:40:21.310 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:40:21 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:40:22.567 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52366
2025-12-21 14:40:22.568 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52369
2025-12-21 14:40:22.667 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 14:40:22.683 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:40:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:40:22.683 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 14:40:22.833 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52371
2025-12-21 14:40:22.834 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52374
2025-12-21 14:40:22.870 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:40:22.871 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 14:40:23.200 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 14:40:23.200 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 14:40:23.203 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:40:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:40:23.204 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 14:40:23.324 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52377
2025-12-21 14:40:23.326 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52380
2025-12-21 14:40:23.342 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:40:23.342 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 14:40:23.351 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 14:40:23.353 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 14:40:23.355 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:40:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:40:23.355 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 14:40:23.490 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52383
2025-12-21 14:40:23.491 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52386
2025-12-21 14:40:23.512 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 14:40:23.513 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 14:40:23.520 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 14:40:23.521 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:40:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:40:23.521 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 14:40:23.816 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52389
2025-12-21 14:40:23.818 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52392
2025-12-21 14:40:23.835 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:40:23.836 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:40:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:40:23.836 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 14:40:23.940 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52394
2025-12-21 14:40:23.942 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52397
2025-12-21 14:40:23.962 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 14:40:23.962 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 14:40:23.987 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 14:40:23.988 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 14:40:23.997 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 14:40:23.998 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:40:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:40:23.999 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 14:40:24.153 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52401
2025-12-21 14:40:24.154 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52404
2025-12-21 14:40:24.172 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:40:24.173 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:40:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:40:24.174 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 14:40:24.273 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52406
2025-12-21 14:40:24.274 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52409
2025-12-21 14:40:24.288 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:40:24.288 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:40:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:40:24.289 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 14:40:24.374 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52411
2025-12-21 14:40:24.376 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52414
2025-12-21 14:40:24.393 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:40:24.394 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:40:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:40:24.394 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 14:40:24.487 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52416
2025-12-21 14:40:24.488 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52419
2025-12-21 14:40:24.509 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 14:40:24.510 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 14:40:24.516 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 14:40:24.516 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 14:40:24.524 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 14:40:24.525 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:40:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:40:24.525 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 14:40:24.692 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52423
2025-12-21 14:40:24.695 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52426
2025-12-21 14:40:24.711 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 14:40:24.711 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 14:40:24.719 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 14:40:24.720 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:40:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:40:24.720 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 14:40:24.845 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52429
2025-12-21 14:40:24.847 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52432
2025-12-21 14:40:24.860 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 14:40:24.861 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:40:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:40:24.861 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 14:46:56.790 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in PREMIUM
2025-12-21 14:46:56.801 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: PREMIUM
2025-12-21 14:46:56.838 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 14:46:56 GMT] "POST /v1/points/quote HTTP/1.1" 400 111 "-" "PostmanRuntime/7.51.0"
2025-12-21 14:53:05.088 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5  in ECONOMY
2025-12-21 14:53:05.089 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid currency code
2025-12-21 14:53:05.092 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 14:53:05 GMT] "POST /v1/points/quote HTTP/1.1" 400 107 "-" "PostmanRuntime/7.51.0"
2025-12-21 14:54:03.769 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54324
2025-12-21 14:54:03.789 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54327
2025-12-21 14:54:05.723 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:54:05 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:54:06.863 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54329
2025-12-21 14:54:06.864 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54332
2025-12-21 14:54:06.951 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 14:54:06.965 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:54:06 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:54:06.966 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 14:54:07.088 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54334
2025-12-21 14:54:07.089 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54337
2025-12-21 14:54:07.125 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:54:07.126 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 14:54:07.429 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 14:54:07.430 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 14:54:07.435 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:54:07 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:54:07.435 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 14:54:07.528 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54340
2025-12-21 14:54:07.529 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54343
2025-12-21 14:54:07.547 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:54:07.547 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 14:54:07.554 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 14:54:07.556 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 14:54:07.557 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:54:07 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:54:07.558 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 14:54:07.677 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54346
2025-12-21 14:54:07.679 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54349
2025-12-21 14:54:07.693 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 14:54:07.694 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 14:54:07.696 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:54:07 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:54:07.820 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54351
2025-12-21 14:54:07.821 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54354
2025-12-21 14:54:07.837 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 14:54:07.837 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 14:54:07.845 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 14:54:07.846 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:54:07 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:54:07.847 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 14:54:08.166 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58233
2025-12-21 14:54:08.168 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58236
2025-12-21 14:54:08.181 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:54:08.182 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:54:08 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:54:08.182 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 14:54:08.273 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58238
2025-12-21 14:54:08.274 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58241
2025-12-21 14:54:08.288 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 XYZ in FIRST
2025-12-21 14:54:08.289 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate XYZ -> USD (attempt 1)
2025-12-21 14:54:08.320 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: XYZ -> USD = 1.0
2025-12-21 14:54:08.322 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:54:08 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:54:08.323 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 14:54:08.404 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58244
2025-12-21 14:54:08.406 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58247
2025-12-21 14:54:08.422 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 14:54:08.422 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 14:54:08.437 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 14:54:08.437 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 14:54:08.447 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 14:54:08.449 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:54:08 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:54:08.449 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 14:54:08.602 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58251
2025-12-21 14:54:08.604 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58254
2025-12-21 14:54:08.625 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:54:08.626 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:54:08 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:54:08.626 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 14:54:08.714 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58256
2025-12-21 14:54:08.716 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58259
2025-12-21 14:54:08.731 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:54:08.732 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:54:08 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:54:08.732 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 14:54:08.802 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58261
2025-12-21 14:54:08.803 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58264
2025-12-21 14:54:08.815 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 14:54:08.815 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:54:08 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:54:08.816 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 14:54:08.909 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58267
2025-12-21 14:54:08.911 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58270
2025-12-21 14:54:08.928 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 14:54:08.929 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 14:54:08.934 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 14:54:08.935 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 14:54:08.941 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 14:54:08.942 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:54:08 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:54:08.942 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 14:54:09.083 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63521
2025-12-21 14:54:09.084 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63524
2025-12-21 14:54:09.095 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 14:54:09.095 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 14:54:09.102 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 14:54:09.104 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:54:09 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:54:09.104 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 14:54:09.203 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63527
2025-12-21 14:54:09.204 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63530
2025-12-21 14:54:09.215 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 14:54:09.216 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 14:54:09 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 14:54:09.216 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 15:01:23.496 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50841
2025-12-21 15:01:23.507 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50844
2025-12-21 15:01:25.421 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:01:25 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:01:26.594 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50846
2025-12-21 15:01:26.596 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50849
2025-12-21 15:01:26.695 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 15:01:26.708 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:01:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:01:26.708 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 15:01:26.827 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50851
2025-12-21 15:01:26.828 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50854
2025-12-21 15:01:26.862 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:01:26.862 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 15:01:27.158 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 15:01:27.158 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 15:01:27.161 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:01:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:01:27.161 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:01:27.268 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50857
2025-12-21 15:01:27.270 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50860
2025-12-21 15:01:27.284 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:01:27.284 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 15:01:27.292 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 15:01:27.293 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 15:01:27.295 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:01:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:01:27.295 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:01:27.429 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50863
2025-12-21 15:01:27.430 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50866
2025-12-21 15:01:27.443 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 15:01:27.444 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 15:01:27.446 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:01:27 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:01:27.545 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50868
2025-12-21 15:01:27.546 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50871
2025-12-21 15:01:27.565 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 15:01:27.565 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 15:01:27.574 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 15:01:27.575 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:01:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:01:27.575 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 15:01:27.836 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50874
2025-12-21 15:01:27.839 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50877
2025-12-21 15:01:27.867 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:01:27.869 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:01:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:01:27.870 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:01:27.974 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50879
2025-12-21 15:01:27.975 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50882
2025-12-21 15:01:27.985 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 XYZ in FIRST
2025-12-21 15:01:27.985 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate XYZ -> USD (attempt 1)
2025-12-21 15:01:28.001 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: XYZ -> USD = 1.0
2025-12-21 15:01:28.002 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:01:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:01:28.002 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 15:01:28.096 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50885
2025-12-21 15:01:28.098 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50888
2025-12-21 15:01:28.110 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 15:01:28.110 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:01:28.121 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 15:01:28.121 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 15:01:28.127 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 15:01:28.128 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:01:28 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:01:28.128 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 15:01:28.262 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50892
2025-12-21 15:01:28.263 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50895
2025-12-21 15:01:28.277 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:01:28.278 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:01:28 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:01:28.279 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:01:28.369 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50897
2025-12-21 15:01:28.370 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50900
2025-12-21 15:01:28.381 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:01:28.382 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:01:28 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:01:28.382 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:01:28.443 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50902
2025-12-21 15:01:28.444 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50905
2025-12-21 15:01:28.458 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:01:28.458 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:01:28 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:01:28.459 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:01:28.543 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50907
2025-12-21 15:01:28.544 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50910
2025-12-21 15:01:28.563 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 15:01:28.564 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 15:01:28.571 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 15:01:28.571 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 15:01:28.579 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 15:01:28.580 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:01:28 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:01:28.580 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 15:01:28.720 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50914
2025-12-21 15:01:28.721 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50917
2025-12-21 15:01:28.733 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 15:01:28.733 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 15:01:28.739 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 15:01:28.740 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:01:28 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:01:28.740 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 15:01:28.830 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50920
2025-12-21 15:01:28.831 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50923
2025-12-21 15:01:28.842 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 15:01:28.843 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:01:28 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:01:28.843 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 15:03:41.001 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 ABC in ECONOMY
2025-12-21 15:03:41.003 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate ABC -> USD (attempt 1)
2025-12-21 15:03:41.900 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 15:03:41.901 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate ABC -> USD (attempt 2)
2025-12-21 15:03:41.919 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 15:03:41.919 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate ABC -> USD (attempt 3)
2025-12-21 15:03:41.927 [vert.x-eventloop-thread-1] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 15:03:41.938 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.PromiseImpl.onFailure(PromiseImpl.java:54)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:43)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:393)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:387)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:310)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$handleCreateRequest$6(HttpContext.java:493)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.lambda$emitFailure$1(FutureBase.java:75)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:305)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:181)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:72)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.http.impl.HttpClientImpl.lambda$doRequest$4(HttpClientImpl.java:398)
	at io.vertx.core.net.impl.pool.Endpoint.lambda$getConnection$0(Endpoint.java:52)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:162)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:123)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$ConnectFailed$1.run(SimpleConnectionPool.java:380)
	at io.vertx.core.net.impl.pool.Task.runNextTasks(Task.java:43)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:82)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:244)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.lambda$connect$2(SimpleConnectionPool.java:258)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint.lambda$connect$2(SharedClientHttpStreamEndpoint.java:104)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.NetClientImpl.failed(NetClientImpl.java:347)
	at io.vertx.core.net.impl.NetClientImpl.lambda$connectInternal2$6(NetClientImpl.java:319)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:157)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.fulfillConnectPromise(AbstractNioChannel.java:322)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:338)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 15:03:41.959 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 15:03:40 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 15:03:54.093 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 15:03:54.096 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 15:03:54.103 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 15:03:54 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "PostmanRuntime/7.51.0"
2025-12-21 15:04:01.234 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 45000.0 USD in BUSINESS
2025-12-21 15:04:01.242 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 15:04:01.256 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Connection refused: no further information: localhost/127.0.0.1:443
2025-12-21 15:04:01.258 [vert.x-eventloop-thread-1] INFO  c.a.l.s.PointsCalculationService - Points capped: 51750 -> 50000
2025-12-21 15:04:01.277 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 15:04:01 GMT] "POST /v1/points/quote HTTP/1.1" 200 130 "-" "PostmanRuntime/7.51.0"
2025-12-21 15:04:01.277 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 50000 total points
2025-12-21 15:04:10.002 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 ABC in ECONOMY
2025-12-21 15:04:10.002 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate ABC -> USD (attempt 1)
2025-12-21 15:04:10.005 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 15:04:10.006 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate ABC -> USD (attempt 2)
2025-12-21 15:04:10.008 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 15:04:10.009 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate ABC -> USD (attempt 3)
2025-12-21 15:04:10.012 [vert.x-eventloop-thread-1] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 15:04:10.013 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.PromiseImpl.onFailure(PromiseImpl.java:54)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:43)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:393)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:387)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:310)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$handleCreateRequest$6(HttpContext.java:493)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.lambda$emitFailure$1(FutureBase.java:75)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:305)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:181)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:72)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.http.impl.HttpClientImpl.lambda$doRequest$4(HttpClientImpl.java:398)
	at io.vertx.core.net.impl.pool.Endpoint.lambda$getConnection$0(Endpoint.java:52)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:162)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:123)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$ConnectFailed$1.run(SimpleConnectionPool.java:380)
	at io.vertx.core.net.impl.pool.Task.runNextTasks(Task.java:43)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:82)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:244)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.lambda$connect$2(SimpleConnectionPool.java:258)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint.lambda$connect$2(SharedClientHttpStreamEndpoint.java:104)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.NetClientImpl.failed(NetClientImpl.java:347)
	at io.vertx.core.net.impl.NetClientImpl.lambda$connectInternal2$6(NetClientImpl.java:319)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:157)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.fulfillConnectPromise(AbstractNioChannel.java:322)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:338)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 15:04:10.017 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 15:04:10 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 15:06:00.988 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 15:06:00.988 [vert.x-eventloop-thread-1] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 15:06:00.991 [vert.x-eventloop-thread-1] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: Connection refused: no further information: localhost/127.0.0.1:443
2025-12-21 15:06:00.993 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 15:06:00 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 15:06:00.994 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1419 total points
2025-12-21 15:06:12.609 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD1 in ECONOMY
2025-12-21 15:06:12.609 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid currency code
2025-12-21 15:06:12.610 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 15:06:12 GMT] "POST /v1/points/quote HTTP/1.1" 400 104 "-" "PostmanRuntime/7.51.0"
2025-12-21 15:08:02.085 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63099
2025-12-21 15:08:02.100 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63102
2025-12-21 15:08:04.113 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:08:04 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:08:05.301 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63269
2025-12-21 15:08:05.302 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63272
2025-12-21 15:08:05.400 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 15:08:05.416 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:08:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:08:05.417 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 15:08:05.547 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63275
2025-12-21 15:08:05.549 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63278
2025-12-21 15:08:05.587 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:08:05.587 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 15:08:05.884 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 15:08:05.885 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 15:08:05.886 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:08:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:08:05.886 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:08:05.989 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63854
2025-12-21 15:08:05.990 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63857
2025-12-21 15:08:06.005 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:08:06.005 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 15:08:06.012 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 15:08:06.013 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 15:08:06.014 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:08:06 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:08:06.015 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:08:06.127 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63860
2025-12-21 15:08:06.129 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63863
2025-12-21 15:08:06.145 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 15:08:06.145 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 15:08:06.147 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:08:06 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:08:06.240 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63865
2025-12-21 15:08:06.241 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63868
2025-12-21 15:08:06.254 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 15:08:06.254 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 15:08:06.261 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 15:08:06.262 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:08:06 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:08:06.262 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 15:08:06.517 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63871
2025-12-21 15:08:06.518 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63874
2025-12-21 15:08:06.531 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:08:06.532 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:08:06 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:08:06.532 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:08:06.626 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63876
2025-12-21 15:08:06.627 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63879
2025-12-21 15:08:06.641 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 15:08:06.641 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:08:06.665 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 15:08:06.666 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 15:08:06.676 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 15:08:06.677 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:08:06 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:08:06.677 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 15:08:06.828 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64419
2025-12-21 15:08:06.830 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64422
2025-12-21 15:08:06.844 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:08:06.845 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:08:06 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:08:06.845 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:08:06.937 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64424
2025-12-21 15:08:06.939 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64427
2025-12-21 15:08:06.957 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:08:06.958 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:08:06 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:08:06.959 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:08:07.042 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62010
2025-12-21 15:08:07.043 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62013
2025-12-21 15:08:07.062 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:08:07.063 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:08:07 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:08:07.064 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:08:07.155 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52220
2025-12-21 15:08:07.156 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52223
2025-12-21 15:08:07.174 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 15:08:07.174 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 15:08:07.183 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 15:08:07.184 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 15:08:07.190 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 15:08:07.191 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:08:07 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:08:07.192 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 15:08:07.334 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55995
2025-12-21 15:08:07.335 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55998
2025-12-21 15:08:07.347 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 15:08:07.347 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 15:08:07.354 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 15:08:07.355 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:08:07 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:08:07.355 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 15:08:07.481 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56001
2025-12-21 15:08:07.483 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56004
2025-12-21 15:08:07.494 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 15:08:07.495 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:08:07 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:08:07.496 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 15:14:19.317 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60352
2025-12-21 15:14:19.330 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60355
2025-12-21 15:14:22.291 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:14:22 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:14:23.775 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60357
2025-12-21 15:14:23.776 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60360
2025-12-21 15:14:23.867 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 15:14:23.884 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:14:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:14:23.885 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 15:14:24.050 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60362
2025-12-21 15:14:24.052 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60365
2025-12-21 15:14:24.084 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:14:24.085 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 15:14:24.391 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 15:14:24.392 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 15:14:24.393 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:14:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:14:24.394 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:14:24.500 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60368
2025-12-21 15:14:24.501 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60371
2025-12-21 15:14:24.515 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:14:24.516 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 15:14:24.522 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 15:14:24.524 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 15:14:24.525 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:14:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:14:24.525 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:14:24.634 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60374
2025-12-21 15:14:24.635 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60377
2025-12-21 15:14:24.649 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 15:14:24.650 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 15:14:24.651 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:14:24 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:14:24.747 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60379
2025-12-21 15:14:24.749 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60382
2025-12-21 15:14:24.761 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 15:14:24.762 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 15:14:24.769 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 15:14:24.771 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:14:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:14:24.771 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 15:14:25.041 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52378
2025-12-21 15:14:25.043 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52381
2025-12-21 15:14:25.055 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:14:25.057 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:14:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:14:25.057 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:14:25.157 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52383
2025-12-21 15:14:25.158 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52386
2025-12-21 15:14:25.169 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 XYZ in FIRST
2025-12-21 15:14:25.169 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate XYZ -> USD (attempt 1)
2025-12-21 15:14:25.190 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: XYZ -> USD = 1.0
2025-12-21 15:14:25.191 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:14:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:14:25.191 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 15:14:25.308 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52389
2025-12-21 15:14:25.309 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52392
2025-12-21 15:14:25.325 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 15:14:25.325 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:14:25.335 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 15:14:25.335 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 15:14:25.342 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 15:14:25.343 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:14:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:14:25.343 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 15:14:25.486 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52396
2025-12-21 15:14:25.487 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52399
2025-12-21 15:14:25.500 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:14:25.501 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:14:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:14:25.501 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:14:25.594 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52401
2025-12-21 15:14:25.595 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52404
2025-12-21 15:14:25.610 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:14:25.611 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:14:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:14:25.611 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:14:25.695 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52406
2025-12-21 15:14:25.696 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52409
2025-12-21 15:14:25.707 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:14:25.708 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:14:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:14:25.708 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:14:25.807 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52411
2025-12-21 15:14:25.808 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52414
2025-12-21 15:14:25.822 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 15:14:25.822 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 15:14:25.831 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 15:14:25.831 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 15:14:25.838 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 15:14:25.839 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:14:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:14:25.839 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 15:14:25.973 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52418
2025-12-21 15:14:25.974 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52421
2025-12-21 15:14:25.987 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 15:14:25.987 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 15:14:25.994 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 15:14:25.995 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:14:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:14:25.995 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 15:14:26.097 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52424
2025-12-21 15:14:26.098 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52427
2025-12-21 15:14:26.110 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 15:14:26.111 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:14:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:14:26.111 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 15:15:14.962 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 XYZ in ECONOMY
2025-12-21 15:15:14.963 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate XYZ -> USD (attempt 1)
2025-12-21 15:15:14.969 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 15:15:14.970 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate XYZ -> USD (attempt 2)
2025-12-21 15:15:14.976 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 15:15:14.977 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate XYZ -> USD (attempt 3)
2025-12-21 15:15:14.983 [vert.x-eventloop-thread-1] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 15:15:14.983 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.PromiseImpl.onFailure(PromiseImpl.java:54)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:43)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:393)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:387)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:310)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$handleCreateRequest$6(HttpContext.java:493)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.lambda$emitFailure$1(FutureBase.java:75)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:305)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:181)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:72)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.http.impl.HttpClientImpl.lambda$doRequest$4(HttpClientImpl.java:398)
	at io.vertx.core.net.impl.pool.Endpoint.lambda$getConnection$0(Endpoint.java:52)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:162)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:123)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$ConnectFailed$1.run(SimpleConnectionPool.java:380)
	at io.vertx.core.net.impl.pool.Task.runNextTasks(Task.java:43)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:82)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:244)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.lambda$connect$2(SimpleConnectionPool.java:258)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint.lambda$connect$2(SharedClientHttpStreamEndpoint.java:104)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.NetClientImpl.failed(NetClientImpl.java:347)
	at io.vertx.core.net.impl.NetClientImpl.lambda$connectInternal2$6(NetClientImpl.java:319)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:157)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.fulfillConnectPromise(AbstractNioChannel.java:322)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:338)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 15:15:14.987 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 15:15:14 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 15:16:35.054 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49398
2025-12-21 15:16:35.064 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49401
2025-12-21 15:16:37.109 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:16:37 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:16:38.321 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64048
2025-12-21 15:16:38.323 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64051
2025-12-21 15:16:38.410 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 15:16:38.433 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:16:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:16:38.433 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 15:16:38.571 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64053
2025-12-21 15:16:38.573 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64056
2025-12-21 15:16:38.610 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:16:38.610 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 15:16:38.980 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 15:16:38.980 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 15:16:38.982 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:16:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:16:38.982 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:16:39.085 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64059
2025-12-21 15:16:39.086 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64062
2025-12-21 15:16:39.099 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:16:39.099 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 15:16:39.105 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 15:16:39.107 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 15:16:39.108 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:16:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:16:39.109 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:16:39.229 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64065
2025-12-21 15:16:39.231 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64068
2025-12-21 15:16:39.245 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 15:16:39.245 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 15:16:39.247 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:16:39 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:16:39.334 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64070
2025-12-21 15:16:39.335 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64073
2025-12-21 15:16:39.348 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 15:16:39.349 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 15:16:39.355 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 15:16:39.356 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:16:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:16:39.356 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 15:16:39.567 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64076
2025-12-21 15:16:39.569 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64079
2025-12-21 15:16:39.581 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:16:39.582 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:16:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:16:39.582 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:16:39.668 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64081
2025-12-21 15:16:39.669 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64084
2025-12-21 15:16:39.684 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 XYZ in FIRST
2025-12-21 15:16:39.684 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate XYZ -> USD (attempt 1)
2025-12-21 15:16:39.700 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: XYZ -> USD = 1.0
2025-12-21 15:16:39.702 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:16:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:16:39.702 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 15:16:39.788 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64087
2025-12-21 15:16:39.789 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64090
2025-12-21 15:16:39.802 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 15:16:39.802 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:16:39.811 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 15:16:39.811 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 15:16:39.817 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 15:16:39.818 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:16:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:16:39.818 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 15:16:39.944 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64094
2025-12-21 15:16:39.945 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64097
2025-12-21 15:16:39.959 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:16:39.960 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:16:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:16:39.960 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:16:40.059 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64099
2025-12-21 15:16:40.060 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64102
2025-12-21 15:16:40.073 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:16:40.074 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:16:40 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:16:40.074 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:16:40.148 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64104
2025-12-21 15:16:40.149 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64107
2025-12-21 15:16:40.167 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:16:40.169 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:16:40 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:16:40.169 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:16:40.300 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64109
2025-12-21 15:16:40.301 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64112
2025-12-21 15:16:40.315 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 15:16:40.315 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 15:16:40.321 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 15:16:40.321 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 15:16:40.326 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 15:16:40.327 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:16:40 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:16:40.327 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 15:16:40.449 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64116
2025-12-21 15:16:40.450 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64119
2025-12-21 15:16:40.462 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 15:16:40.463 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 15:16:40.469 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 15:16:40.471 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:16:40 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:16:40.471 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 15:16:40.569 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64122
2025-12-21 15:16:40.571 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64125
2025-12-21 15:16:40.588 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 15:16:40.589 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:16:40 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:16:40.589 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 15:23:21.412 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59573
2025-12-21 15:23:21.427 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59576
2025-12-21 15:23:23.363 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:23:23 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:23:24.589 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59578
2025-12-21 15:23:24.591 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59581
2025-12-21 15:23:24.690 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 15:23:24.701 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:23:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:23:24.702 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 15:23:24.815 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59583
2025-12-21 15:23:24.816 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59586
2025-12-21 15:23:24.852 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:23:24.852 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 15:23:25.223 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 15:23:25.223 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 15:23:25.225 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:23:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:23:25.226 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:23:25.340 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59589
2025-12-21 15:23:25.341 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59592
2025-12-21 15:23:25.358 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:23:25.359 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 15:23:25.366 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 15:23:25.368 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 15:23:25.369 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:23:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:23:25.369 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:23:25.484 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59595
2025-12-21 15:23:25.486 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59598
2025-12-21 15:23:25.502 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 15:23:25.503 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 15:23:25.504 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:23:25 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:23:25.605 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59600
2025-12-21 15:23:25.606 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59603
2025-12-21 15:23:25.623 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 15:23:25.624 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 15:23:25.631 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 15:23:25.632 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:23:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:23:25.632 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 15:23:25.910 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59606
2025-12-21 15:23:25.911 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59609
2025-12-21 15:23:25.923 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 15:23:25.923 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:23:25.939 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 15:23:25.940 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 15:23:25.948 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 15:23:25.948 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 15:23:25.953 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 15:23:25.956 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 15:23:25.959 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:23:25 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:23:26.068 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59612
2025-12-21 15:23:26.070 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59615
2025-12-21 15:23:26.080 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:23:26.081 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:23:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:23:26.081 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:23:26.177 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59617
2025-12-21 15:23:26.178 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59620
2025-12-21 15:23:26.190 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 15:23:26.190 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:23:26.203 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 15:23:26.203 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 15:23:26.208 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 15:23:26.209 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:23:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:23:26.209 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 15:23:26.346 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59624
2025-12-21 15:23:26.348 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59627
2025-12-21 15:23:26.361 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:23:26.362 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:23:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:23:26.362 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:23:26.451 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59629
2025-12-21 15:23:26.452 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59632
2025-12-21 15:23:26.464 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:23:26.465 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:23:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:23:26.465 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:23:26.529 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59634
2025-12-21 15:23:26.530 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59637
2025-12-21 15:23:26.542 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:23:26.543 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:23:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:23:26.543 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:23:26.620 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59639
2025-12-21 15:23:26.622 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59642
2025-12-21 15:23:26.634 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 15:23:26.634 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 15:23:26.640 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 15:23:26.641 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 15:23:26.646 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 15:23:26.647 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:23:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:23:26.648 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 15:23:26.775 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59646
2025-12-21 15:23:26.777 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59649
2025-12-21 15:23:26.794 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 15:23:26.794 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 15:23:26.801 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 15:23:26.802 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:23:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:23:26.802 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 15:23:26.903 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59652
2025-12-21 15:23:26.905 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59655
2025-12-21 15:23:26.917 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 15:23:26.918 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:23:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:23:26.918 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 15:25:52.875 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51340
2025-12-21 15:25:52.889 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51343
2025-12-21 15:25:54.767 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:25:54 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:25:55.871 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58656
2025-12-21 15:25:55.873 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58659
2025-12-21 15:25:55.995 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 15:25:56.008 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:25:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:25:56.008 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 15:25:56.126 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58661
2025-12-21 15:25:56.127 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58664
2025-12-21 15:25:56.161 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:25:56.162 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 15:25:56.458 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 15:25:56.459 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 15:25:56.461 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:25:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:25:56.461 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:25:56.566 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58667
2025-12-21 15:25:56.568 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58670
2025-12-21 15:25:56.581 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:25:56.581 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 15:25:56.588 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 15:25:56.590 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 15:25:56.592 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:25:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:25:56.592 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:25:56.711 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58673
2025-12-21 15:25:56.713 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58676
2025-12-21 15:25:56.728 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 15:25:56.729 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 15:25:56.731 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:25:56 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:25:56.823 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58678
2025-12-21 15:25:56.824 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58681
2025-12-21 15:25:56.839 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 15:25:56.839 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 15:25:56.846 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 15:25:56.847 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:25:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:25:56.848 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 15:25:57.103 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58684
2025-12-21 15:25:57.104 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58687
2025-12-21 15:25:57.116 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 15:25:57.117 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:25:57.129 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 15:25:57.129 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 15:25:57.134 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 15:25:57.135 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 15:25:57.139 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 15:25:57.145 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 15:25:57.148 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:25:57 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:25:57.278 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58690
2025-12-21 15:25:57.280 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58693
2025-12-21 15:25:57.292 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:25:57.293 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:25:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:25:57.293 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:25:57.391 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58695
2025-12-21 15:25:57.392 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58698
2025-12-21 15:25:57.407 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 15:25:57.407 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:25:57.421 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 15:25:57.421 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 15:25:57.429 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 15:25:57.430 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:25:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:25:57.430 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 15:25:57.609 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58702
2025-12-21 15:25:57.610 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58705
2025-12-21 15:25:57.627 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:25:57.628 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:25:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:25:57.628 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:25:57.730 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58707
2025-12-21 15:25:57.731 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58710
2025-12-21 15:25:57.743 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:25:57.744 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:25:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:25:57.744 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:25:57.810 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58712
2025-12-21 15:25:57.811 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58715
2025-12-21 15:25:57.825 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:25:57.827 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:25:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:25:57.828 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:25:57.912 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58717
2025-12-21 15:25:57.913 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58720
2025-12-21 15:25:57.927 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 15:25:57.927 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 15:25:57.936 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 15:25:57.936 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 15:25:57.942 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 15:25:57.943 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:25:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:25:57.943 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 15:25:58.080 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58724
2025-12-21 15:25:58.081 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58727
2025-12-21 15:25:58.092 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 15:25:58.092 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 15:25:58.098 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 15:25:58.099 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:25:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:25:58.099 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 15:25:58.185 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58730
2025-12-21 15:25:58.186 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58733
2025-12-21 15:25:58.197 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 15:25:58.199 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:25:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:25:58.199 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 15:29:13.764 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in PREMIUM
2025-12-21 15:29:13.765 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: PREMIUM
2025-12-21 15:29:13.766 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 15:29:13 GMT] "POST /v1/points/quote HTTP/1.1" 400 114 "-" "PostmanRuntime/7.51.0"
2025-12-21 15:32:41.492 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59826
2025-12-21 15:32:41.507 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59829
2025-12-21 15:32:43.421 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:32:43 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:32:44.718 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59831
2025-12-21 15:32:44.719 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59834
2025-12-21 15:32:44.809 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 15:32:44.832 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:32:44 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:32:44.832 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 15:32:44.973 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59836
2025-12-21 15:32:44.974 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59839
2025-12-21 15:32:45.013 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:32:45.013 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 15:32:45.331 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 15:32:45.331 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 15:32:45.333 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:32:45 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:32:45.333 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:32:45.449 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59842
2025-12-21 15:32:45.451 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59845
2025-12-21 15:32:45.468 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:32:45.469 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 15:32:45.476 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 15:32:45.479 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 15:32:45.481 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:32:45 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:32:45.481 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:32:45.586 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59848
2025-12-21 15:32:45.587 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59851
2025-12-21 15:32:45.600 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 15:32:45.601 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 15:32:45.603 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:32:45 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:32:45.697 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59853
2025-12-21 15:32:45.699 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59856
2025-12-21 15:32:45.717 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 15:32:45.717 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 15:32:45.726 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 15:32:45.729 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:32:45 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:32:45.729 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 15:32:46.029 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59859
2025-12-21 15:32:46.031 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59862
2025-12-21 15:32:46.044 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 15:32:46.044 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:32:46.058 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 15:32:46.058 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 15:32:46.064 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 15:32:46.064 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 15:32:46.069 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 15:32:46.073 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 15:32:46.076 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:32:46 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:32:46.195 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59865
2025-12-21 15:32:46.196 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59868
2025-12-21 15:32:46.208 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:32:46.209 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:32:46 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:32:46.209 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:32:46.317 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59871
2025-12-21 15:32:46.319 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59874
2025-12-21 15:32:46.333 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 15:32:46.333 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:32:46.349 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 15:32:46.350 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 15:32:46.357 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 15:32:46.358 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:32:46 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:32:46.359 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 15:32:46.512 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59878
2025-12-21 15:32:46.513 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59881
2025-12-21 15:32:46.531 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:32:46.532 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:32:46 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:32:46.533 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:32:46.625 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59883
2025-12-21 15:32:46.627 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59886
2025-12-21 15:32:46.639 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:32:46.640 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:32:46 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:32:46.640 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:32:46.750 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59889
2025-12-21 15:32:46.752 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59892
2025-12-21 15:32:46.768 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:32:46.769 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:32:46 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:32:46.769 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:32:46.846 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59894
2025-12-21 15:32:46.847 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59897
2025-12-21 15:32:46.860 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 15:32:46.860 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 15:32:46.866 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 15:32:46.866 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 15:32:46.874 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 15:32:46.876 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:32:46 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:32:46.876 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 15:32:47.034 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59901
2025-12-21 15:32:47.036 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59904
2025-12-21 15:32:47.056 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 15:32:47.056 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 15:32:47.066 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 15:32:47.068 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:32:47 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:32:47.068 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 15:32:47.226 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59907
2025-12-21 15:32:47.227 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59910
2025-12-21 15:32:47.247 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 15:32:47.249 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:32:47 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:32:47.249 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 15:37:47.703 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63568
2025-12-21 15:37:47.713 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63571
2025-12-21 15:37:49.626 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:37:49 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:37:50.895 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63573
2025-12-21 15:37:50.896 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63576
2025-12-21 15:37:50.995 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 15:37:51.007 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:37:50 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:37:51.007 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 15:37:51.136 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63578
2025-12-21 15:37:51.138 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63581
2025-12-21 15:37:51.173 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:37:51.173 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 15:37:51.487 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 15:37:51.488 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 15:37:51.490 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:37:51 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:37:51.490 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:37:51.588 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63584
2025-12-21 15:37:51.589 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63587
2025-12-21 15:37:51.607 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:37:51.608 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 15:37:51.614 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 15:37:51.616 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 15:37:51.618 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:37:51 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:37:51.618 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:37:51.738 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63590
2025-12-21 15:37:51.739 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63593
2025-12-21 15:37:51.753 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 15:37:51.754 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 15:37:51.756 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:37:51 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:37:51.848 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63595
2025-12-21 15:37:51.849 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63598
2025-12-21 15:37:51.862 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 15:37:51.862 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 15:37:51.869 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 15:37:51.870 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:37:51 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:37:51.870 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 15:37:52.117 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63601
2025-12-21 15:37:52.119 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63604
2025-12-21 15:37:52.134 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 15:37:52.134 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:37:52.151 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 15:37:52.152 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 15:37:52.159 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 15:37:52.159 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 15:37:52.165 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 15:37:52.171 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 15:37:52.177 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:37:52 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:37:52.295 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63607
2025-12-21 15:37:52.296 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63610
2025-12-21 15:37:52.308 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:37:52.309 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:37:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:37:52.309 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:37:52.400 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63612
2025-12-21 15:37:52.401 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63615
2025-12-21 15:37:52.413 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 15:37:52.414 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:37:52.425 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 15:37:52.426 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 15:37:52.430 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 15:37:52.431 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:37:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:37:52.432 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 15:37:52.568 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63619
2025-12-21 15:37:52.570 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63622
2025-12-21 15:37:52.591 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:37:52.592 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:37:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:37:52.593 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:37:52.696 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63624
2025-12-21 15:37:52.698 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63627
2025-12-21 15:37:52.714 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:37:52.715 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:37:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:37:52.715 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:37:52.778 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63629
2025-12-21 15:37:52.779 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63632
2025-12-21 15:37:52.793 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:37:52.794 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:37:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:37:52.794 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:37:52.873 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63634
2025-12-21 15:37:52.876 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63637
2025-12-21 15:37:52.889 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 15:37:52.889 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 15:37:52.896 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 15:37:52.896 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 15:37:52.904 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 15:37:52.905 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:37:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:37:52.906 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 15:37:53.052 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63641
2025-12-21 15:37:53.053 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63644
2025-12-21 15:37:53.064 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 15:37:53.065 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 15:37:53.070 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 15:37:53.071 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:37:53 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:37:53.071 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 15:37:53.157 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63647
2025-12-21 15:37:53.159 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63650
2025-12-21 15:37:53.170 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 15:37:53.171 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:37:53 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:37:53.171 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 15:38:53.547 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61223
2025-12-21 15:38:53.557 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61226
2025-12-21 15:38:55.468 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:38:55 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:38:56.718 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61228
2025-12-21 15:38:56.719 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61231
2025-12-21 15:38:56.842 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 15:38:56.860 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:38:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:38:56.861 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 15:38:56.999 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61233
2025-12-21 15:38:57.001 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61236
2025-12-21 15:38:57.041 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:38:57.042 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 15:38:57.363 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 15:38:57.363 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 15:38:57.365 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:38:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:38:57.367 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:38:57.476 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61239
2025-12-21 15:38:57.477 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61242
2025-12-21 15:38:57.490 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:38:57.491 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 15:38:57.497 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 15:38:57.498 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 15:38:57.499 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:38:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:38:57.499 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:38:57.608 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61245
2025-12-21 15:38:57.609 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61248
2025-12-21 15:38:57.625 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 15:38:57.626 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 15:38:57.628 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:38:57 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:38:57.725 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61250
2025-12-21 15:38:57.726 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61253
2025-12-21 15:38:57.739 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 15:38:57.740 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 15:38:57.746 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 15:38:57.747 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:38:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:38:57.747 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 15:38:57.999 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61256
2025-12-21 15:38:58.000 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61259
2025-12-21 15:38:58.014 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 15:38:58.014 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:38:58.033 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 15:38:58.033 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 15:38:58.039 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 15:38:58.040 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 15:38:58.045 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 15:38:58.048 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 15:38:58.051 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:38:58 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:38:58.146 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61262
2025-12-21 15:38:58.147 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61265
2025-12-21 15:38:58.161 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:38:58.162 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:38:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:38:58.163 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:38:58.266 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61267
2025-12-21 15:38:58.267 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61270
2025-12-21 15:38:58.288 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 15:38:58.288 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:38:58.301 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 15:38:58.301 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 15:38:58.309 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 15:38:58.311 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:38:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:38:58.312 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 15:38:58.449 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61274
2025-12-21 15:38:58.450 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61277
2025-12-21 15:38:58.464 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:38:58.465 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:38:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:38:58.465 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:38:58.550 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61279
2025-12-21 15:38:58.551 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61282
2025-12-21 15:38:58.562 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:38:58.563 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:38:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:38:58.563 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:38:58.631 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61284
2025-12-21 15:38:58.632 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61287
2025-12-21 15:38:58.643 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:38:58.643 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:38:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:38:58.644 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:38:58.718 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61289
2025-12-21 15:38:58.721 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61292
2025-12-21 15:38:58.736 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 15:38:58.737 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 15:38:58.746 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 15:38:58.746 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 15:38:58.752 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 15:38:58.753 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:38:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:38:58.753 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 15:38:58.893 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61296
2025-12-21 15:38:58.894 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61299
2025-12-21 15:38:58.905 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 15:38:58.905 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 15:38:58.912 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 15:38:58.913 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:38:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:38:58.913 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 15:38:59.004 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61302
2025-12-21 15:38:59.005 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61305
2025-12-21 15:38:59.021 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 15:38:59.023 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:38:59 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:38:59.023 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 15:42:28.849 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:65074
2025-12-21 15:42:28.857 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 65077
2025-12-21 15:42:30.965 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:42:30 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:42:32.259 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64186
2025-12-21 15:42:32.261 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64189
2025-12-21 15:42:32.347 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 15:42:32.371 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:42:32 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:42:32.372 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 15:42:32.511 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64191
2025-12-21 15:42:32.512 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64194
2025-12-21 15:42:32.551 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:42:32.551 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 15:42:32.896 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 15:42:32.897 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 15:42:32.899 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:42:32 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:42:32.899 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:42:33.000 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64197
2025-12-21 15:42:33.002 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64200
2025-12-21 15:42:33.017 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:42:33.017 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 15:42:33.026 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 15:42:33.029 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 15:42:33.031 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:42:33 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:42:33.031 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:42:33.155 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64203
2025-12-21 15:42:33.156 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64206
2025-12-21 15:42:33.169 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 15:42:33.169 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 15:42:33.171 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:42:33 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:42:33.269 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64208
2025-12-21 15:42:33.270 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64211
2025-12-21 15:42:33.283 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 15:42:33.283 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 15:42:33.289 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 15:42:33.290 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:42:33 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:42:33.290 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 15:42:33.568 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64214
2025-12-21 15:42:33.570 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64217
2025-12-21 15:42:33.585 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 15:42:33.586 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:42:33.600 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.0
2025-12-21 15:42:33.601 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:42:33 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:42:33.602 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:42:33.711 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64220
2025-12-21 15:42:33.712 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64223
2025-12-21 15:42:33.726 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:42:33.727 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:42:33 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:42:33.727 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:42:33.823 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64225
2025-12-21 15:42:33.824 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64228
2025-12-21 15:42:33.842 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 15:42:33.842 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:42:33.851 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 15:42:33.851 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 15:42:33.857 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 15:42:33.858 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:42:33 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:42:33.858 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 15:42:33.985 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64232
2025-12-21 15:42:33.986 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64235
2025-12-21 15:42:33.999 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:42:34.000 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:42:33 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:42:34.000 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:42:34.084 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64237
2025-12-21 15:42:34.085 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64240
2025-12-21 15:42:34.097 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:42:34.099 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:42:34 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:42:34.099 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:42:34.160 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64242
2025-12-21 15:42:34.162 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64245
2025-12-21 15:42:34.173 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:42:34.174 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:42:34 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:42:34.174 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:42:34.260 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64247
2025-12-21 15:42:34.262 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64250
2025-12-21 15:42:34.279 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 15:42:34.279 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 15:42:34.286 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 15:42:34.286 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 15:42:34.292 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 15:42:34.294 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:42:34 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:42:34.294 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 15:42:34.412 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64254
2025-12-21 15:42:34.413 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64257
2025-12-21 15:42:34.425 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 15:42:34.425 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 15:42:34.433 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 15:42:34.434 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:42:34 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:42:34.434 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 15:42:34.547 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64260
2025-12-21 15:42:34.549 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64263
2025-12-21 15:42:34.568 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 15:42:34.569 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:42:34 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:42:34.569 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 15:43:51.306 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57624
2025-12-21 15:43:51.326 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57627
2025-12-21 15:43:53.406 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:43:53 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:43:54.619 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57629
2025-12-21 15:43:54.620 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57632
2025-12-21 15:43:54.712 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 15:43:54.724 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:43:54 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:43:54.725 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 15:43:54.856 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57634
2025-12-21 15:43:54.857 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57637
2025-12-21 15:43:54.896 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:43:54.896 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 15:43:55.226 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 15:43:55.226 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 15:43:55.228 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:43:54 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:43:55.228 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:43:55.334 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57640
2025-12-21 15:43:55.335 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57643
2025-12-21 15:43:55.353 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:43:55.354 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 15:43:55.360 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 15:43:55.363 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 15:43:55.363 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:43:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:43:55.363 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:43:55.475 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57646
2025-12-21 15:43:55.476 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57649
2025-12-21 15:43:55.492 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 15:43:55.493 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 15:43:55.495 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:43:55 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:43:55.598 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57651
2025-12-21 15:43:55.600 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57654
2025-12-21 15:43:55.615 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 15:43:55.615 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 15:43:55.621 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 15:43:55.622 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:43:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:43:55.622 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 15:43:55.862 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57657
2025-12-21 15:43:55.863 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57660
2025-12-21 15:43:55.876 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 15:43:55.877 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:43:55.899 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.0
2025-12-21 15:43:55.901 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:43:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:43:55.902 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:43:56.022 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57663
2025-12-21 15:43:56.023 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57666
2025-12-21 15:43:56.034 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:43:56.034 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:43:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:43:56.035 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:43:56.142 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57668
2025-12-21 15:43:56.145 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57671
2025-12-21 15:43:56.164 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 15:43:56.164 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:43:56.180 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 15:43:56.181 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 15:43:56.188 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 15:43:56.189 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:43:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:43:56.190 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 15:43:56.342 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57675
2025-12-21 15:43:56.343 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57678
2025-12-21 15:43:56.360 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:43:56.361 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:43:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:43:56.361 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:43:56.479 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57680
2025-12-21 15:43:56.480 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57683
2025-12-21 15:43:56.500 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:43:56.501 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:43:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:43:56.502 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:43:56.580 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57685
2025-12-21 15:43:56.581 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57688
2025-12-21 15:43:56.595 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:43:56.596 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:43:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:43:56.596 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:43:56.702 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57690
2025-12-21 15:43:56.704 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57693
2025-12-21 15:43:56.717 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 15:43:56.718 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 15:43:56.725 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 15:43:56.725 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 15:43:56.732 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 15:43:56.734 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:43:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:43:56.734 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 15:43:56.853 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57697
2025-12-21 15:43:56.855 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57700
2025-12-21 15:43:56.866 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 15:43:56.866 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 15:43:56.873 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 15:43:56.874 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:43:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:43:56.874 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 15:43:56.978 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57703
2025-12-21 15:43:56.979 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57706
2025-12-21 15:43:56.992 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 15:43:56.993 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:43:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:43:56.993 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 15:48:39.985 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.0 EUR in BUSINESS
2025-12-21 15:48:39.986 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:48:39.990 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 15:48:39.991 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 15:48:39.995 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 15:48:39.995 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 15:48:39.999 [vert.x-eventloop-thread-1] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 15:48:40.001 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.PromiseImpl.onFailure(PromiseImpl.java:54)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:43)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:393)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:387)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:310)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$handleCreateRequest$6(HttpContext.java:493)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.lambda$emitFailure$1(FutureBase.java:75)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:305)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:181)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:72)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.http.impl.HttpClientImpl.lambda$doRequest$4(HttpClientImpl.java:398)
	at io.vertx.core.net.impl.pool.Endpoint.lambda$getConnection$0(Endpoint.java:52)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:162)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:123)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$ConnectFailed$1.run(SimpleConnectionPool.java:380)
	at io.vertx.core.net.impl.pool.Task.runNextTasks(Task.java:43)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:82)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:244)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.lambda$connect$2(SimpleConnectionPool.java:258)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint.lambda$connect$2(SharedClientHttpStreamEndpoint.java:104)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.NetClientImpl.failed(NetClientImpl.java:347)
	at io.vertx.core.net.impl.NetClientImpl.lambda$connectInternal2$6(NetClientImpl.java:319)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:157)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.fulfillConnectPromise(AbstractNioChannel.java:322)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:338)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 15:48:40.006 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 15:48:39 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 15:49:51.577 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
io.vertx.core.json.DecodeException: Failed to decode:Unexpected character ('}' (code 125)): expected a value
 at [Source: (io.netty.buffer.ByteBufInputStream); line: 7, column: 2]
	at io.vertx.core.json.jackson.DatabindCodec.fromParser(DatabindCodec.java:129)
	at io.vertx.core.json.jackson.DatabindCodec.fromBuffer(DatabindCodec.java:99)
	at io.vertx.core.json.Json.decodeValue(Json.java:119)
	at io.vertx.core.json.Json.decodeValue(Json.java:107)
	at io.vertx.ext.web.impl.RequestBodyImpl.asJsonObject(RequestBodyImpl.java:97)
	at io.vertx.ext.web.RequestBody.asJsonObject(RequestBody.java:73)
	at com.airline.loyalty.handler.PointsQuoteHandler.handle(PointsQuoteHandler.java:45)
	at com.airline.loyalty.handler.PointsQuoteHandler.handle(PointsQuoteHandler.java:18)
	at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1285)
	at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177)
	at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:143)
	at com.airline.loyalty.MainVerticle.lambda$createMainRouter$2(MainVerticle.java:80)
	at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1285)
	at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177)
	at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:143)
	at io.vertx.ext.web.handler.impl.TimeoutHandlerImpl.handle(TimeoutHandlerImpl.java:49)
	at io.vertx.ext.web.handler.impl.TimeoutHandlerImpl.handle(TimeoutHandlerImpl.java:27)
	at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1285)
	at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177)
	at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:143)
	at io.vertx.ext.web.handler.impl.BodyHandlerImpl$BHandler.doEnd(BodyHandlerImpl.java:359)
	at io.vertx.ext.web.handler.impl.BodyHandlerImpl$BHandler.end(BodyHandlerImpl.java:336)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.http.impl.HttpEventHandler.handleEnd(HttpEventHandler.java:76)
	at io.vertx.core.http.impl.Http1xServerRequest.onEnd(Http1xServerRequest.java:595)
	at io.vertx.core.http.impl.Http1xServerRequest.lambda$pendingQueue$1(Http1xServerRequest.java:133)
	at io.vertx.core.streams.impl.InboundBuffer.handleEvent(InboundBuffer.java:255)
	at io.vertx.core.streams.impl.InboundBuffer.write(InboundBuffer.java:134)
	at io.vertx.core.http.impl.Http1xServerRequest.handleEnd(Http1xServerRequest.java:576)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:320)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:171)
	at io.vertx.core.http.impl.Http1xServerConnection.onEnd(Http1xServerConnection.java:221)
	at io.vertx.core.http.impl.Http1xServerConnection.onContent(Http1xServerConnection.java:209)
	at io.vertx.core.http.impl.Http1xServerConnection.handleOther(Http1xServerConnection.java:189)
	at io.vertx.core.http.impl.Http1xServerConnection.handleMessage(Http1xServerConnection.java:176)
	at io.vertx.core.net.impl.ConnectionBase.read(ConnectionBase.java:159)
	at io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:153)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:93)
	at io.netty.handler.codec.http.websocketx.extensions.WebSocketServerExtensionHandler.channelRead(WebSocketServerExtensionHandler.java:88)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.vertx.core.http.impl.Http1xOrH2CHandler.end(Http1xOrH2CHandler.java:61)
	at io.vertx.core.http.impl.Http1xOrH2CHandler.channelRead(Http1xOrH2CHandler.java:38)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: com.fasterxml.jackson.core.JsonParseException: Unexpected character ('}' (code 125)): expected a value
 at [Source: (io.netty.buffer.ByteBufInputStream); line: 7, column: 2]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:750)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportUnexpectedChar(ParserMinimalBase.java:674)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser._handleUnexpectedValue(UTF8StreamJsonParser.java:2757)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser.nextFieldName(UTF8StreamJsonParser.java:1139)
	at com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR._deserializeNR(UntypedObjectDeserializerNR.java:230)
	at com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserialize(UntypedObjectDeserializerNR.java:70)
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:342)
	at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:4875)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3033)
	at io.vertx.core.json.jackson.DatabindCodec.fromParser(DatabindCodec.java:126)
	... 68 common frames omitted
2025-12-21 15:49:51.579 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 15:49:51 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 15:49:53.553 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
io.vertx.core.json.DecodeException: Failed to decode:Unexpected character ('}' (code 125)): expected a value
 at [Source: (io.netty.buffer.ByteBufInputStream); line: 7, column: 2]
	at io.vertx.core.json.jackson.DatabindCodec.fromParser(DatabindCodec.java:129)
	at io.vertx.core.json.jackson.DatabindCodec.fromBuffer(DatabindCodec.java:99)
	at io.vertx.core.json.Json.decodeValue(Json.java:119)
	at io.vertx.core.json.Json.decodeValue(Json.java:107)
	at io.vertx.ext.web.impl.RequestBodyImpl.asJsonObject(RequestBodyImpl.java:97)
	at io.vertx.ext.web.RequestBody.asJsonObject(RequestBody.java:73)
	at com.airline.loyalty.handler.PointsQuoteHandler.handle(PointsQuoteHandler.java:45)
	at com.airline.loyalty.handler.PointsQuoteHandler.handle(PointsQuoteHandler.java:18)
	at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1285)
	at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177)
	at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:143)
	at com.airline.loyalty.MainVerticle.lambda$createMainRouter$2(MainVerticle.java:80)
	at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1285)
	at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177)
	at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:143)
	at io.vertx.ext.web.handler.impl.TimeoutHandlerImpl.handle(TimeoutHandlerImpl.java:49)
	at io.vertx.ext.web.handler.impl.TimeoutHandlerImpl.handle(TimeoutHandlerImpl.java:27)
	at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1285)
	at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177)
	at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:143)
	at io.vertx.ext.web.handler.impl.BodyHandlerImpl$BHandler.doEnd(BodyHandlerImpl.java:359)
	at io.vertx.ext.web.handler.impl.BodyHandlerImpl$BHandler.end(BodyHandlerImpl.java:336)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.http.impl.HttpEventHandler.handleEnd(HttpEventHandler.java:76)
	at io.vertx.core.http.impl.Http1xServerRequest.onEnd(Http1xServerRequest.java:595)
	at io.vertx.core.http.impl.Http1xServerRequest.lambda$pendingQueue$1(Http1xServerRequest.java:133)
	at io.vertx.core.streams.impl.InboundBuffer.handleEvent(InboundBuffer.java:255)
	at io.vertx.core.streams.impl.InboundBuffer.write(InboundBuffer.java:134)
	at io.vertx.core.http.impl.Http1xServerRequest.handleEnd(Http1xServerRequest.java:576)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:320)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:171)
	at io.vertx.core.http.impl.Http1xServerConnection.onEnd(Http1xServerConnection.java:221)
	at io.vertx.core.http.impl.Http1xServerConnection.onContent(Http1xServerConnection.java:209)
	at io.vertx.core.http.impl.Http1xServerConnection.handleOther(Http1xServerConnection.java:189)
	at io.vertx.core.http.impl.Http1xServerConnection.handleMessage(Http1xServerConnection.java:176)
	at io.vertx.core.net.impl.ConnectionBase.read(ConnectionBase.java:159)
	at io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:153)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:93)
	at io.netty.handler.codec.http.websocketx.extensions.WebSocketServerExtensionHandler.channelRead(WebSocketServerExtensionHandler.java:88)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: com.fasterxml.jackson.core.JsonParseException: Unexpected character ('}' (code 125)): expected a value
 at [Source: (io.netty.buffer.ByteBufInputStream); line: 7, column: 2]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:750)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportUnexpectedChar(ParserMinimalBase.java:674)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser._handleUnexpectedValue(UTF8StreamJsonParser.java:2757)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser.nextFieldName(UTF8StreamJsonParser.java:1139)
	at com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR._deserializeNR(UntypedObjectDeserializerNR.java:230)
	at com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserialize(UntypedObjectDeserializerNR.java:70)
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:342)
	at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:4875)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3033)
	at io.vertx.core.json.jackson.DatabindCodec.fromParser(DatabindCodec.java:126)
	... 63 common frames omitted
2025-12-21 15:49:53.555 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 15:49:53 GMT] "POST /v1/points/quote HTTP/1.1" 500 122 "-" "PostmanRuntime/7.51.0"
2025-12-21 15:50:05.945 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.0 EUR in BUSINESS
2025-12-21 15:50:05.946 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:50:05.947 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 15:50:05.948 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 15:50:05.950 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 15:50:05.950 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 15:50:05.953 [vert.x-eventloop-thread-1] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 15:50:05.954 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.PromiseImpl.onFailure(PromiseImpl.java:54)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:43)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:393)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:387)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:310)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$handleCreateRequest$6(HttpContext.java:493)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.lambda$emitFailure$1(FutureBase.java:75)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:305)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:181)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:72)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.http.impl.HttpClientImpl.lambda$doRequest$4(HttpClientImpl.java:398)
	at io.vertx.core.net.impl.pool.Endpoint.lambda$getConnection$0(Endpoint.java:52)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:162)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:123)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$ConnectFailed$1.run(SimpleConnectionPool.java:380)
	at io.vertx.core.net.impl.pool.Task.runNextTasks(Task.java:43)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:82)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:244)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.lambda$connect$2(SimpleConnectionPool.java:258)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint.lambda$connect$2(SharedClientHttpStreamEndpoint.java:104)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.NetClientImpl.failed(NetClientImpl.java:347)
	at io.vertx.core.net.impl.NetClientImpl.lambda$connectInternal2$6(NetClientImpl.java:319)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:157)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.fulfillConnectPromise(AbstractNioChannel.java:322)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:338)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 15:50:05.957 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 15:50:05 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 15:50:08.815 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.0 EUR in BUSINESS
2025-12-21 15:50:08.816 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:50:08.820 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 15:50:08.820 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 15:50:08.825 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 15:50:08.825 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 15:50:08.829 [vert.x-eventloop-thread-1] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 15:50:08.831 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.PromiseImpl.onFailure(PromiseImpl.java:54)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:43)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:393)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:387)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:310)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$handleCreateRequest$6(HttpContext.java:493)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.lambda$emitFailure$1(FutureBase.java:75)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:305)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:181)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:72)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.http.impl.HttpClientImpl.lambda$doRequest$4(HttpClientImpl.java:398)
	at io.vertx.core.net.impl.pool.Endpoint.lambda$getConnection$0(Endpoint.java:52)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:162)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:123)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$ConnectFailed$1.run(SimpleConnectionPool.java:380)
	at io.vertx.core.net.impl.pool.Task.runNextTasks(Task.java:43)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:82)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:244)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.lambda$connect$2(SimpleConnectionPool.java:258)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint.lambda$connect$2(SharedClientHttpStreamEndpoint.java:104)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.NetClientImpl.failed(NetClientImpl.java:347)
	at io.vertx.core.net.impl.NetClientImpl.lambda$connectInternal2$6(NetClientImpl.java:319)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:157)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.fulfillConnectPromise(AbstractNioChannel.java:322)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:338)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 15:50:08.836 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 15:50:08 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 15:50:26.396 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.0 USD in BUSINESS
2025-12-21 15:50:26.398 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 15:50:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 15:50:26.398 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1419 total points
2025-12-21 15:50:33.829 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
io.vertx.core.json.DecodeException: Failed to decode:Unexpected character ('}' (code 125)): expected a value
 at [Source: (io.netty.buffer.ByteBufInputStream); line: 7, column: 2]
	at io.vertx.core.json.jackson.DatabindCodec.fromParser(DatabindCodec.java:129)
	at io.vertx.core.json.jackson.DatabindCodec.fromBuffer(DatabindCodec.java:99)
	at io.vertx.core.json.Json.decodeValue(Json.java:119)
	at io.vertx.core.json.Json.decodeValue(Json.java:107)
	at io.vertx.ext.web.impl.RequestBodyImpl.asJsonObject(RequestBodyImpl.java:97)
	at io.vertx.ext.web.RequestBody.asJsonObject(RequestBody.java:73)
	at com.airline.loyalty.handler.PointsQuoteHandler.handle(PointsQuoteHandler.java:45)
	at com.airline.loyalty.handler.PointsQuoteHandler.handle(PointsQuoteHandler.java:18)
	at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1285)
	at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177)
	at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:143)
	at com.airline.loyalty.MainVerticle.lambda$createMainRouter$2(MainVerticle.java:80)
	at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1285)
	at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177)
	at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:143)
	at io.vertx.ext.web.handler.impl.TimeoutHandlerImpl.handle(TimeoutHandlerImpl.java:49)
	at io.vertx.ext.web.handler.impl.TimeoutHandlerImpl.handle(TimeoutHandlerImpl.java:27)
	at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1285)
	at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177)
	at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:143)
	at io.vertx.ext.web.handler.impl.BodyHandlerImpl$BHandler.doEnd(BodyHandlerImpl.java:359)
	at io.vertx.ext.web.handler.impl.BodyHandlerImpl$BHandler.end(BodyHandlerImpl.java:336)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.http.impl.HttpEventHandler.handleEnd(HttpEventHandler.java:76)
	at io.vertx.core.http.impl.Http1xServerRequest.onEnd(Http1xServerRequest.java:595)
	at io.vertx.core.http.impl.Http1xServerRequest.lambda$pendingQueue$1(Http1xServerRequest.java:133)
	at io.vertx.core.streams.impl.InboundBuffer.handleEvent(InboundBuffer.java:255)
	at io.vertx.core.streams.impl.InboundBuffer.write(InboundBuffer.java:134)
	at io.vertx.core.http.impl.Http1xServerRequest.handleEnd(Http1xServerRequest.java:576)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:320)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:171)
	at io.vertx.core.http.impl.Http1xServerConnection.onEnd(Http1xServerConnection.java:221)
	at io.vertx.core.http.impl.Http1xServerConnection.onContent(Http1xServerConnection.java:209)
	at io.vertx.core.http.impl.Http1xServerConnection.handleOther(Http1xServerConnection.java:189)
	at io.vertx.core.http.impl.Http1xServerConnection.handleMessage(Http1xServerConnection.java:176)
	at io.vertx.core.net.impl.ConnectionBase.read(ConnectionBase.java:159)
	at io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:153)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:93)
	at io.netty.handler.codec.http.websocketx.extensions.WebSocketServerExtensionHandler.channelRead(WebSocketServerExtensionHandler.java:88)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: com.fasterxml.jackson.core.JsonParseException: Unexpected character ('}' (code 125)): expected a value
 at [Source: (io.netty.buffer.ByteBufInputStream); line: 7, column: 2]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:750)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportUnexpectedChar(ParserMinimalBase.java:674)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser._handleUnexpectedValue(UTF8StreamJsonParser.java:2757)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser.nextFieldName(UTF8StreamJsonParser.java:1139)
	at com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR._deserializeNR(UntypedObjectDeserializerNR.java:230)
	at com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserialize(UntypedObjectDeserializerNR.java:70)
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:342)
	at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:4875)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3033)
	at io.vertx.core.json.jackson.DatabindCodec.fromParser(DatabindCodec.java:126)
	... 63 common frames omitted
2025-12-21 15:50:33.832 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 15:50:33 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 15:50:43.031 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.0 USD in BUSINESS
2025-12-21 15:50:43.033 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 15:50:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 15:50:43.033 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1419 total points
2025-12-21 15:53:00.714 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54683
2025-12-21 15:53:00.729 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54686
2025-12-21 15:53:02.628 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:53:02 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:53:03.798 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56850
2025-12-21 15:53:03.799 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56853
2025-12-21 15:53:03.892 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 15:53:03.906 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:53:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:53:03.906 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 15:53:04.042 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54295
2025-12-21 15:53:04.044 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54298
2025-12-21 15:53:04.079 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:53:04.079 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 15:53:04.384 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 15:53:04.384 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 15:53:04.387 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:53:04 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:53:04.388 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:53:04.491 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54301
2025-12-21 15:53:04.492 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54304
2025-12-21 15:53:04.509 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:53:04.510 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 15:53:04.518 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 15:53:04.519 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 15:53:04.520 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:53:04 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:53:04.520 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:53:04.656 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54307
2025-12-21 15:53:04.658 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54310
2025-12-21 15:53:04.679 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 15:53:04.680 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 15:53:04.681 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:53:04 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:53:04.779 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54312
2025-12-21 15:53:04.782 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54315
2025-12-21 15:53:04.807 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 15:53:04.808 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 15:53:04.818 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 15:53:04.820 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:53:04 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:53:04.820 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 15:53:05.122 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54414
2025-12-21 15:53:05.123 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54417
2025-12-21 15:53:05.137 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:53:05.138 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:53:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:53:05.139 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:53:05.220 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54419
2025-12-21 15:53:05.221 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54422
2025-12-21 15:53:05.234 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:53:05.236 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:53:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:53:05.236 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:53:05.327 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54424
2025-12-21 15:53:05.328 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54427
2025-12-21 15:53:05.340 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 15:53:05.341 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:53:05.366 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 15:53:05.366 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 15:53:05.373 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 15:53:05.375 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:53:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:53:05.375 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 15:53:05.530 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54431
2025-12-21 15:53:05.531 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54434
2025-12-21 15:53:05.547 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:53:05.549 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:53:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:53:05.549 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:53:05.660 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54436
2025-12-21 15:53:05.662 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54439
2025-12-21 15:53:05.675 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:53:05.675 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:53:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:53:05.676 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:53:05.738 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54441
2025-12-21 15:53:05.740 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54444
2025-12-21 15:53:05.754 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:53:05.755 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:53:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:53:05.755 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:53:05.838 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54446
2025-12-21 15:53:05.840 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54449
2025-12-21 15:53:05.856 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 15:53:05.857 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 15:53:05.865 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 15:53:05.866 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 15:53:05.875 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 15:53:05.877 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:53:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:53:05.877 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 15:53:06.025 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54453
2025-12-21 15:53:06.025 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54456
2025-12-21 15:53:06.039 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 15:53:06.040 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 15:53:06.049 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 15:53:06.050 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:53:06 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:53:06.050 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 15:53:06.148 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54459
2025-12-21 15:53:06.149 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54462
2025-12-21 15:53:06.160 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 15:53:06.161 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:53:06 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:53:06.161 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 15:54:43.571 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.0 EUR in BUSINESS
2025-12-21 15:54:43.572 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:54:43.575 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 15:54:43.575 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 15:54:43.576 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 15:54:43.577 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 15:54:43.579 [vert.x-eventloop-thread-1] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 15:54:43.580 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.PromiseImpl.onFailure(PromiseImpl.java:54)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:43)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:393)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:387)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:310)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$handleCreateRequest$6(HttpContext.java:493)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.lambda$emitFailure$1(FutureBase.java:75)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:305)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:181)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:72)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.http.impl.HttpClientImpl.lambda$doRequest$4(HttpClientImpl.java:398)
	at io.vertx.core.net.impl.pool.Endpoint.lambda$getConnection$0(Endpoint.java:52)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:162)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:123)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$ConnectFailed$1.run(SimpleConnectionPool.java:380)
	at io.vertx.core.net.impl.pool.Task.runNextTasks(Task.java:43)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:82)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:244)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.lambda$connect$2(SimpleConnectionPool.java:258)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint.lambda$connect$2(SharedClientHttpStreamEndpoint.java:104)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.NetClientImpl.failed(NetClientImpl.java:347)
	at io.vertx.core.net.impl.NetClientImpl.lambda$connectInternal2$6(NetClientImpl.java:319)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:157)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.fulfillConnectPromise(AbstractNioChannel.java:322)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:338)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 15:54:43.582 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 15:54:43 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 15:58:51.472 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50384
2025-12-21 15:58:51.488 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50387
2025-12-21 15:58:53.456 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:58:53 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:58:54.587 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50389
2025-12-21 15:58:54.588 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50392
2025-12-21 15:58:54.689 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 15:58:54.704 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:58:54 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:58:54.705 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 15:58:54.839 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50394
2025-12-21 15:58:54.840 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50397
2025-12-21 15:58:54.874 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:58:54.875 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 15:58:55.172 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 15:58:55.173 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 15:58:55.175 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:58:54 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:58:55.175 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:58:55.292 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50400
2025-12-21 15:58:55.293 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50403
2025-12-21 15:58:55.308 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:58:55.308 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 15:58:55.316 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 15:58:55.318 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 15:58:55.319 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:58:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:58:55.319 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:58:55.424 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50406
2025-12-21 15:58:55.425 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50409
2025-12-21 15:58:55.437 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 15:58:55.437 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 15:58:55.439 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:58:55 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:58:55.542 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50411
2025-12-21 15:58:55.544 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50414
2025-12-21 15:58:55.560 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 15:58:55.560 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 15:58:55.568 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 15:58:55.569 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:58:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:58:55.569 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 15:58:55.833 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50417
2025-12-21 15:58:55.835 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50420
2025-12-21 15:58:55.852 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:58:55.854 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:58:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:58:55.854 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:58:55.949 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50422
2025-12-21 15:58:55.951 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50425
2025-12-21 15:58:55.965 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:58:55.966 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:58:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:58:55.966 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:58:56.066 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50427
2025-12-21 15:58:56.067 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50430
2025-12-21 15:58:56.082 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 15:58:56.082 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:58:56.100 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 15:58:56.101 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 15:58:56.107 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 15:58:56.108 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:58:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:58:56.108 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 15:58:56.240 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50434
2025-12-21 15:58:56.241 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50437
2025-12-21 15:58:56.257 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 15:58:56.257 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:58:56.263 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 15:58:56.263 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 15:58:56.267 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 15:58:56.268 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 15:58:56.272 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 15:58:56.275 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 15:58:56.278 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:58:56 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:58:56.411 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50440
2025-12-21 15:58:56.413 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50443
2025-12-21 15:58:56.425 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:58:56.426 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:58:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:58:56.426 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:58:56.520 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50445
2025-12-21 15:58:56.521 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50448
2025-12-21 15:58:56.534 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:58:56.535 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:58:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:58:56.535 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:58:56.607 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50450
2025-12-21 15:58:56.608 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50453
2025-12-21 15:58:56.619 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:58:56.620 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:58:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:58:56.620 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:58:56.693 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50455
2025-12-21 15:58:56.694 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50458
2025-12-21 15:58:56.714 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 15:58:56.714 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 15:58:56.721 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 15:58:56.721 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 15:58:56.728 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 15:58:56.729 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:58:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:58:56.729 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 15:58:56.869 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50462
2025-12-21 15:58:56.871 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50465
2025-12-21 15:58:56.882 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 15:58:56.882 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 15:58:56.888 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 15:58:56.889 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:58:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:58:56.889 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 15:58:56.990 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50468
2025-12-21 15:58:56.992 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50471
2025-12-21 15:58:57.005 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 15:58:57.006 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:58:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:58:57.006 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 15:59:47.688 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52283
2025-12-21 15:59:47.703 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52286
2025-12-21 15:59:49.815 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:59:49 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:59:51.074 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52291
2025-12-21 15:59:51.075 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52294
2025-12-21 15:59:51.178 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 15:59:51.201 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:59:51 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:59:51.201 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 15:59:51.342 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52296
2025-12-21 15:59:51.345 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52299
2025-12-21 15:59:51.396 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:59:51.396 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 15:59:51.717 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 15:59:51.718 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 15:59:51.719 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:59:51 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:59:51.719 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:59:51.823 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52302
2025-12-21 15:59:51.825 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52305
2025-12-21 15:59:51.841 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:59:51.841 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 15:59:51.848 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 15:59:51.850 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 15:59:51.851 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:59:51 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:59:51.851 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:59:51.959 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52308
2025-12-21 15:59:51.960 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52311
2025-12-21 15:59:51.972 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 15:59:51.973 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 15:59:51.975 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:59:51 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:59:52.076 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52313
2025-12-21 15:59:52.077 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52316
2025-12-21 15:59:52.092 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 15:59:52.093 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 15:59:52.102 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 15:59:52.103 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:59:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:59:52.103 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 15:59:52.343 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52319
2025-12-21 15:59:52.344 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52322
2025-12-21 15:59:52.357 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:59:52.358 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:59:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:59:52.359 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:59:52.441 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52324
2025-12-21 15:59:52.442 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52327
2025-12-21 15:59:52.459 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:59:52.459 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:59:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:59:52.460 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:59:52.562 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52329
2025-12-21 15:59:52.564 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52332
2025-12-21 15:59:52.577 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 15:59:52.577 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:59:52.599 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 15:59:52.599 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 15:59:52.607 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 15:59:52.608 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:59:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:59:52.608 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 15:59:52.753 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52336
2025-12-21 15:59:52.754 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52339
2025-12-21 15:59:52.769 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 15:59:52.769 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 15:59:52.775 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 15:59:52.776 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 15:59:52.780 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 15:59:52.781 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 15:59:52.785 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 15:59:52.788 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 15:59:52.791 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:59:52 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:59:52.913 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52342
2025-12-21 15:59:52.915 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52345
2025-12-21 15:59:52.928 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:59:52.929 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:59:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:59:52.930 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 15:59:53.029 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52347
2025-12-21 15:59:53.030 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52350
2025-12-21 15:59:53.043 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:59:53.044 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:59:53 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:59:53.044 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 15:59:53.135 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52352
2025-12-21 15:59:53.136 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52355
2025-12-21 15:59:53.147 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 15:59:53.148 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:59:53 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:59:53.148 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 15:59:53.226 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52357
2025-12-21 15:59:53.227 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52360
2025-12-21 15:59:53.246 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 15:59:53.246 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 15:59:53.255 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 15:59:53.256 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 15:59:53.262 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 15:59:53.264 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:59:53 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:59:53.264 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 15:59:53.415 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52364
2025-12-21 15:59:53.417 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52367
2025-12-21 15:59:53.430 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 15:59:53.430 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 15:59:53.437 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 15:59:53.438 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:59:53 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:59:53.438 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 15:59:53.553 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52370
2025-12-21 15:59:53.555 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52373
2025-12-21 15:59:53.571 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 15:59:53.572 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 15:59:53 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 15:59:53.572 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 16:04:42.290 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60634
2025-12-21 16:04:42.297 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60637
2025-12-21 16:04:44.104 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:04:44 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:04:45.318 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51651
2025-12-21 16:04:45.320 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51654
2025-12-21 16:04:45.410 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 16:04:45.424 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:04:45 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:04:45.424 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 16:04:45.569 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51656
2025-12-21 16:04:45.570 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51659
2025-12-21 16:04:45.602 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:04:45.602 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 16:04:45.897 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 16:04:45.898 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 16:04:45.900 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:04:45 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:04:45.900 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:04:46.012 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51662
2025-12-21 16:04:46.014 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51665
2025-12-21 16:04:46.029 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:04:46.030 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 16:04:48.044 [vert.x-eventloop-thread-0] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: The timeout period of 2000ms has been exceeded while executing GET /v1/promos/SUMMER25 for server null
2025-12-21 16:04:48.047 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:04:46 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:04:48.047 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:04:48.670 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51668
2025-12-21 16:04:48.672 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51671
2025-12-21 16:04:48.685 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:04:48.685 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 16:04:48.692 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 16:04:48.693 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 16:04:48.695 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:04:48 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:04:48.695 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:04:48.799 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51674
2025-12-21 16:04:48.801 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51677
2025-12-21 16:04:48.822 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 16:04:48.823 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 16:04:48.825 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:04:48 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:04:48.909 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51679
2025-12-21 16:04:48.911 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51682
2025-12-21 16:04:48.922 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 16:04:48.923 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 16:04:48.928 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 16:04:48.930 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:04:48 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:04:48.930 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 16:04:49.156 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51685
2025-12-21 16:04:49.158 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51688
2025-12-21 16:04:49.172 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:04:49.173 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:04:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:04:49.173 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:04:49.271 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51690
2025-12-21 16:04:49.273 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51693
2025-12-21 16:04:49.288 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:04:49.289 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:04:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:04:49.289 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:04:49.372 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51695
2025-12-21 16:04:49.373 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51698
2025-12-21 16:04:49.387 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 16:04:49.388 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:04:49.406 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 16:04:49.406 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 16:04:49.413 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 16:04:49.414 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:04:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:04:49.414 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 16:04:49.524 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51702
2025-12-21 16:04:49.525 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51705
2025-12-21 16:04:49.536 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 16:04:49.536 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:04:49.543 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:04:49.543 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 16:04:49.548 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:04:49.549 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 16:04:49.553 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 16:04:49.556 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 16:04:49.560 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:04:49 GMT] "POST /v1/points/quote HTTP/1.1" 500 122 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:04:49.644 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51708
2025-12-21 16:04:49.645 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51711
2025-12-21 16:04:49.659 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:04:49.660 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:04:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:04:49.660 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:04:49.734 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51713
2025-12-21 16:04:49.735 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51716
2025-12-21 16:04:49.745 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:04:49.746 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:04:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:04:49.746 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:04:49.808 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51718
2025-12-21 16:04:49.809 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51721
2025-12-21 16:04:49.822 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:04:49.822 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:04:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:04:49.823 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:04:49.900 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51723
2025-12-21 16:04:49.902 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51726
2025-12-21 16:04:49.914 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 16:04:49.915 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 16:04:49.921 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 16:04:49.921 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 16:04:49.926 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 16:04:49.927 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:04:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:04:49.928 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 16:04:50.054 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51730
2025-12-21 16:04:50.055 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51733
2025-12-21 16:04:50.067 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 16:04:50.067 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 16:04:50.073 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 16:04:50.074 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:04:50 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:04:50.074 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 16:04:50.175 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51736
2025-12-21 16:04:50.176 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51739
2025-12-21 16:04:50.186 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 16:04:50.187 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:04:50 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:04:50.187 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 16:05:21.655 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54354
2025-12-21 16:05:21.670 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54357
2025-12-21 16:05:23.678 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:05:23 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:05:25.012 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57991
2025-12-21 16:05:25.013 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57994
2025-12-21 16:05:25.126 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 16:05:25.147 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:05:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:05:25.147 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 16:05:25.291 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50656
2025-12-21 16:05:25.293 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50659
2025-12-21 16:05:25.328 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:05:25.328 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 16:05:25.679 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 16:05:25.680 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 16:05:25.682 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:05:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:05:25.682 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:05:25.780 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50662
2025-12-21 16:05:25.782 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50665
2025-12-21 16:05:25.803 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:05:25.804 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 16:05:27.815 [vert.x-eventloop-thread-0] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: The timeout period of 2000ms has been exceeded while executing GET /v1/promos/SUMMER25 for server null
2025-12-21 16:05:27.818 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:05:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:05:27.818 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:05:28.448 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49671
2025-12-21 16:05:28.449 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49676
2025-12-21 16:05:28.462 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:05:28.462 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 16:05:28.468 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 16:05:28.470 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 16:05:28.471 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:05:28 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:05:28.471 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:05:28.567 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49679
2025-12-21 16:05:28.568 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49682
2025-12-21 16:05:28.584 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 16:05:28.585 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 16:05:28.587 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:05:28 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:05:28.680 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49684
2025-12-21 16:05:28.681 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49687
2025-12-21 16:05:28.696 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 16:05:28.696 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 16:05:28.706 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 16:05:28.708 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:05:28 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:05:28.708 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 16:05:28.948 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49690
2025-12-21 16:05:28.949 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49693
2025-12-21 16:05:28.961 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:05:28.962 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:05:28 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:05:28.962 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:05:29.034 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49695
2025-12-21 16:05:29.035 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49698
2025-12-21 16:05:29.051 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:05:29.052 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:05:29 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:05:29.053 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:05:29.144 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49700
2025-12-21 16:05:29.145 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49703
2025-12-21 16:05:29.160 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 16:05:29.160 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:05:29.182 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 16:05:29.182 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 16:05:29.188 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 16:05:29.189 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:05:29 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:05:29.189 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 16:05:29.297 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49707
2025-12-21 16:05:29.298 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49710
2025-12-21 16:05:29.310 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 16:05:29.310 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:05:29.317 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:05:29.317 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 16:05:29.321 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:05:29.321 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 16:05:29.324 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 16:05:29.327 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 16:05:29.330 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:05:29 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:05:29.437 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49713
2025-12-21 16:05:29.438 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49716
2025-12-21 16:05:29.450 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:05:29.450 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:05:29 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:05:29.451 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:05:29.532 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49718
2025-12-21 16:05:29.533 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49721
2025-12-21 16:05:29.543 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:05:29.543 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:05:29 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:05:29.544 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:05:29.600 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49723
2025-12-21 16:05:29.601 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49726
2025-12-21 16:05:29.612 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:05:29.613 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:05:29 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:05:29.613 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:05:29.687 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49728
2025-12-21 16:05:29.688 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49731
2025-12-21 16:05:29.700 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 16:05:29.700 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 16:05:29.706 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 16:05:29.706 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 16:05:29.712 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 16:05:29.713 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:05:29 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:05:29.714 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 16:05:29.845 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49735
2025-12-21 16:05:29.846 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49738
2025-12-21 16:05:29.857 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 16:05:29.857 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 16:05:29.863 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 16:05:29.864 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:05:29 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:05:29.864 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 16:05:29.959 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49741
2025-12-21 16:05:29.961 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49744
2025-12-21 16:05:29.974 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 16:05:29.975 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:05:29 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:05:29.975 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 16:10:27.112 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57770
2025-12-21 16:10:27.125 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57773
2025-12-21 16:10:29.114 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:10:29 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:10:30.257 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57775
2025-12-21 16:10:30.259 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57778
2025-12-21 16:10:30.374 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 16:10:30.390 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:10:30 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:10:30.390 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 16:10:30.540 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57780
2025-12-21 16:10:30.541 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57783
2025-12-21 16:10:30.579 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:10:30.580 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 16:10:30.897 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 16:10:30.897 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 16:10:30.899 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:10:30 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:10:30.899 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:10:30.995 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57786
2025-12-21 16:10:30.997 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57789
2025-12-21 16:10:31.015 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:10:31.015 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 16:10:33.035 [vert.x-eventloop-thread-0] WARN  c.a.l.service.PromoServiceClient - Promo service call failed, continuing without promo: The timeout period of 2000ms has been exceeded while executing GET /v1/promos/SUMMER25 for server null
2025-12-21 16:10:33.037 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:10:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:10:33.037 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:10:33.665 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57792
2025-12-21 16:10:33.667 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57795
2025-12-21 16:10:33.681 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:10:33.681 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 16:10:33.687 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 16:10:33.689 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 16:10:33.689 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:10:33 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:10:33.690 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:10:33.805 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57798
2025-12-21 16:10:33.807 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57801
2025-12-21 16:10:33.822 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 16:10:33.823 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 16:10:33.825 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:10:33 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:10:33.922 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57803
2025-12-21 16:10:33.923 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57806
2025-12-21 16:10:33.936 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 16:10:33.937 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 16:10:33.945 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 16:10:33.946 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:10:33 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:10:33.946 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 16:10:34.195 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57809
2025-12-21 16:10:34.196 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57812
2025-12-21 16:10:34.208 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:10:34.209 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:10:34 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:10:34.209 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:10:34.286 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57814
2025-12-21 16:10:34.287 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57817
2025-12-21 16:10:34.299 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:10:34.300 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:10:34 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:10:34.300 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:10:34.388 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57819
2025-12-21 16:10:34.389 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57822
2025-12-21 16:10:34.402 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 16:10:34.403 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:10:34.420 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 16:10:34.420 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 16:10:34.427 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 16:10:34.428 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:10:34 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:10:34.428 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 16:10:34.544 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57826
2025-12-21 16:10:34.546 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57829
2025-12-21 16:10:34.558 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 16:10:34.558 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:10:34.563 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:10:34.564 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 16:10:34.568 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:10:34.568 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 16:10:34.572 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 16:10:34.574 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 16:10:34.577 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:10:34 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:10:34.658 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57832
2025-12-21 16:10:34.659 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57835
2025-12-21 16:10:34.670 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:10:34.671 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:10:34 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:10:34.671 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:10:34.751 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57837
2025-12-21 16:10:34.752 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57840
2025-12-21 16:10:34.764 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:10:34.765 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:10:34 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:10:34.765 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:10:34.822 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57842
2025-12-21 16:10:34.823 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57845
2025-12-21 16:10:34.834 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:10:34.835 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:10:34 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:10:34.835 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:10:34.921 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57847
2025-12-21 16:10:34.923 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57850
2025-12-21 16:10:34.934 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 16:10:34.935 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 16:10:34.940 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 16:10:34.941 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 16:10:34.947 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 16:10:34.948 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:10:34 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:10:34.948 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 16:10:35.080 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57854
2025-12-21 16:10:35.081 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57857
2025-12-21 16:10:35.091 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 16:10:35.092 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 16:10:35.097 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 16:10:35.098 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:10:35 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:10:35.098 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 16:10:35.193 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57860
2025-12-21 16:10:35.194 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57863
2025-12-21 16:10:35.205 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 16:10:35.205 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:10:35 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:10:35.206 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 16:19:08.107 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51822
2025-12-21 16:19:08.118 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51825
2025-12-21 16:19:10.023 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:09 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:11.393 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51827
2025-12-21 16:19:11.396 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51830
2025-12-21 16:19:11.501 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 16:19:11.520 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:11.521 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 16:19:11.662 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51832
2025-12-21 16:19:11.663 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51835
2025-12-21 16:19:11.705 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:19:11.705 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 16:19:12.026 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 16:19:12.027 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 16:19:12.029 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:12.031 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:19:12.130 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51838
2025-12-21 16:19:12.132 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51841
2025-12-21 16:19:12.150 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:19:12.150 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 16:19:12.158 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 16:19:12.159 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 16:19:12.160 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:12.161 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:19:12.290 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51844
2025-12-21 16:19:12.291 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51847
2025-12-21 16:19:12.305 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 16:19:12.306 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 16:19:12.307 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:12 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:12.398 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51849
2025-12-21 16:19:12.400 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51852
2025-12-21 16:19:12.414 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 16:19:12.414 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 16:19:12.425 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 16:19:12.427 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:12.428 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 16:19:12.747 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51855
2025-12-21 16:19:12.749 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51858
2025-12-21 16:19:12.762 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:19:12.763 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:12.763 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:19:12.846 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51860
2025-12-21 16:19:12.847 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51863
2025-12-21 16:19:12.859 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:19:12.860 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:12.860 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:19:12.957 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51865
2025-12-21 16:19:12.958 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51868
2025-12-21 16:19:12.971 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 16:19:12.971 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:19:12.988 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 16:19:12.989 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 16:19:12.996 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 16:19:12.998 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:12.998 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 16:19:13.125 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51872
2025-12-21 16:19:13.126 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51875
2025-12-21 16:19:13.140 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 16:19:13.140 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:19:13.147 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:19:13.147 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 16:19:13.153 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:19:13.153 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 16:19:13.158 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 16:19:13.161 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 16:19:13.164 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:13 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:13.260 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51878
2025-12-21 16:19:13.262 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51881
2025-12-21 16:19:13.273 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:19:13.274 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:13.274 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:19:13.347 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51883
2025-12-21 16:19:13.348 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51886
2025-12-21 16:19:13.362 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:19:13.363 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:13.363 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:19:13.444 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51888
2025-12-21 16:19:13.446 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51891
2025-12-21 16:19:13.460 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:19:13.461 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:13.462 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:19:13.536 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51893
2025-12-21 16:19:13.538 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51896
2025-12-21 16:19:13.555 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 16:19:13.555 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 16:19:13.563 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 16:19:13.564 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 16:19:13.570 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 16:19:13.572 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:13.572 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 16:19:13.708 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51900
2025-12-21 16:19:13.710 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51903
2025-12-21 16:19:13.726 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 16:19:13.726 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 16:19:13.737 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 16:19:13.738 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:13.739 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 16:19:13.834 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51906
2025-12-21 16:19:13.835 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51909
2025-12-21 16:19:13.849 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 16:19:13.850 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:13.850 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 16:19:14.005 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51911
2025-12-21 16:19:14.006 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51914
2025-12-21 16:19:14.027 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:19:14.028 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:14.029 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:19:14.135 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51916
2025-12-21 16:19:14.136 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51919
2025-12-21 16:19:14.151 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 16:19:14.153 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:14.153 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:19:14.271 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51921
2025-12-21 16:19:14.272 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51924
2025-12-21 16:19:14.282 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 16:19:14.283 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:14.284 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:19:14.377 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51926
2025-12-21 16:19:14.379 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51929
2025-12-21 16:19:14.391 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 16:19:14.392 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:19:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:19:14.392 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:26:49.253 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49301
2025-12-21 16:26:49.265 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49304
2025-12-21 16:26:51.367 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:51 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:52.754 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49306
2025-12-21 16:26:52.755 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49309
2025-12-21 16:26:52.907 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 16:26:52.930 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:52 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:52.930 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 16:26:53.199 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49312
2025-12-21 16:26:53.201 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49315
2025-12-21 16:26:53.265 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:26:53.266 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 16:26:53.815 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 16:26:53.817 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 16:26:53.820 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:53 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:53.820 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:26:53.986 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49318
2025-12-21 16:26:53.990 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49321
2025-12-21 16:26:54.062 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:26:54.063 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 16:26:54.083 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 16:26:54.086 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 16:26:54.088 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:54 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:54.089 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:26:54.300 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49324
2025-12-21 16:26:54.302 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49327
2025-12-21 16:26:54.323 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 16:26:54.324 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 16:26:54.327 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:54 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:54.571 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49330
2025-12-21 16:26:54.574 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49333
2025-12-21 16:26:54.603 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 16:26:54.604 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 16:26:54.614 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 16:26:54.616 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:54 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:54.616 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 16:26:54.996 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49336
2025-12-21 16:26:54.998 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49339
2025-12-21 16:26:55.026 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:26:55.028 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:55.028 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:26:55.176 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49341
2025-12-21 16:26:55.177 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49344
2025-12-21 16:26:55.201 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:26:55.202 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:55.203 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:26:55.387 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49346
2025-12-21 16:26:55.388 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49349
2025-12-21 16:26:55.426 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 16:26:55.427 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:26:55.472 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 16:26:55.472 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 16:26:55.485 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 16:26:55.487 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:55.488 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 16:26:55.795 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49353
2025-12-21 16:26:55.797 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49356
2025-12-21 16:26:55.823 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 16:26:55.823 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:26:55.832 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:26:55.832 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 16:26:55.839 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:26:55.840 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 16:26:55.844 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 16:26:55.849 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 16:26:55.853 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:55 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:56.126 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49360
2025-12-21 16:26:56.130 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49363
2025-12-21 16:26:56.163 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:26:56.165 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:56.166 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:26:56.394 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49365
2025-12-21 16:26:56.395 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49368
2025-12-21 16:26:56.417 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:26:56.419 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:56.419 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:26:56.573 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49370
2025-12-21 16:26:56.577 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49373
2025-12-21 16:26:56.629 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:26:56.632 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:56.633 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:26:56.813 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49375
2025-12-21 16:26:56.815 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49378
2025-12-21 16:26:56.834 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 16:26:56.835 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 16:26:56.847 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 16:26:56.847 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 16:26:56.854 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 16:26:56.856 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:56.857 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 16:26:57.108 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49382
2025-12-21 16:26:57.111 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49385
2025-12-21 16:26:57.141 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 16:26:57.142 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 16:26:57.157 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 16:26:57.159 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:57.159 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 16:26:57.497 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49389
2025-12-21 16:26:57.501 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49392
2025-12-21 16:26:57.547 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 16:26:57.551 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:57.552 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 16:26:57.971 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49394
2025-12-21 16:26:57.974 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49397
2025-12-21 16:26:58.053 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ABC
2025-12-21 16:26:58.055 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: ABC
2025-12-21 16:26:58.058 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:58 GMT] "POST /v1/points/quote HTTP/1.1" 400 110 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:58.310 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49399
2025-12-21 16:26:58.312 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49402
2025-12-21 16:26:58.336 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ABC
2025-12-21 16:26:58.336 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: ABC
2025-12-21 16:26:58.337 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:58 GMT] "POST /v1/points/quote HTTP/1.1" 400 110 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:58.435 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49404
2025-12-21 16:26:58.436 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49407
2025-12-21 16:26:58.453 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ABC
2025-12-21 16:26:58.454 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: ABC
2025-12-21 16:26:58.455 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:58 GMT] "POST /v1/points/quote HTTP/1.1" 400 110 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:26:58.569 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49673
2025-12-21 16:26:58.570 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49677
2025-12-21 16:26:58.599 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ABC
2025-12-21 16:26:58.600 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: ABC
2025-12-21 16:26:58.602 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:26:58 GMT] "POST /v1/points/quote HTTP/1.1" 400 110 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:27:16.023 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
io.vertx.core.json.DecodeException: Failed to decode:Unexpected character (',' (code 44)): expected a value
 at [Source: (io.netty.buffer.ByteBufInputStream); line: 2, column: 18]
	at io.vertx.core.json.jackson.DatabindCodec.fromParser(DatabindCodec.java:129)
	at io.vertx.core.json.jackson.DatabindCodec.fromBuffer(DatabindCodec.java:99)
	at io.vertx.core.json.Json.decodeValue(Json.java:119)
	at io.vertx.core.json.Json.decodeValue(Json.java:107)
	at io.vertx.ext.web.impl.RequestBodyImpl.asJsonObject(RequestBodyImpl.java:97)
	at io.vertx.ext.web.RequestBody.asJsonObject(RequestBody.java:73)
	at com.airline.loyalty.handler.PointsQuoteHandler.handle(PointsQuoteHandler.java:45)
	at com.airline.loyalty.handler.PointsQuoteHandler.handle(PointsQuoteHandler.java:18)
	at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1285)
	at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177)
	at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:143)
	at com.airline.loyalty.MainVerticle.lambda$createMainRouter$2(MainVerticle.java:80)
	at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1285)
	at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177)
	at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:143)
	at io.vertx.ext.web.handler.impl.TimeoutHandlerImpl.handle(TimeoutHandlerImpl.java:49)
	at io.vertx.ext.web.handler.impl.TimeoutHandlerImpl.handle(TimeoutHandlerImpl.java:27)
	at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1285)
	at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177)
	at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:143)
	at io.vertx.ext.web.handler.impl.BodyHandlerImpl$BHandler.doEnd(BodyHandlerImpl.java:359)
	at io.vertx.ext.web.handler.impl.BodyHandlerImpl$BHandler.end(BodyHandlerImpl.java:336)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.http.impl.HttpEventHandler.handleEnd(HttpEventHandler.java:76)
	at io.vertx.core.http.impl.Http1xServerRequest.onEnd(Http1xServerRequest.java:595)
	at io.vertx.core.http.impl.Http1xServerRequest.lambda$pendingQueue$1(Http1xServerRequest.java:133)
	at io.vertx.core.streams.impl.InboundBuffer.handleEvent(InboundBuffer.java:255)
	at io.vertx.core.streams.impl.InboundBuffer.write(InboundBuffer.java:134)
	at io.vertx.core.http.impl.Http1xServerRequest.handleEnd(Http1xServerRequest.java:576)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:320)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:171)
	at io.vertx.core.http.impl.Http1xServerConnection.onEnd(Http1xServerConnection.java:221)
	at io.vertx.core.http.impl.Http1xServerConnection.onContent(Http1xServerConnection.java:209)
	at io.vertx.core.http.impl.Http1xServerConnection.handleOther(Http1xServerConnection.java:189)
	at io.vertx.core.http.impl.Http1xServerConnection.handleMessage(Http1xServerConnection.java:176)
	at io.vertx.core.net.impl.ConnectionBase.read(ConnectionBase.java:159)
	at io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:153)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:93)
	at io.netty.handler.codec.http.websocketx.extensions.WebSocketServerExtensionHandler.channelRead(WebSocketServerExtensionHandler.java:88)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.vertx.core.http.impl.Http1xOrH2CHandler.end(Http1xOrH2CHandler.java:61)
	at io.vertx.core.http.impl.Http1xOrH2CHandler.channelRead(Http1xOrH2CHandler.java:38)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: com.fasterxml.jackson.core.JsonParseException: Unexpected character (',' (code 44)): expected a value
 at [Source: (io.netty.buffer.ByteBufInputStream); line: 2, column: 18]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:750)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportUnexpectedChar(ParserMinimalBase.java:674)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser._handleUnexpectedValue(UTF8StreamJsonParser.java:2757)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser.nextFieldName(UTF8StreamJsonParser.java:1139)
	at com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR._deserializeNR(UntypedObjectDeserializerNR.java:227)
	at com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserialize(UntypedObjectDeserializerNR.java:70)
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:342)
	at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:4875)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3033)
	at io.vertx.core.json.jackson.DatabindCodec.fromParser(DatabindCodec.java:126)
	... 68 common frames omitted
2025-12-21 16:27:16.028 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 16:27:16 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 16:27:17.859 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
io.vertx.core.json.DecodeException: Failed to decode:Unexpected character (',' (code 44)): expected a value
 at [Source: (io.netty.buffer.ByteBufInputStream); line: 2, column: 18]
	at io.vertx.core.json.jackson.DatabindCodec.fromParser(DatabindCodec.java:129)
	at io.vertx.core.json.jackson.DatabindCodec.fromBuffer(DatabindCodec.java:99)
	at io.vertx.core.json.Json.decodeValue(Json.java:119)
	at io.vertx.core.json.Json.decodeValue(Json.java:107)
	at io.vertx.ext.web.impl.RequestBodyImpl.asJsonObject(RequestBodyImpl.java:97)
	at io.vertx.ext.web.RequestBody.asJsonObject(RequestBody.java:73)
	at com.airline.loyalty.handler.PointsQuoteHandler.handle(PointsQuoteHandler.java:45)
	at com.airline.loyalty.handler.PointsQuoteHandler.handle(PointsQuoteHandler.java:18)
	at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1285)
	at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177)
	at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:143)
	at com.airline.loyalty.MainVerticle.lambda$createMainRouter$2(MainVerticle.java:80)
	at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1285)
	at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177)
	at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:143)
	at io.vertx.ext.web.handler.impl.TimeoutHandlerImpl.handle(TimeoutHandlerImpl.java:49)
	at io.vertx.ext.web.handler.impl.TimeoutHandlerImpl.handle(TimeoutHandlerImpl.java:27)
	at io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1285)
	at io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:177)
	at io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:143)
	at io.vertx.ext.web.handler.impl.BodyHandlerImpl$BHandler.doEnd(BodyHandlerImpl.java:359)
	at io.vertx.ext.web.handler.impl.BodyHandlerImpl$BHandler.end(BodyHandlerImpl.java:336)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.http.impl.HttpEventHandler.handleEnd(HttpEventHandler.java:76)
	at io.vertx.core.http.impl.Http1xServerRequest.onEnd(Http1xServerRequest.java:595)
	at io.vertx.core.http.impl.Http1xServerRequest.lambda$pendingQueue$1(Http1xServerRequest.java:133)
	at io.vertx.core.streams.impl.InboundBuffer.handleEvent(InboundBuffer.java:255)
	at io.vertx.core.streams.impl.InboundBuffer.write(InboundBuffer.java:134)
	at io.vertx.core.http.impl.Http1xServerRequest.handleEnd(Http1xServerRequest.java:576)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:320)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:171)
	at io.vertx.core.http.impl.Http1xServerConnection.onEnd(Http1xServerConnection.java:221)
	at io.vertx.core.http.impl.Http1xServerConnection.onContent(Http1xServerConnection.java:209)
	at io.vertx.core.http.impl.Http1xServerConnection.handleOther(Http1xServerConnection.java:189)
	at io.vertx.core.http.impl.Http1xServerConnection.handleMessage(Http1xServerConnection.java:176)
	at io.vertx.core.net.impl.ConnectionBase.read(ConnectionBase.java:159)
	at io.vertx.core.net.impl.VertxHandler.channelRead(VertxHandler.java:153)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:93)
	at io.netty.handler.codec.http.websocketx.extensions.WebSocketServerExtensionHandler.channelRead(WebSocketServerExtensionHandler.java:88)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: com.fasterxml.jackson.core.JsonParseException: Unexpected character (',' (code 44)): expected a value
 at [Source: (io.netty.buffer.ByteBufInputStream); line: 2, column: 18]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:750)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportUnexpectedChar(ParserMinimalBase.java:674)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser._handleUnexpectedValue(UTF8StreamJsonParser.java:2757)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser.nextFieldName(UTF8StreamJsonParser.java:1139)
	at com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR._deserializeNR(UntypedObjectDeserializerNR.java:227)
	at com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializerNR.deserialize(UntypedObjectDeserializerNR.java:70)
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:342)
	at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:4875)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3033)
	at io.vertx.core.json.jackson.DatabindCodec.fromParser(DatabindCodec.java:126)
	... 63 common frames omitted
2025-12-21 16:27:17.862 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 16:27:17 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 16:27:29.242 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for null USD in BUSINESS
2025-12-21 16:27:29.242 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 16:27:29.244 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 16:27:29 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "PostmanRuntime/7.51.0"
2025-12-21 16:27:45.983 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.0  in BUSINESS
2025-12-21 16:27:45.984 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid currency code
2025-12-21 16:27:45.985 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 16:27:45 GMT] "POST /v1/points/quote HTTP/1.1" 400 107 "-" "PostmanRuntime/7.51.0"
2025-12-21 16:27:57.608 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.0 USD in 
2025-12-21 16:27:57.609 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: 
2025-12-21 16:27:57.611 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 16:27:57 GMT] "POST /v1/points/quote HTTP/1.1" 400 107 "-" "PostmanRuntime/7.51.0"
2025-12-21 16:28:11.238 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.0 USD in ECONOMY
2025-12-21 16:28:11.240 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 16:28:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 16:28:11.240 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1419 total points
2025-12-21 16:28:16.718 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.0 USD in ECONOMY
2025-12-21 16:28:16.720 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid customer tier: 
2025-12-21 16:28:16.721 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 16:28:16 GMT] "POST /v1/points/quote HTTP/1.1" 400 109 "-" "PostmanRuntime/7.51.0"
2025-12-21 16:28:29.410 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.0 USD in ECONOMY
2025-12-21 16:28:29.411 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 16:28:29 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "PostmanRuntime/7.51.0"
2025-12-21 16:28:29.411 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1419 total points
2025-12-21 16:29:08.559 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62137
2025-12-21 16:29:08.568 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62140
2025-12-21 16:29:10.524 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:10 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:11.797 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62142
2025-12-21 16:29:11.799 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62145
2025-12-21 16:29:11.894 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 16:29:11.907 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:11.907 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 16:29:12.035 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62147
2025-12-21 16:29:12.037 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62150
2025-12-21 16:29:12.074 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:29:12.074 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 16:29:12.396 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 16:29:12.396 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 16:29:12.398 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:12.398 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:29:12.511 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62153
2025-12-21 16:29:12.512 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62156
2025-12-21 16:29:12.525 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:29:12.526 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 16:29:12.533 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 16:29:12.535 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 16:29:12.536 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:12.536 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:29:12.649 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62159
2025-12-21 16:29:12.650 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62162
2025-12-21 16:29:12.665 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 16:29:12.666 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 16:29:12.668 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:12 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:12.770 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62164
2025-12-21 16:29:12.772 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62167
2025-12-21 16:29:12.784 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 16:29:12.785 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 16:29:12.793 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 16:29:12.794 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:12.794 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 16:29:13.044 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62170
2025-12-21 16:29:13.046 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62173
2025-12-21 16:29:13.066 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:29:13.067 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:13.067 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:29:13.154 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62175
2025-12-21 16:29:13.156 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62178
2025-12-21 16:29:13.168 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:29:13.169 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:13.169 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:29:13.268 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62180
2025-12-21 16:29:13.269 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62183
2025-12-21 16:29:13.282 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 16:29:13.282 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:29:13.302 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 16:29:13.303 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 16:29:13.313 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 16:29:13.314 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:13.314 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 16:29:13.453 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62187
2025-12-21 16:29:13.454 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62190
2025-12-21 16:29:13.472 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 16:29:13.472 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:29:13.479 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:29:13.479 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 16:29:13.485 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:29:13.485 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 16:29:13.489 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 16:29:13.492 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 16:29:13.496 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:13 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:13.586 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62193
2025-12-21 16:29:13.587 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62196
2025-12-21 16:29:13.599 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:29:13.600 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:13.600 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:29:13.676 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62198
2025-12-21 16:29:13.678 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62201
2025-12-21 16:29:13.694 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:29:13.696 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:13.696 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:29:13.779 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62203
2025-12-21 16:29:13.781 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62206
2025-12-21 16:29:13.801 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:29:13.802 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:13.802 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:29:13.880 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62208
2025-12-21 16:29:13.881 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62211
2025-12-21 16:29:13.895 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 16:29:13.895 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 16:29:13.902 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 16:29:13.902 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 16:29:13.909 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 16:29:13.910 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:13.910 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 16:29:14.051 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62215
2025-12-21 16:29:14.052 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62218
2025-12-21 16:29:14.071 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 16:29:14.072 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 16:29:14.082 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 16:29:14.084 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:14.084 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 16:29:14.186 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62221
2025-12-21 16:29:14.188 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62224
2025-12-21 16:29:14.199 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 16:29:14.200 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:14.200 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 16:29:14.324 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62226
2025-12-21 16:29:14.325 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62229
2025-12-21 16:29:14.346 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:29:14.347 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:14.347 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:29:14.450 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62231
2025-12-21 16:29:14.451 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62234
2025-12-21 16:29:14.465 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 16:29:14.466 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:14.466 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:29:14.554 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62236
2025-12-21 16:29:14.555 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62239
2025-12-21 16:29:14.566 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 16:29:14.567 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:14.567 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:29:14.658 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62241
2025-12-21 16:29:14.659 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62244
2025-12-21 16:29:14.669 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 16:29:14.670 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:29:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:29:14.670 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:30:11.703 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51651
2025-12-21 16:30:11.718 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51654
2025-12-21 16:30:13.785 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:13 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:15.140 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51656
2025-12-21 16:30:15.142 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51659
2025-12-21 16:30:15.283 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 16:30:15.310 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:15 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:15.310 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 16:30:15.465 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51661
2025-12-21 16:30:15.466 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51664
2025-12-21 16:30:15.507 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:30:15.507 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 16:30:15.855 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 16:30:15.856 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 16:30:15.858 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:15 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:15.858 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:30:15.968 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51667
2025-12-21 16:30:15.969 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51670
2025-12-21 16:30:15.981 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:30:15.982 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 16:30:15.988 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 16:30:15.990 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 16:30:15.991 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:15 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:15.991 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:30:16.100 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51673
2025-12-21 16:30:16.101 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51676
2025-12-21 16:30:16.116 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 16:30:16.117 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 16:30:16.119 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:16 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:16.200 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51678
2025-12-21 16:30:16.201 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51681
2025-12-21 16:30:16.217 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 16:30:16.218 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 16:30:16.229 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 16:30:16.230 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:16 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:16.230 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 16:30:16.460 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51684
2025-12-21 16:30:16.461 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51687
2025-12-21 16:30:16.475 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:30:16.476 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:16 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:16.476 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:30:16.572 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51689
2025-12-21 16:30:16.573 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51692
2025-12-21 16:30:16.588 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:30:16.590 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:16 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:16.590 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:30:16.690 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51694
2025-12-21 16:30:16.692 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51697
2025-12-21 16:30:16.708 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 16:30:16.709 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:30:16.736 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 16:30:16.737 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 16:30:16.747 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 16:30:16.748 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:16 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:16.748 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 16:30:16.903 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51701
2025-12-21 16:30:16.904 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51704
2025-12-21 16:30:16.923 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 16:30:16.923 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:30:16.929 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:30:16.929 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 16:30:16.935 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:30:16.935 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 16:30:16.940 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 16:30:16.943 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 16:30:16.946 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:16 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:17.069 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51707
2025-12-21 16:30:17.071 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51710
2025-12-21 16:30:17.087 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:30:17.088 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:17 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:17.088 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:30:17.168 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51712
2025-12-21 16:30:17.169 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51715
2025-12-21 16:30:17.183 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:30:17.184 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:17 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:17.184 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:30:17.254 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51717
2025-12-21 16:30:17.255 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51720
2025-12-21 16:30:17.267 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:30:17.268 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:17 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:17.268 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:30:17.337 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51722
2025-12-21 16:30:17.338 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51725
2025-12-21 16:30:17.350 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 16:30:17.351 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 16:30:17.358 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 16:30:17.358 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 16:30:17.364 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 16:30:17.366 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:17 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:17.366 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 16:30:17.493 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51729
2025-12-21 16:30:17.495 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51732
2025-12-21 16:30:17.512 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 16:30:17.512 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 16:30:17.518 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 16:30:17.519 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:17 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:17.520 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 16:30:17.619 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51735
2025-12-21 16:30:17.620 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51738
2025-12-21 16:30:17.632 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 16:30:17.633 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:17 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:17.633 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 16:30:17.773 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51740
2025-12-21 16:30:17.775 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51743
2025-12-21 16:30:17.797 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:30:17.799 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:17 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:17.799 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:30:17.920 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51745
2025-12-21 16:30:17.922 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51748
2025-12-21 16:30:17.942 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 16:30:17.943 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:17 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:17.943 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:30:18.068 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51750
2025-12-21 16:30:18.069 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51754
2025-12-21 16:30:18.082 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 16:30:18.083 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:18 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:18.083 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:30:18.187 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51756
2025-12-21 16:30:18.189 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51759
2025-12-21 16:30:18.199 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 16:30:18.200 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:30:18 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:30:18.201 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:38:38.077 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60633
2025-12-21 16:38:38.093 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60636
2025-12-21 16:38:40.071 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:40 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:41.263 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60638
2025-12-21 16:38:41.264 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60641
2025-12-21 16:38:41.368 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 16:38:41.388 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:41 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:41.388 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 16:38:41.517 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60643
2025-12-21 16:38:41.518 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60646
2025-12-21 16:38:41.559 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:38:41.560 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 16:38:41.884 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 16:38:41.884 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 16:38:41.886 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:41 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:41.886 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:38:42.009 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60649
2025-12-21 16:38:42.011 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60652
2025-12-21 16:38:42.023 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:38:42.024 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 16:38:42.031 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 16:38:42.033 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 16:38:42.035 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:42.035 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:38:42.152 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60655
2025-12-21 16:38:42.154 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60658
2025-12-21 16:38:42.169 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 16:38:42.169 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 16:38:42.171 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:42 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:42.264 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60660
2025-12-21 16:38:42.266 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60663
2025-12-21 16:38:42.279 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 16:38:42.280 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 16:38:42.286 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 16:38:42.287 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:42.288 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 16:38:42.541 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60666
2025-12-21 16:38:42.542 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60669
2025-12-21 16:38:42.556 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:38:42.557 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:42.557 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:38:42.674 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60671
2025-12-21 16:38:42.676 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60674
2025-12-21 16:38:42.689 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 16:38:42.690 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:38:42.714 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 16:38:42.714 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 16:38:42.722 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 16:38:42.723 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:42.723 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 16:38:42.857 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60678
2025-12-21 16:38:42.858 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60681
2025-12-21 16:38:42.872 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 16:38:42.873 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:38:42.882 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:38:42.883 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 16:38:42.888 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:38:42.889 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 16:38:42.894 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 16:38:42.898 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 16:38:42.901 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:42 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:42.991 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60684
2025-12-21 16:38:42.993 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60687
2025-12-21 16:38:43.013 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:38:43.014 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:43.014 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:38:43.116 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60689
2025-12-21 16:38:43.117 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60692
2025-12-21 16:38:43.130 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:38:43.131 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:43.131 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:38:43.200 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60694
2025-12-21 16:38:43.201 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60697
2025-12-21 16:38:43.216 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:38:43.217 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:43.217 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:38:43.303 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60699
2025-12-21 16:38:43.305 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60702
2025-12-21 16:38:43.316 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 16:38:43.317 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 16:38:43.326 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 16:38:43.327 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 16:38:43.334 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 16:38:43.335 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:43.335 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 16:38:43.479 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60706
2025-12-21 16:38:43.481 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60709
2025-12-21 16:38:43.492 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 16:38:43.493 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 16:38:43.506 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 16:38:43.507 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:43.507 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 16:38:43.600 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60712
2025-12-21 16:38:43.601 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60715
2025-12-21 16:38:43.613 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 16:38:43.613 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:43.614 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 16:38:43.747 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60717
2025-12-21 16:38:43.749 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60720
2025-12-21 16:38:43.780 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:38:43.782 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:43.782 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:38:43.900 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50524
2025-12-21 16:38:43.901 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50527
2025-12-21 16:38:43.913 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 16:38:43.914 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:43.915 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:38:44.040 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50529
2025-12-21 16:38:44.042 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50532
2025-12-21 16:38:44.053 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 16:38:44.054 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:44 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:44.054 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:38:44.148 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50534
2025-12-21 16:38:44.150 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50537
2025-12-21 16:38:44.161 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 16:38:44.162 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:38:44 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:38:44.162 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:42:14.752 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52229
2025-12-21 16:42:14.775 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52232
2025-12-21 16:42:17.382 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:17 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:18.568 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52235
2025-12-21 16:42:18.569 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52238
2025-12-21 16:42:18.728 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 16:42:18.753 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:18 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:18.754 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 16:42:18.901 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52240
2025-12-21 16:42:18.902 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52243
2025-12-21 16:42:18.939 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:42:18.939 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 16:42:19.263 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 16:42:19.263 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 16:42:19.265 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:18 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:19.265 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:42:19.370 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58939
2025-12-21 16:42:19.372 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58942
2025-12-21 16:42:19.384 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:42:19.385 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 16:42:19.392 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 16:42:19.394 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 16:42:19.395 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:19.395 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:42:19.520 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58945
2025-12-21 16:42:19.522 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58948
2025-12-21 16:42:19.536 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 16:42:19.537 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 16:42:19.546 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 16:42:19.548 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:19.548 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 16:42:19.851 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58951
2025-12-21 16:42:19.852 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58954
2025-12-21 16:42:19.869 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:42:19.870 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:19.871 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:42:19.989 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58956
2025-12-21 16:42:19.990 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58959
2025-12-21 16:42:20.007 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 16:42:20.007 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:42:20.028 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 16:42:20.028 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 16:42:20.035 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 16:42:20.036 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:20 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:20.037 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 16:42:20.153 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58963
2025-12-21 16:42:20.154 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58966
2025-12-21 16:42:20.172 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 16:42:20.173 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:42:20.179 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:42:20.179 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 16:42:20.183 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:42:20.183 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 16:42:20.188 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 16:42:20.191 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 16:42:20.197 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:20 GMT] "POST /v1/points/quote HTTP/1.1" 500 122 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:20.296 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58969
2025-12-21 16:42:20.298 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58972
2025-12-21 16:42:20.310 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:42:20.311 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:20 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:20.311 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:42:20.390 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58974
2025-12-21 16:42:20.392 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58977
2025-12-21 16:42:20.406 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:42:20.407 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:20 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:20.407 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:42:20.474 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58979
2025-12-21 16:42:20.475 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58982
2025-12-21 16:42:20.486 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:42:20.487 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:20 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:20.487 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:42:20.558 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58984
2025-12-21 16:42:20.558 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58987
2025-12-21 16:42:20.570 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 16:42:20.571 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 16:42:20.578 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 16:42:20.579 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 16:42:20.586 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 16:42:20.587 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:20 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:20.587 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 16:42:20.710 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58991
2025-12-21 16:42:20.711 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58994
2025-12-21 16:42:20.724 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 16:42:20.724 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 16:42:20.731 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 16:42:20.732 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:20 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:20.733 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 16:42:20.825 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58997
2025-12-21 16:42:20.827 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59000
2025-12-21 16:42:20.843 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 16:42:20.843 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:20 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:20.844 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 16:42:20.952 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59002
2025-12-21 16:42:20.953 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59005
2025-12-21 16:42:20.973 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:42:20.974 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:20 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:20.975 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:42:21.094 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59007
2025-12-21 16:42:21.095 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59010
2025-12-21 16:42:21.106 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 16:42:21.107 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:21 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:21.107 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:42:21.211 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59012
2025-12-21 16:42:21.212 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59015
2025-12-21 16:42:21.221 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 16:42:21.222 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:21 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:21.222 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:42:21.336 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59017
2025-12-21 16:42:21.336 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59020
2025-12-21 16:42:21.349 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 16:42:21.350 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:42:21 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:42:21.350 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:51:43.078 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55251
2025-12-21 16:51:43.090 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55254
2025-12-21 16:51:45.159 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:45 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:46.447 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55256
2025-12-21 16:51:46.449 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55259
2025-12-21 16:51:46.671 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 16:51:46.706 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:46 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:46.706 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 16:51:46.852 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55261
2025-12-21 16:51:46.853 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55264
2025-12-21 16:51:46.893 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:51:46.893 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 16:51:47.227 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 16:51:47.227 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 16:51:47.229 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:46 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:47.229 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:51:47.338 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55267
2025-12-21 16:51:47.339 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55270
2025-12-21 16:51:47.352 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:51:47.352 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 16:51:47.361 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 16:51:47.364 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 16:51:47.365 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:47 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:47.366 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:51:47.487 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55273
2025-12-21 16:51:47.489 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55276
2025-12-21 16:51:47.504 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 16:51:47.504 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 16:51:47.513 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 16:51:47.514 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:47 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:47.515 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 16:51:47.801 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55279
2025-12-21 16:51:47.803 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55282
2025-12-21 16:51:47.822 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:51:47.823 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:47 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:47.823 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:51:47.933 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55284
2025-12-21 16:51:47.934 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55287
2025-12-21 16:51:47.949 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 16:51:47.950 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:51:47.967 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 16:51:47.968 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 16:51:47.974 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 16:51:47.975 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:47 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:47.975 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 16:51:48.100 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55291
2025-12-21 16:51:48.101 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55294
2025-12-21 16:51:48.112 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 16:51:48.113 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 16:51:48.119 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:51:48.119 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 16:51:48.124 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 16:51:48.124 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 16:51:48.129 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 16:51:48.134 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 16:51:48.139 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:48 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:48.242 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55297
2025-12-21 16:51:48.243 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55300
2025-12-21 16:51:48.257 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:51:48.262 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:48 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:48.262 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:51:48.366 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55302
2025-12-21 16:51:48.367 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55305
2025-12-21 16:51:48.384 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:51:48.386 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:48 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:48.386 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:51:48.473 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55307
2025-12-21 16:51:48.475 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55310
2025-12-21 16:51:48.488 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:51:48.488 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:48 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:48.489 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:51:48.613 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55312
2025-12-21 16:51:48.613 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55315
2025-12-21 16:51:48.640 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:51:48.641 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:48 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:48.641 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 16:51:48.747 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55317
2025-12-21 16:51:48.748 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55320
2025-12-21 16:51:48.766 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:51:48.767 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:48 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:48.768 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:51:48.860 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55322
2025-12-21 16:51:48.862 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55325
2025-12-21 16:51:48.873 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:51:48.874 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:48 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:48.874 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 16:51:48.953 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55327
2025-12-21 16:51:48.955 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55330
2025-12-21 16:51:48.967 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:51:48.968 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:48 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:48.968 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 16:51:49.055 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55332
2025-12-21 16:51:49.056 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55335
2025-12-21 16:51:49.072 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 16:51:49.072 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 16:51:49.078 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 16:51:49.078 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 16:51:49.083 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 16:51:49.084 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:49.084 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 16:51:49.211 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55339
2025-12-21 16:51:49.213 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55342
2025-12-21 16:51:49.226 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 16:51:49.226 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 16:51:49.232 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 16:51:49.233 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:49.233 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 16:51:49.316 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55345
2025-12-21 16:51:49.316 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55348
2025-12-21 16:51:49.326 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 16:51:49.327 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:49.327 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 16:51:49.428 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55350
2025-12-21 16:51:49.429 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55353
2025-12-21 16:51:49.440 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 16:51:49.441 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:49.441 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:51:49.531 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55355
2025-12-21 16:51:49.533 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55358
2025-12-21 16:51:49.553 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 16:51:49.556 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:49.556 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:51:49.664 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55360
2025-12-21 16:51:49.665 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55363
2025-12-21 16:51:49.675 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 16:51:49.676 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:49.676 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 16:51:49.764 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55365
2025-12-21 16:51:49.765 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55368
2025-12-21 16:51:49.777 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 16:51:49.778 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 16:51:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 16:51:49.778 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:01:57.555 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56675
2025-12-21 17:01:57.575 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56678
2025-12-21 17:01:59.642 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:01:59 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:00.825 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56680
2025-12-21 17:02:00.827 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56683
2025-12-21 17:02:01.043 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 17:02:01.077 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:00 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:01.077 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 17:02:01.205 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56685
2025-12-21 17:02:01.206 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56688
2025-12-21 17:02:01.240 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:02:01.240 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 17:02:01.588 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 17:02:01.589 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 17:02:01.592 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:01 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:01.592 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:02:01.718 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56691
2025-12-21 17:02:01.720 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56694
2025-12-21 17:02:01.735 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:02:01.736 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 17:02:01.744 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 17:02:01.747 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 17:02:01.749 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:01 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:01.749 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:02:01.864 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56697
2025-12-21 17:02:01.866 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56700
2025-12-21 17:02:01.881 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 17:02:01.881 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 17:02:01.887 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 17:02:01.888 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:01 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:01.888 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 17:02:02.171 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56703
2025-12-21 17:02:02.172 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56706
2025-12-21 17:02:02.186 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:02:02.187 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:02 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:02.187 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:02:02.279 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56708
2025-12-21 17:02:02.280 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56711
2025-12-21 17:02:02.294 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 17:02:02.294 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:02:02.319 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 17:02:02.319 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 17:02:02.326 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 17:02:02.327 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:02 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:02.328 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 17:02:02.463 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56715
2025-12-21 17:02:02.465 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56718
2025-12-21 17:02:02.479 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 17:02:02.479 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:02:02.487 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:02:02.488 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 17:02:02.494 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:02:02.495 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 17:02:02.499 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 17:02:02.504 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 17:02:02.511 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:02 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:02.638 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56721
2025-12-21 17:02:02.640 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56724
2025-12-21 17:02:02.655 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:02:02.656 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:02 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:02.656 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:02:02.751 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56726
2025-12-21 17:02:02.753 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56729
2025-12-21 17:02:02.768 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:02:02.769 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:02 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:02.769 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:02:02.846 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:56731
2025-12-21 17:02:02.846 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 56734
2025-12-21 17:02:02.857 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:02:02.858 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:02 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:02.858 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:02:02.964 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52725
2025-12-21 17:02:02.965 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52728
2025-12-21 17:02:03.003 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:02:03.004 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:03.004 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:02:03.134 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52730
2025-12-21 17:02:03.135 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52733
2025-12-21 17:02:03.151 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:02:03.152 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:03.153 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:02:03.239 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52735
2025-12-21 17:02:03.241 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52738
2025-12-21 17:02:03.253 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:02:03.254 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:03.255 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:02:03.338 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52740
2025-12-21 17:02:03.339 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52743
2025-12-21 17:02:03.354 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:02:03.355 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:03.355 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 17:02:03.459 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52745
2025-12-21 17:02:03.460 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52748
2025-12-21 17:02:03.472 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 17:02:03.473 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 17:02:03.474 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:03 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:03.561 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52750
2025-12-21 17:02:03.562 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52753
2025-12-21 17:02:03.573 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 17:02:03.573 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 17:02:03.582 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 17:02:03.582 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 17:02:03.587 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 17:02:03.589 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:03.589 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 17:02:03.751 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52757
2025-12-21 17:02:03.752 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52760
2025-12-21 17:02:03.765 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 17:02:03.765 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 17:02:03.772 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 17:02:03.773 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:03.773 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 17:02:03.878 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52763
2025-12-21 17:02:03.879 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52766
2025-12-21 17:02:03.889 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 17:02:03.890 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:03.890 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 17:02:03.987 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50698
2025-12-21 17:02:03.989 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50701
2025-12-21 17:02:04.000 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:02:04.001 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:04.001 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:02:04.096 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50703
2025-12-21 17:02:04.097 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50706
2025-12-21 17:02:04.107 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 17:02:04.108 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:04 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:04.108 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:02:04.219 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50708
2025-12-21 17:02:04.220 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50711
2025-12-21 17:02:04.234 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 17:02:04.235 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:04 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:04.235 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:02:04.320 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50713
2025-12-21 17:02:04.321 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50716
2025-12-21 17:02:04.330 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 17:02:04.331 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:04 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:02:04.331 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:02:57.954 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58477
2025-12-21 17:02:57.982 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58480
2025-12-21 17:02:59.954 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:02:59 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:01.333 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50304
2025-12-21 17:03:01.335 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50307
2025-12-21 17:03:01.560 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 17:03:01.624 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:01 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:01.624 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 17:03:01.767 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50309
2025-12-21 17:03:01.769 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50312
2025-12-21 17:03:01.825 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:01.826 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 17:03:02.158 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 17:03:02.158 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 17:03:02.160 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:01 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:02.160 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:03:02.271 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50315
2025-12-21 17:03:02.272 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50318
2025-12-21 17:03:02.291 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:02.291 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 17:03:02.299 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 17:03:02.301 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 17:03:02.302 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:02 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:02.303 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:03:02.429 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50321
2025-12-21 17:03:02.431 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50324
2025-12-21 17:03:02.449 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 17:03:02.449 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 17:03:02.455 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 17:03:02.457 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:02 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:02.457 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 17:03:02.769 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50327
2025-12-21 17:03:02.770 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50330
2025-12-21 17:03:02.791 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:02.792 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:02 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:02.792 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:03:02.913 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50332
2025-12-21 17:03:02.914 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50335
2025-12-21 17:03:02.936 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 17:03:02.936 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:03:02.959 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 17:03:02.959 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 17:03:02.967 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 17:03:02.969 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:02 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:02.969 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 17:03:03.110 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58953
2025-12-21 17:03:03.111 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58956
2025-12-21 17:03:03.125 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 17:03:03.125 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:03:03.132 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:03:03.132 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 17:03:03.137 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:03:03.138 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 17:03:03.142 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$0(FxServiceClient.java:59)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 17:03:03.147 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$0(FxServiceClient.java:59)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 17:03:03.156 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:03 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:03.255 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58959
2025-12-21 17:03:03.257 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58962
2025-12-21 17:03:03.270 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:03.271 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:03.271 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:03:03.385 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58964
2025-12-21 17:03:03.388 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58967
2025-12-21 17:03:03.410 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:03.411 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:03.412 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:03:03.504 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58969
2025-12-21 17:03:03.506 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58972
2025-12-21 17:03:03.521 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:03.522 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:03.522 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:03:03.636 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58974
2025-12-21 17:03:03.638 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58977
2025-12-21 17:03:03.662 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:03.662 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:03.663 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:03:03.756 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58979
2025-12-21 17:03:03.757 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58982
2025-12-21 17:03:03.771 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:03.771 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:03.772 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:03:03.861 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58984
2025-12-21 17:03:03.862 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58987
2025-12-21 17:03:03.872 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:03.873 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:03.873 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:03:03.961 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58989
2025-12-21 17:03:03.963 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58992
2025-12-21 17:03:03.974 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:03.976 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:03 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:03.976 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 17:03:04.068 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52598
2025-12-21 17:03:04.069 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52601
2025-12-21 17:03:04.085 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 17:03:04.085 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 17:03:04.086 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:04 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:04.195 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52603
2025-12-21 17:03:04.196 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52606
2025-12-21 17:03:04.209 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 17:03:04.209 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 17:03:04.216 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 17:03:04.216 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 17:03:04.221 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 17:03:04.222 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:04 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:04.223 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 17:03:04.343 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52610
2025-12-21 17:03:04.344 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52613
2025-12-21 17:03:04.355 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 17:03:04.356 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 17:03:04.361 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 17:03:04.362 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:04 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:04.362 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 17:03:04.484 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52617
2025-12-21 17:03:04.486 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52620
2025-12-21 17:03:04.496 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 17:03:04.497 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:04 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:04.497 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 17:03:04.607 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52622
2025-12-21 17:03:04.608 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52625
2025-12-21 17:03:04.627 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:04.628 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:04 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:04.628 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:03:04.783 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52627
2025-12-21 17:03:04.785 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52630
2025-12-21 17:03:04.806 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 17:03:04.807 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:04 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:04.807 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:03:04.916 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52632
2025-12-21 17:03:04.918 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52635
2025-12-21 17:03:04.934 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 17:03:04.935 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:04 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:04.935 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:03:05.023 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54716
2025-12-21 17:03:05.024 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54719
2025-12-21 17:03:05.034 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 17:03:05.035 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:05 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:05.035 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:03:53.027 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:57732
2025-12-21 17:03:53.040 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 57735
2025-12-21 17:03:54.880 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:54 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:56.118 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50534
2025-12-21 17:03:56.119 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50537
2025-12-21 17:03:56.334 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 17:03:56.371 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:56.371 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 17:03:56.503 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50539
2025-12-21 17:03:56.505 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50542
2025-12-21 17:03:56.545 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:56.546 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 17:03:56.888 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 17:03:56.889 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 17:03:56.892 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:56.893 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:03:56.995 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50545
2025-12-21 17:03:56.996 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50548
2025-12-21 17:03:57.010 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:57.010 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 17:03:57.016 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 17:03:57.018 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 17:03:57.020 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:57.020 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:03:57.118 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50551
2025-12-21 17:03:57.119 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50554
2025-12-21 17:03:57.133 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 17:03:57.133 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 17:03:57.139 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 17:03:57.140 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:57.140 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 17:03:57.379 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50557
2025-12-21 17:03:57.380 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50560
2025-12-21 17:03:57.392 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:57.393 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:57.393 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:03:57.491 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50562
2025-12-21 17:03:57.494 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50565
2025-12-21 17:03:57.512 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 17:03:57.512 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:03:57.529 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 17:03:57.530 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 17:03:57.536 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 17:03:57.537 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:57.537 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 17:03:57.657 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50569
2025-12-21 17:03:57.658 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50572
2025-12-21 17:03:57.669 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 17:03:57.669 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:03:57.676 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:03:57.676 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 17:03:57.681 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:03:57.682 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 17:03:57.686 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$0(FxServiceClient.java:59)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 17:03:57.689 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$0(FxServiceClient.java:59)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 17:03:57.694 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:57 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:57.794 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50575
2025-12-21 17:03:57.795 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50578
2025-12-21 17:03:57.816 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:57.817 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:57.817 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:03:57.887 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50580
2025-12-21 17:03:57.888 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50583
2025-12-21 17:03:57.901 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:57.902 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:57.902 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:03:57.965 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50585
2025-12-21 17:03:57.966 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50588
2025-12-21 17:03:57.977 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:57.978 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:57.978 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:03:58.073 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50590
2025-12-21 17:03:58.075 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50593
2025-12-21 17:03:58.096 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:58.097 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:58.097 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:03:58.196 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50595
2025-12-21 17:03:58.197 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50598
2025-12-21 17:03:58.207 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:58.207 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:58.208 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:03:58.288 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50600
2025-12-21 17:03:58.289 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50603
2025-12-21 17:03:58.302 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:58.303 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:58.303 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:03:58.388 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50605
2025-12-21 17:03:58.389 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50608
2025-12-21 17:03:58.401 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:58.402 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:58.402 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 17:03:58.486 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50610
2025-12-21 17:03:58.487 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50613
2025-12-21 17:03:58.497 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 17:03:58.499 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 17:03:58.499 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:58 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:58.573 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50615
2025-12-21 17:03:58.574 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50618
2025-12-21 17:03:58.584 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 17:03:58.584 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 17:03:58.590 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 17:03:58.590 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 17:03:58.595 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 17:03:58.596 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:58.597 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 17:03:58.730 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50622
2025-12-21 17:03:58.731 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50625
2025-12-21 17:03:58.744 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 17:03:58.744 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 17:03:58.751 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 17:03:58.752 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:58.752 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 17:03:58.841 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50628
2025-12-21 17:03:58.842 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50631
2025-12-21 17:03:58.852 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 17:03:58.853 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:58.853 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 17:03:58.968 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50633
2025-12-21 17:03:58.969 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50636
2025-12-21 17:03:58.982 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:03:58.983 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:58.983 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:03:59.082 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50638
2025-12-21 17:03:59.083 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50641
2025-12-21 17:03:59.093 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 17:03:59.094 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:59 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:59.094 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:03:59.189 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50643
2025-12-21 17:03:59.189 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50646
2025-12-21 17:03:59.203 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 17:03:59.204 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:59 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:59.204 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:03:59.286 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50648
2025-12-21 17:03:59.287 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50651
2025-12-21 17:03:59.296 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 17:03:59.297 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:03:59 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:03:59.297 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:04:18.111 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60871
2025-12-21 17:04:18.121 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60874
2025-12-21 17:04:20.154 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:20 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:21.436 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60878
2025-12-21 17:04:21.437 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60881
2025-12-21 17:04:21.667 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 17:04:21.693 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:21 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:21.693 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 17:04:21.847 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60883
2025-12-21 17:04:21.848 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60886
2025-12-21 17:04:21.886 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:04:21.886 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 17:04:22.230 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 17:04:22.230 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 17:04:22.232 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:21 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:22.232 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:04:22.331 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60889
2025-12-21 17:04:22.332 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60892
2025-12-21 17:04:22.359 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:04:22.360 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 17:04:22.368 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 17:04:22.370 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 17:04:22.371 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:22.372 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:04:22.493 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60895
2025-12-21 17:04:22.495 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60898
2025-12-21 17:04:22.511 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 17:04:22.512 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 17:04:22.520 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 17:04:22.522 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:22.522 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 17:04:22.828 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60901
2025-12-21 17:04:22.829 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60904
2025-12-21 17:04:22.844 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:04:22.846 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:22.846 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:04:22.948 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60906
2025-12-21 17:04:22.950 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60909
2025-12-21 17:04:22.973 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 17:04:22.974 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:04:22.991 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 17:04:22.992 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 17:04:22.999 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 17:04:23.000 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:23.000 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 17:04:23.134 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60913
2025-12-21 17:04:23.135 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60916
2025-12-21 17:04:23.147 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 17:04:23.147 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:04:23.153 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:04:23.153 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 17:04:23.160 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:04:23.160 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 17:04:23.164 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 17:04:23.168 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 17:04:23.172 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:23 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:23.279 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60919
2025-12-21 17:04:23.281 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60922
2025-12-21 17:04:23.293 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:04:23.294 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:23.294 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:04:23.384 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60924
2025-12-21 17:04:23.385 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60927
2025-12-21 17:04:23.409 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:04:23.410 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:23.410 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:04:23.490 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60929
2025-12-21 17:04:23.491 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60932
2025-12-21 17:04:23.503 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:04:23.504 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:23.505 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:04:23.629 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60934
2025-12-21 17:04:23.631 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60937
2025-12-21 17:04:23.657 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:04:23.658 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:23.658 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:04:23.752 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60939
2025-12-21 17:04:23.753 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60942
2025-12-21 17:04:23.764 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:04:23.765 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:23.765 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:04:23.847 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60944
2025-12-21 17:04:23.848 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60947
2025-12-21 17:04:23.859 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:04:23.860 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:23.861 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:04:23.965 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60949
2025-12-21 17:04:23.967 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60952
2025-12-21 17:04:23.984 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:04:23.985 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:23.986 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 17:04:24.108 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60954
2025-12-21 17:04:24.109 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60957
2025-12-21 17:04:24.123 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 17:04:24.126 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 17:04:24.129 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:24 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:24.240 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60959
2025-12-21 17:04:24.241 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60962
2025-12-21 17:04:24.256 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 17:04:24.256 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 17:04:24.262 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 17:04:24.262 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 17:04:24.272 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 17:04:24.273 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:24.274 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 17:04:24.412 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60966
2025-12-21 17:04:24.414 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60969
2025-12-21 17:04:24.430 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 17:04:24.430 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 17:04:24.437 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 17:04:24.438 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:24.438 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 17:04:24.538 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54919
2025-12-21 17:04:24.540 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54922
2025-12-21 17:04:24.550 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 17:04:24.551 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:24.551 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 17:04:24.647 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62860
2025-12-21 17:04:24.648 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62863
2025-12-21 17:04:24.659 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:04:24.660 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:24.660 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:04:24.763 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62865
2025-12-21 17:04:24.764 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62868
2025-12-21 17:04:24.774 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 17:04:24.775 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:24.775 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:04:24.864 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62870
2025-12-21 17:04:24.865 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62873
2025-12-21 17:04:24.880 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 17:04:24.881 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:24.881 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:04:24.993 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:62875
2025-12-21 17:04:24.995 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 62878
2025-12-21 17:04:25.010 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 17:04:25.010 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:04:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:04:25.011 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:07:11.099 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64495
2025-12-21 17:07:11.111 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64498
2025-12-21 17:07:12.873 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:12 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:14.104 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64501
2025-12-21 17:07:14.105 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64504
2025-12-21 17:07:14.267 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 17:07:14.289 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:14.290 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 17:07:14.435 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64506
2025-12-21 17:07:14.437 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64509
2025-12-21 17:07:14.471 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:07:14.472 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 17:07:14.798 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 17:07:14.799 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 17:07:14.801 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:14.802 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:07:14.898 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64512
2025-12-21 17:07:14.899 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64515
2025-12-21 17:07:14.918 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:07:14.918 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 17:07:14.926 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 17:07:14.929 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 17:07:14.930 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:14 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:14.930 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:07:15.037 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64518
2025-12-21 17:07:15.038 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64521
2025-12-21 17:07:15.050 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 17:07:15.051 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 17:07:15.057 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 17:07:15.058 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:15 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:15.059 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 17:07:15.368 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64524
2025-12-21 17:07:15.370 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64527
2025-12-21 17:07:15.386 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:07:15.387 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:15 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:15.388 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:07:15.488 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64529
2025-12-21 17:07:15.489 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64532
2025-12-21 17:07:15.507 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 17:07:15.508 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:07:15.528 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 17:07:15.528 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 17:07:15.536 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 17:07:15.537 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:15 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:15.537 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 17:07:15.677 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64536
2025-12-21 17:07:15.678 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64539
2025-12-21 17:07:15.695 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 17:07:15.696 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:07:15.704 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:07:15.704 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 17:07:15.712 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:07:15.712 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 17:07:15.717 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 17:07:15.721 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 17:07:15.727 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:15 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:15.850 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64542
2025-12-21 17:07:15.852 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64545
2025-12-21 17:07:15.866 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:07:15.867 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:15 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:15.867 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:07:15.950 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64547
2025-12-21 17:07:15.951 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64550
2025-12-21 17:07:15.969 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:07:15.970 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:15 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:15.970 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:07:16.040 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64552
2025-12-21 17:07:16.041 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64555
2025-12-21 17:07:16.057 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:07:16.058 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:16 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:16.058 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:07:16.152 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64557
2025-12-21 17:07:16.153 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64560
2025-12-21 17:07:16.166 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 17:07:16.166 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 17:07:16.172 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 17:07:16.172 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 17:07:16.179 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 17:07:16.181 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:16 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:16.181 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 17:07:16.330 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64564
2025-12-21 17:07:16.332 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64567
2025-12-21 17:07:16.346 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 17:07:16.346 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 17:07:16.352 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 17:07:16.353 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:16 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:16.353 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 17:07:16.453 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64571
2025-12-21 17:07:16.455 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64574
2025-12-21 17:07:16.465 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 17:07:16.466 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:16 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:16.466 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 17:07:16.576 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64576
2025-12-21 17:07:16.578 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64579
2025-12-21 17:07:16.597 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:07:16.598 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:16 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:16.599 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:07:16.718 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64581
2025-12-21 17:07:16.719 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64584
2025-12-21 17:07:16.730 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 17:07:16.731 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:16 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:16.731 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:07:16.824 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64586
2025-12-21 17:07:16.825 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64589
2025-12-21 17:07:16.834 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 17:07:16.835 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:16 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:16.835 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:07:16.958 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64591
2025-12-21 17:07:16.959 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64594
2025-12-21 17:07:16.970 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 17:07:16.971 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:16 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:16.971 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:07:17.075 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64596
2025-12-21 17:07:17.076 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64599
2025-12-21 17:07:17.087 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in NONE
2025-12-21 17:07:17.088 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: NONE
2025-12-21 17:07:17.088 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:17 GMT] "POST /v1/points/quote HTTP/1.1" 400 111 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:17.172 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64601
2025-12-21 17:07:17.173 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64604
2025-12-21 17:07:17.183 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in SILVER
2025-12-21 17:07:17.184 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: SILVER
2025-12-21 17:07:17.184 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:17 GMT] "POST /v1/points/quote HTTP/1.1" 400 113 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:17.249 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64606
2025-12-21 17:07:17.250 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64609
2025-12-21 17:07:17.260 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in GOLD
2025-12-21 17:07:17.260 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: GOLD
2025-12-21 17:07:17.261 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:17 GMT] "POST /v1/points/quote HTTP/1.1" 400 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:07:17.313 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64611
2025-12-21 17:07:17.314 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64614
2025-12-21 17:07:17.326 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PLATINUM
2025-12-21 17:07:17.326 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: PLATINUM
2025-12-21 17:07:17.327 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:07:17 GMT] "POST /v1/points/quote HTTP/1.1" 400 112 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:17.519 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63269
2025-12-21 17:08:17.533 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63272
2025-12-21 17:08:19.467 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:19 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:20.615 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63274
2025-12-21 17:08:20.617 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63277
2025-12-21 17:08:20.777 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 17:08:20.802 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:20 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:20.803 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 17:08:20.931 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63279
2025-12-21 17:08:20.932 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63282
2025-12-21 17:08:20.969 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:08:20.969 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 17:08:21.285 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 17:08:21.285 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 17:08:21.286 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:20 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:21.286 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:08:21.383 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63285
2025-12-21 17:08:21.385 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63288
2025-12-21 17:08:21.398 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:08:21.398 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 17:08:21.406 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 17:08:21.408 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 17:08:21.409 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:21 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:21.409 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:08:21.514 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63291
2025-12-21 17:08:21.515 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63294
2025-12-21 17:08:21.533 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 17:08:21.534 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 17:08:21.541 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 17:08:21.543 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:21 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:21.543 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 17:08:21.840 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63297
2025-12-21 17:08:21.841 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63300
2025-12-21 17:08:21.856 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:08:21.857 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:21 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:21.858 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:08:21.968 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63302
2025-12-21 17:08:21.969 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63305
2025-12-21 17:08:21.984 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 17:08:21.985 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:08:22.004 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 17:08:22.004 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 17:08:22.009 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 17:08:22.010 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:21 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:22.010 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 17:08:22.127 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63309
2025-12-21 17:08:22.128 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63312
2025-12-21 17:08:22.139 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 17:08:22.140 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:08:22.147 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:08:22.148 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 17:08:22.153 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:08:22.153 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 17:08:22.159 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 17:08:22.162 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 17:08:22.167 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:22 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:22.283 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63315
2025-12-21 17:08:22.285 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63318
2025-12-21 17:08:22.299 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:08:22.300 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:22.300 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:08:22.385 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63320
2025-12-21 17:08:22.386 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63323
2025-12-21 17:08:22.401 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:08:22.402 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:22.402 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:08:22.487 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63325
2025-12-21 17:08:22.489 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63328
2025-12-21 17:08:22.501 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:08:22.502 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:22.502 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:08:22.577 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63330
2025-12-21 17:08:22.579 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63333
2025-12-21 17:08:22.592 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 17:08:22.593 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 17:08:22.600 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 17:08:22.601 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 17:08:22.607 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 17:08:22.609 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:22.609 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 17:08:22.765 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63337
2025-12-21 17:08:22.766 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63340
2025-12-21 17:08:22.782 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 17:08:22.782 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 17:08:22.790 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 17:08:22.791 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:22.792 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 17:08:22.906 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63343
2025-12-21 17:08:22.908 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63346
2025-12-21 17:08:22.923 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 17:08:22.924 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:22.924 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 17:08:23.046 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63348
2025-12-21 17:08:23.047 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63351
2025-12-21 17:08:23.067 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:08:23.068 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:23.068 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:08:23.177 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63353
2025-12-21 17:08:23.178 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63356
2025-12-21 17:08:23.189 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 17:08:23.190 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:23.190 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:08:23.291 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63358
2025-12-21 17:08:23.292 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63361
2025-12-21 17:08:23.301 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 17:08:23.302 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:23.302 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:08:23.421 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63363
2025-12-21 17:08:23.422 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63366
2025-12-21 17:08:23.433 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 17:08:23.434 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:23.434 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:08:23.536 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63368
2025-12-21 17:08:23.537 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63371
2025-12-21 17:08:23.549 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:08:23.550 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:23.550 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:08:23.657 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63373
2025-12-21 17:08:23.657 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63376
2025-12-21 17:08:23.667 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:08:23.668 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:23.668 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:08:23.768 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63378
2025-12-21 17:08:23.769 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63381
2025-12-21 17:08:23.778 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:08:23.779 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:23.779 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:08:23.855 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63383
2025-12-21 17:08:23.856 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63386
2025-12-21 17:08:23.866 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:08:23.867 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:08:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:08:23.867 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 17:09:51.338 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63397
2025-12-21 17:09:51.347 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63400
2025-12-21 17:09:53.344 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:53 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:54.696 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63404
2025-12-21 17:09:54.697 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63407
2025-12-21 17:09:54.874 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 17:09:54.911 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:54 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:54.911 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 17:09:55.050 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:63409
2025-12-21 17:09:55.051 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 63412
2025-12-21 17:09:55.087 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:09:55.088 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 17:09:55.439 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 17:09:55.440 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 17:09:55.442 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:55.442 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:09:55.550 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49758
2025-12-21 17:09:55.552 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49761
2025-12-21 17:09:55.565 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:09:55.566 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 17:09:55.572 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 17:09:55.574 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 17:09:55.575 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:55.575 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:09:55.691 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49764
2025-12-21 17:09:55.693 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49767
2025-12-21 17:09:55.706 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 17:09:55.707 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 17:09:55.714 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 17:09:55.716 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:55 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:55.716 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 17:09:56.000 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49770
2025-12-21 17:09:56.002 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49773
2025-12-21 17:09:56.016 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:09:56.018 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:56.018 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:09:56.122 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49775
2025-12-21 17:09:56.123 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49778
2025-12-21 17:09:56.138 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 17:09:56.138 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:09:56.157 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 17:09:56.157 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 17:09:56.165 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 17:09:56.166 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:56.166 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 17:09:56.313 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49782
2025-12-21 17:09:56.316 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49785
2025-12-21 17:09:56.330 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 17:09:56.330 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:09:56.336 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:09:56.336 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 17:09:56.343 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:09:56.344 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 17:09:56.348 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 17:09:56.352 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 17:09:56.357 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:56 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:56.488 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49788
2025-12-21 17:09:56.489 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49791
2025-12-21 17:09:56.507 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:09:56.508 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:56.508 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:09:56.594 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49793
2025-12-21 17:09:56.596 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49796
2025-12-21 17:09:56.620 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:09:56.621 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:56.621 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:09:56.700 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49798
2025-12-21 17:09:56.701 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49801
2025-12-21 17:09:56.715 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:09:56.716 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:56.716 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:09:56.816 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49803
2025-12-21 17:09:56.817 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49806
2025-12-21 17:09:56.832 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 17:09:56.832 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 17:09:56.839 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 17:09:56.840 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 17:09:56.847 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 17:09:56.848 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:56 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:56.848 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 17:09:56.993 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49810
2025-12-21 17:09:56.994 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49813
2025-12-21 17:09:57.005 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 17:09:57.005 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 17:09:57.011 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 17:09:57.012 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:57.012 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 17:09:57.098 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49816
2025-12-21 17:09:57.100 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49819
2025-12-21 17:09:57.110 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 17:09:57.112 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:57.112 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 17:09:57.249 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49821
2025-12-21 17:09:57.251 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49824
2025-12-21 17:09:57.276 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:09:57.277 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:57.277 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:09:57.382 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49826
2025-12-21 17:09:57.383 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49829
2025-12-21 17:09:57.395 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 17:09:57.396 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:57.396 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:09:57.498 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49831
2025-12-21 17:09:57.500 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49834
2025-12-21 17:09:57.511 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 17:09:57.512 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:57.512 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:09:57.615 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49836
2025-12-21 17:09:57.615 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49839
2025-12-21 17:09:57.626 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 17:09:57.627 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:57.628 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:09:57.732 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49841
2025-12-21 17:09:57.733 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49844
2025-12-21 17:09:57.746 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:09:57.747 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:57.747 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:09:57.818 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49846
2025-12-21 17:09:57.819 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49849
2025-12-21 17:09:57.828 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:09:57.829 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:57.829 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:09:57.915 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49851
2025-12-21 17:09:57.917 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49854
2025-12-21 17:09:57.930 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:09:57.932 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:57.932 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:09:58.017 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:49856
2025-12-21 17:09:58.018 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 49859
2025-12-21 17:09:58.035 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:09:58.036 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:09:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:09:58.036 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 17:10:21.502 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58511
2025-12-21 17:10:21.526 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58514
2025-12-21 17:10:23.394 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:23 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:24.615 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55112
2025-12-21 17:10:24.617 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55115
2025-12-21 17:10:24.800 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 17:10:24.824 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:24.824 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 17:10:24.954 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55117
2025-12-21 17:10:24.955 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55120
2025-12-21 17:10:24.987 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:10:24.987 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 17:10:25.307 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 17:10:25.307 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 17:10:25.309 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:25.309 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:10:25.404 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55123
2025-12-21 17:10:25.405 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55126
2025-12-21 17:10:25.419 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:10:25.419 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 17:10:25.427 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 17:10:25.430 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 17:10:25.431 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:25.432 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:10:25.568 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55129
2025-12-21 17:10:25.569 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55132
2025-12-21 17:10:25.582 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 17:10:25.582 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 17:10:25.589 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 17:10:25.590 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:25.590 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 17:10:25.883 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55135
2025-12-21 17:10:25.885 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55138
2025-12-21 17:10:25.900 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:10:25.901 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:25.901 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:10:26.002 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55140
2025-12-21 17:10:26.003 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55143
2025-12-21 17:10:26.019 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 17:10:26.019 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:10:26.035 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 17:10:26.036 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 17:10:26.042 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 17:10:26.043 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:26.043 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 17:10:26.166 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55147
2025-12-21 17:10:26.168 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55150
2025-12-21 17:10:26.181 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 17:10:26.181 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:10:26.187 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:10:26.188 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 17:10:26.192 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:10:26.193 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 17:10:26.196 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 17:10:26.200 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 17:10:26.208 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:26 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:26.323 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55153
2025-12-21 17:10:26.324 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55156
2025-12-21 17:10:26.336 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:10:26.338 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:26.338 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:10:26.432 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55158
2025-12-21 17:10:26.433 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55161
2025-12-21 17:10:26.447 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:10:26.448 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:26.448 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:10:26.525 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55163
2025-12-21 17:10:26.526 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55166
2025-12-21 17:10:26.539 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:10:26.540 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:26.540 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:10:26.636 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55168
2025-12-21 17:10:26.637 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55171
2025-12-21 17:10:26.653 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 17:10:26.653 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 17:10:26.661 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 17:10:26.661 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 17:10:26.670 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 17:10:26.671 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:26.671 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 17:10:26.834 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55175
2025-12-21 17:10:26.835 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55178
2025-12-21 17:10:26.846 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 17:10:26.846 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 17:10:26.852 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 17:10:26.853 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:26.853 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 17:10:26.966 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55181
2025-12-21 17:10:26.968 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55184
2025-12-21 17:10:26.979 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 17:10:26.979 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:26.980 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 17:10:27.123 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55186
2025-12-21 17:10:27.125 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55189
2025-12-21 17:10:27.151 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:10:27.152 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:27.152 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:10:27.292 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55191
2025-12-21 17:10:27.293 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55194
2025-12-21 17:10:27.305 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 17:10:27.306 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:27.306 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:10:27.405 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55196
2025-12-21 17:10:27.406 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55199
2025-12-21 17:10:27.416 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 17:10:27.417 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:27.417 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:10:27.524 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55201
2025-12-21 17:10:27.526 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55204
2025-12-21 17:10:27.538 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 17:10:27.539 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:27.539 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:10:27.647 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55206
2025-12-21 17:10:27.648 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55209
2025-12-21 17:10:27.664 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:10:27.665 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:27.665 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:10:27.745 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55211
2025-12-21 17:10:27.747 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55214
2025-12-21 17:10:27.757 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:10:27.758 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:27.759 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:10:27.833 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55216
2025-12-21 17:10:27.835 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55219
2025-12-21 17:10:27.845 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:10:27.846 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:27.846 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:10:27.921 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55221
2025-12-21 17:10:27.922 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55224
2025-12-21 17:10:27.934 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:10:27.935 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:10:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:10:27.936 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 17:13:13.615 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60764
2025-12-21 17:13:13.626 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60767
2025-12-21 17:13:15.461 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:15 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:16.701 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60769
2025-12-21 17:13:16.703 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60772
2025-12-21 17:13:16.876 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 17:13:16.902 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:16 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:16.903 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 17:13:17.023 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60774
2025-12-21 17:13:17.024 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60777
2025-12-21 17:13:17.057 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:13:17.057 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 17:13:17.364 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 17:13:17.364 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 17:13:17.366 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:17 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:17.367 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:13:17.463 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60780
2025-12-21 17:13:17.465 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60783
2025-12-21 17:13:17.481 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:13:17.481 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 17:13:17.493 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 17:13:17.494 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 17:13:17.496 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:17 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:17.496 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:13:17.603 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60786
2025-12-21 17:13:17.604 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60789
2025-12-21 17:13:17.618 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 17:13:17.618 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 17:13:17.626 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 17:13:17.627 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:17 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:17.627 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 17:13:17.896 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60792
2025-12-21 17:13:17.897 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60795
2025-12-21 17:13:17.910 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:13:17.911 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:17 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:17.911 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:13:18.010 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60797
2025-12-21 17:13:18.011 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60800
2025-12-21 17:13:18.028 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 17:13:18.028 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:13:18.046 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 17:13:18.046 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 17:13:18.053 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 17:13:18.054 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:18 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:18.054 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 17:13:18.170 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60804
2025-12-21 17:13:18.172 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60807
2025-12-21 17:13:18.183 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 17:13:18.183 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:13:18.190 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:13:18.190 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 17:13:18.195 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:13:18.195 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 17:13:18.199 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 17:13:18.202 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 17:13:18.207 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:18 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:18.345 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60810
2025-12-21 17:13:18.346 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60813
2025-12-21 17:13:18.360 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:13:18.361 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:18 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:18.361 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:13:18.444 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60815
2025-12-21 17:13:18.445 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60818
2025-12-21 17:13:18.467 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:13:18.468 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:18 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:18.468 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:13:18.537 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60820
2025-12-21 17:13:18.538 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60823
2025-12-21 17:13:18.557 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:13:18.559 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:18 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:18.559 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:13:18.653 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60825
2025-12-21 17:13:18.655 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60828
2025-12-21 17:13:18.669 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 17:13:18.670 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 17:13:18.671 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:18 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:18.778 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60830
2025-12-21 17:13:18.780 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60833
2025-12-21 17:13:18.802 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 17:13:18.803 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 17:13:18.813 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 17:13:18.814 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 17:13:18.821 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 17:13:18.822 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:18 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:18.823 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 17:13:18.995 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60838
2025-12-21 17:13:18.996 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60841
2025-12-21 17:13:19.008 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 17:13:19.008 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 17:13:19.014 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 17:13:19.015 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:19.015 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 17:13:19.134 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60844
2025-12-21 17:13:19.136 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60847
2025-12-21 17:13:19.162 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 17:13:19.163 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:19.164 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 17:13:19.303 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60849
2025-12-21 17:13:19.304 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60852
2025-12-21 17:13:19.337 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:13:19.338 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:19.338 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:13:19.465 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60854
2025-12-21 17:13:19.466 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60857
2025-12-21 17:13:19.478 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 17:13:19.479 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:19.479 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:13:19.574 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60859
2025-12-21 17:13:19.576 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60862
2025-12-21 17:13:19.588 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 17:13:19.589 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:19.589 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:13:19.698 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60864
2025-12-21 17:13:19.699 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60867
2025-12-21 17:13:19.709 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 17:13:19.710 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:19.710 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:13:19.808 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60869
2025-12-21 17:13:19.809 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60872
2025-12-21 17:13:19.820 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:13:19.821 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:19.821 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:13:19.915 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60874
2025-12-21 17:13:19.916 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60877
2025-12-21 17:13:19.931 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:13:19.932 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:19.932 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:13:20.007 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60879
2025-12-21 17:13:20.008 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60882
2025-12-21 17:13:20.019 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:13:20.019 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:20 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:20.019 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:13:20.093 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60884
2025-12-21 17:13:20.095 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60887
2025-12-21 17:13:20.104 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:13:20.105 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:20 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:20.105 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 17:13:55.259 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60892
2025-12-21 17:13:55.282 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60895
2025-12-21 17:13:57.358 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:57 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:58.606 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60897
2025-12-21 17:13:58.607 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60900
2025-12-21 17:13:58.765 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 17:13:58.799 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:58.799 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 17:13:58.925 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60902
2025-12-21 17:13:58.926 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60905
2025-12-21 17:13:58.963 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:13:58.963 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 17:13:59.271 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 17:13:59.271 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 17:13:59.273 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:59.273 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:13:59.378 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60908
2025-12-21 17:13:59.380 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60911
2025-12-21 17:13:59.396 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:13:59.396 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 17:13:59.404 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 17:13:59.406 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 17:13:59.407 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:59 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:59.407 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:13:59.537 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60914
2025-12-21 17:13:59.539 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60917
2025-12-21 17:13:59.559 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 17:13:59.559 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 17:13:59.568 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 17:13:59.570 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:59 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:59.570 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 17:13:59.879 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60920
2025-12-21 17:13:59.882 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60923
2025-12-21 17:13:59.897 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:13:59.898 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:13:59 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:13:59.898 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:14:00.008 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60925
2025-12-21 17:14:00.010 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60928
2025-12-21 17:14:00.033 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 17:14:00.034 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:14:00.061 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 17:14:00.062 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 17:14:00.069 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 17:14:00.070 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:14:00 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:14:00.071 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 17:14:00.216 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60932
2025-12-21 17:14:00.217 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60935
2025-12-21 17:14:00.232 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 17:14:00.232 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:14:00.241 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:14:00.241 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 17:14:00.246 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:14:00.247 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 17:14:00.254 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 17:14:00.257 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 17:14:00.263 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:14:00 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:14:00.391 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60938
2025-12-21 17:14:00.393 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60941
2025-12-21 17:14:00.410 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:14:00.411 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:14:00 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:14:00.411 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:14:00.504 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60943
2025-12-21 17:14:00.506 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60946
2025-12-21 17:14:00.523 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:14:00.524 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:14:00 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:14:00.525 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:14:00.606 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60948
2025-12-21 17:14:00.607 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60951
2025-12-21 17:14:00.620 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:14:00.621 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:14:00 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:14:00.621 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:14:00.714 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60953
2025-12-21 17:14:00.715 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60956
2025-12-21 17:14:00.728 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 17:14:00.729 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 17:14:00.730 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:14:00 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:14:00.812 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60958
2025-12-21 17:14:00.814 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60961
2025-12-21 17:14:00.833 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 17:14:00.834 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 17:14:00.843 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 17:14:00.844 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 17:14:00.851 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 17:14:00.853 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:14:00 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:14:00.854 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 17:14:01.009 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60965
2025-12-21 17:14:01.010 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60968
2025-12-21 17:14:01.024 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 17:14:01.024 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 17:14:01.031 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 17:14:01.032 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:14:01 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:14:01.032 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 17:14:01.129 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60971
2025-12-21 17:14:01.131 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60974
2025-12-21 17:14:01.146 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 17:14:01.147 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:14:01 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:14:01.147 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 17:14:01.301 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60976
2025-12-21 17:14:01.303 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60979
2025-12-21 17:14:01.326 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:14:01.327 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:14:01 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:14:01.328 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:14:01.449 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60981
2025-12-21 17:14:01.450 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60984
2025-12-21 17:14:01.463 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 17:14:01.464 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:14:01 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:14:01.465 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:14:01.579 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60986
2025-12-21 17:14:01.581 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60989
2025-12-21 17:14:01.595 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 17:14:01.596 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:14:01 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:14:01.596 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:14:01.708 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60991
2025-12-21 17:14:01.709 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60994
2025-12-21 17:14:01.723 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 17:14:01.724 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:14:01 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:14:01.724 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:14:01.866 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60996
2025-12-21 17:14:01.867 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60999
2025-12-21 17:14:01.880 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:14:01.881 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:14:01 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:14:01.881 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:14:01.967 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61001
2025-12-21 17:14:01.968 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61004
2025-12-21 17:14:01.979 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:14:01.980 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:14:01 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:14:01.981 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:14:02.069 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61006
2025-12-21 17:14:02.070 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61009
2025-12-21 17:14:02.084 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:14:02.085 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:14:02 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:14:02.085 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:14:02.164 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61011
2025-12-21 17:14:02.166 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61014
2025-12-21 17:14:02.177 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:14:02.178 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:14:02 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:14:02.179 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 17:15:25.341 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51753
2025-12-21 17:15:25.355 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51756
2025-12-21 17:15:27.184 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:27 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:28.423 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51758
2025-12-21 17:15:28.424 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51761
2025-12-21 17:15:28.586 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 17:15:28.621 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:28 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:28.622 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 17:15:28.749 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51763
2025-12-21 17:15:28.750 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51766
2025-12-21 17:15:28.787 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:15:28.787 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 17:15:29.092 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 17:15:29.092 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 17:15:29.094 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:28 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:29.094 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:15:29.184 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51769
2025-12-21 17:15:29.187 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51772
2025-12-21 17:15:29.200 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:15:29.201 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 17:15:29.208 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 17:15:29.211 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 17:15:29.213 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:29 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:29.213 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:15:29.322 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51775
2025-12-21 17:15:29.324 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51778
2025-12-21 17:15:29.338 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 17:15:29.339 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 17:15:29.342 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:29 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:29.442 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51780
2025-12-21 17:15:29.444 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51783
2025-12-21 17:15:29.460 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 17:15:29.460 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 17:15:29.468 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 17:15:29.469 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:29 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:29.470 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 17:15:29.737 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51786
2025-12-21 17:15:29.739 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51789
2025-12-21 17:15:29.756 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:15:29.757 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:29 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:29.758 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:15:29.860 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51791
2025-12-21 17:15:29.862 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51794
2025-12-21 17:15:29.877 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:15:29.878 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:29 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:29.879 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:15:29.990 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51796
2025-12-21 17:15:29.991 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51799
2025-12-21 17:15:30.004 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 17:15:30.004 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:15:30.030 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 17:15:30.030 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 17:15:30.037 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 17:15:30.039 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:30 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:30.040 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 17:15:30.188 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51803
2025-12-21 17:15:30.189 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51806
2025-12-21 17:15:30.204 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 17:15:30.205 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:15:30.214 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:15:30.214 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 17:15:30.220 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:15:30.220 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 17:15:30.226 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 17:15:30.232 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:58)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 17:15:30.235 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:30 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:30.349 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51809
2025-12-21 17:15:30.350 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51812
2025-12-21 17:15:30.364 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:15:30.365 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:30 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:30.365 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:15:30.443 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51814
2025-12-21 17:15:30.445 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51817
2025-12-21 17:15:30.463 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:15:30.464 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:30 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:30.464 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:15:30.552 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51819
2025-12-21 17:15:30.555 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51822
2025-12-21 17:15:30.567 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:15:30.568 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:30 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:30.568 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:15:30.638 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51824
2025-12-21 17:15:30.639 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51827
2025-12-21 17:15:30.654 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 17:15:30.654 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 17:15:30.655 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:30 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:30.733 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51829
2025-12-21 17:15:30.735 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51832
2025-12-21 17:15:30.749 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 17:15:30.749 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 17:15:30.757 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 17:15:30.757 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 17:15:30.763 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 17:15:30.764 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:30 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:30.764 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 17:15:30.900 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51836
2025-12-21 17:15:30.901 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51839
2025-12-21 17:15:30.914 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 17:15:30.914 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 17:15:30.921 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 17:15:30.922 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:30 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:30.922 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 17:15:31.017 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51842
2025-12-21 17:15:31.019 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51845
2025-12-21 17:15:31.029 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 17:15:31.030 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:31.031 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 17:15:31.177 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51847
2025-12-21 17:15:31.179 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51850
2025-12-21 17:15:31.220 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:15:31.221 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:31.221 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:15:31.324 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51852
2025-12-21 17:15:31.325 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51855
2025-12-21 17:15:31.336 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 17:15:31.337 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:31.337 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:15:31.429 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51857
2025-12-21 17:15:31.430 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51860
2025-12-21 17:15:31.440 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 17:15:31.441 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:31.441 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:15:31.549 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51862
2025-12-21 17:15:31.550 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51865
2025-12-21 17:15:31.559 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 17:15:31.560 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:31.560 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:15:31.651 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51867
2025-12-21 17:15:31.652 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51870
2025-12-21 17:15:31.666 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:15:31.667 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:31.667 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:15:31.738 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51872
2025-12-21 17:15:31.739 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51875
2025-12-21 17:15:31.748 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:15:31.749 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:31.749 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:15:31.827 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51877
2025-12-21 17:15:31.828 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51880
2025-12-21 17:15:31.838 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:15:31.839 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:31.839 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:15:31.908 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51882
2025-12-21 17:15:31.909 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51885
2025-12-21 17:15:31.921 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:15:31.922 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:15:31 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:15:31.922 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 17:17:43.589 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54208
2025-12-21 17:17:43.596 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54211
2025-12-21 17:17:45.397 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:45 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:46.641 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54213
2025-12-21 17:17:46.642 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54216
2025-12-21 17:17:46.805 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 17:17:46.840 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:46 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:46.840 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 17:17:46.959 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54218
2025-12-21 17:17:46.960 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54221
2025-12-21 17:17:46.993 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:17:46.994 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 17:17:47.306 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 17:17:47.306 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 17:17:47.308 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:46 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:47.308 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:17:47.403 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54224
2025-12-21 17:17:47.405 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54227
2025-12-21 17:17:47.421 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:17:47.421 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 17:17:47.428 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 17:17:47.431 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 17:17:47.432 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:47 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:47.432 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:17:47.542 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54230
2025-12-21 17:17:47.543 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54233
2025-12-21 17:17:47.556 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 17:17:47.557 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 17:17:47.561 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:47 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:47.651 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54235
2025-12-21 17:17:47.653 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54238
2025-12-21 17:17:47.671 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in ECONOMY
2025-12-21 17:17:47.671 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid customer tier: INVALID_CLASS
2025-12-21 17:17:47.672 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:47 GMT] "POST /v1/points/quote HTTP/1.1" 400 122 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:47.793 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54240
2025-12-21 17:17:47.794 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54243
2025-12-21 17:17:47.807 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 17:17:47.807 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 17:17:47.813 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 17:17:47.814 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:47 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:47.814 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 17:17:48.107 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54246
2025-12-21 17:17:48.109 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54249
2025-12-21 17:17:48.125 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:17:48.126 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:48 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:48.127 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:17:48.213 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54254
2025-12-21 17:17:48.215 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54257
2025-12-21 17:17:48.227 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:17:48.228 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:48 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:48.229 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:17:48.320 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54259
2025-12-21 17:17:48.321 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54262
2025-12-21 17:17:48.336 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 17:17:48.337 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:17:48.363 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 17:17:48.363 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 17:17:48.371 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 17:17:48.373 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:48 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:48.373 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 17:17:48.513 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54266
2025-12-21 17:17:48.514 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54269
2025-12-21 17:17:48.528 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 17:17:48.528 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:17:48.536 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:17:48.536 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 17:17:48.542 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:17:48.543 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 17:17:48.546 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$0(FxServiceClient.java:59)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 17:17:48.551 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$0(FxServiceClient.java:59)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 17:17:48.555 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:48 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:48.659 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54272
2025-12-21 17:17:48.660 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54275
2025-12-21 17:17:48.674 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:17:48.675 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:48 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:48.676 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:17:48.767 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54277
2025-12-21 17:17:48.769 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54280
2025-12-21 17:17:48.781 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:17:48.782 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:48 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:48.782 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:17:48.859 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54282
2025-12-21 17:17:48.860 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54285
2025-12-21 17:17:48.872 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:17:48.873 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:48 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:48.873 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:17:48.949 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54287
2025-12-21 17:17:48.951 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54290
2025-12-21 17:17:48.964 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 17:17:48.965 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 17:17:48.965 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:48 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:49.044 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54292
2025-12-21 17:17:49.046 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54295
2025-12-21 17:17:49.060 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 17:17:49.060 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 17:17:49.066 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 17:17:49.067 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 17:17:49.072 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 17:17:49.073 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:49.074 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 17:17:49.204 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54299
2025-12-21 17:17:49.206 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54302
2025-12-21 17:17:49.216 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 17:17:49.216 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 17:17:49.222 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 17:17:49.223 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:49.223 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 17:17:49.315 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54305
2025-12-21 17:17:49.316 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54308
2025-12-21 17:17:49.327 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 17:17:49.328 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:49.328 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 17:17:49.476 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54310
2025-12-21 17:17:49.477 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54313
2025-12-21 17:17:49.504 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:17:49.505 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:49.505 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:17:49.616 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54315
2025-12-21 17:17:49.617 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54318
2025-12-21 17:17:49.628 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 17:17:49.629 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:49.629 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:17:49.743 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54320
2025-12-21 17:17:49.744 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54323
2025-12-21 17:17:49.756 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 17:17:49.757 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:49.757 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:17:49.876 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54325
2025-12-21 17:17:49.878 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54328
2025-12-21 17:17:49.895 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 17:17:49.896 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:49 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:49.896 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:17:49.991 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54330
2025-12-21 17:17:49.992 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54333
2025-12-21 17:17:50.005 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:17:50.006 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:50 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:50.006 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:17:50.087 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54335
2025-12-21 17:17:50.088 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54338
2025-12-21 17:17:50.099 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:17:50.100 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:50 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:50.100 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:17:50.179 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54340
2025-12-21 17:17:50.182 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54343
2025-12-21 17:17:50.195 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:17:50.195 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:50 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:50.195 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:17:50.282 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54345
2025-12-21 17:17:50.284 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54348
2025-12-21 17:17:50.298 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:17:50.298 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:17:50 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:17:50.299 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 17:19:06.706 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51573
2025-12-21 17:19:06.731 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51576
2025-12-21 17:19:08.772 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:08 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:09.898 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51578
2025-12-21 17:19:09.899 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51581
2025-12-21 17:19:10.054 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 17:19:10.105 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:09 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:10.105 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 17:19:10.250 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51583
2025-12-21 17:19:10.252 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51586
2025-12-21 17:19:10.289 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:19:10.290 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 17:19:10.623 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 17:19:10.623 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 17:19:10.625 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:10 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:10.625 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:19:10.735 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51589
2025-12-21 17:19:10.737 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51592
2025-12-21 17:19:10.749 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:19:10.750 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 17:19:10.757 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 17:19:10.759 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 17:19:10.760 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:10 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:10.760 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:19:10.882 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51595
2025-12-21 17:19:10.884 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51598
2025-12-21 17:19:10.898 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 17:19:10.899 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 17:19:10.903 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:10 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:11.015 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51600
2025-12-21 17:19:11.016 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51603
2025-12-21 17:19:11.029 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in ECONOMY
2025-12-21 17:19:11.030 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid customer tier: INVALID_CLASS
2025-12-21 17:19:11.031 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:11 GMT] "POST /v1/points/quote HTTP/1.1" 400 122 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:11.118 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51605
2025-12-21 17:19:11.120 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51608
2025-12-21 17:19:11.136 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 17:19:11.137 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 17:19:11.146 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 17:19:11.148 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:11.149 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 17:19:11.401 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51611
2025-12-21 17:19:11.402 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51614
2025-12-21 17:19:11.414 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:19:11.415 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:11.415 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:19:11.502 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51616
2025-12-21 17:19:11.503 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51619
2025-12-21 17:19:11.517 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:19:11.518 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:11.519 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:19:11.608 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51621
2025-12-21 17:19:11.610 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51624
2025-12-21 17:19:11.625 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 17:19:11.626 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:19:11.644 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 17:19:11.644 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 17:19:11.652 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 17:19:11.653 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:11.653 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 17:19:11.774 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51628
2025-12-21 17:19:11.775 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51631
2025-12-21 17:19:11.785 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 17:19:11.786 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:19:11.793 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:19:11.793 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 17:19:11.797 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:19:11.797 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 17:19:11.801 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$0(FxServiceClient.java:59)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 17:19:11.805 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$0(FxServiceClient.java:59)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 17:19:11.807 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:11 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:11.925 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51634
2025-12-21 17:19:11.926 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51637
2025-12-21 17:19:11.939 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:19:11.941 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:11.941 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:19:12.033 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51639
2025-12-21 17:19:12.034 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51642
2025-12-21 17:19:12.047 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:19:12.048 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:12.048 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:19:12.112 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51644
2025-12-21 17:19:12.113 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51647
2025-12-21 17:19:12.126 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:19:12.127 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:12.127 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:19:12.210 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51649
2025-12-21 17:19:12.211 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51652
2025-12-21 17:19:12.221 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 17:19:12.222 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 17:19:12.222 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:12 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:12.318 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51654
2025-12-21 17:19:12.320 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51657
2025-12-21 17:19:12.335 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 17:19:12.335 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 17:19:12.343 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 17:19:12.343 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 17:19:12.349 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 17:19:12.350 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:12.350 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 17:19:12.485 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51661
2025-12-21 17:19:12.487 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51664
2025-12-21 17:19:12.499 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 17:19:12.499 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 17:19:12.506 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 17:19:12.507 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:12.508 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 17:19:12.601 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51667
2025-12-21 17:19:12.602 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51670
2025-12-21 17:19:12.611 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 17:19:12.612 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:12.612 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 17:19:12.747 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51672
2025-12-21 17:19:12.749 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51675
2025-12-21 17:19:12.772 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:19:12.773 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:12.773 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:19:12.865 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51677
2025-12-21 17:19:12.866 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51680
2025-12-21 17:19:12.875 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 17:19:12.876 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:12.876 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:19:12.983 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51682
2025-12-21 17:19:12.984 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51685
2025-12-21 17:19:12.994 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 17:19:12.995 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:12 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:12.995 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:19:13.088 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51687
2025-12-21 17:19:13.089 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51690
2025-12-21 17:19:13.107 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 17:19:13.108 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:13.108 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:19:13.216 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51692
2025-12-21 17:19:13.217 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51695
2025-12-21 17:19:13.227 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:19:13.228 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:13.228 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:19:13.317 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51697
2025-12-21 17:19:13.318 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51700
2025-12-21 17:19:13.327 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:19:13.328 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:13.328 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:19:13.398 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51702
2025-12-21 17:19:13.399 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51705
2025-12-21 17:19:13.408 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:19:13.409 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:13.409 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:19:13.483 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51707
2025-12-21 17:19:13.484 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51710
2025-12-21 17:19:13.495 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:19:13.496 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:19:13 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:19:13.496 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 17:19:42.230 [vert.x-eventloop-thread-1] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on 0.0.0.0:8080
2025-12-21 17:19:42.238 [vert.x-eventloop-thread-1] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 9090
2025-12-21 17:19:42.238 [vert.x-eventloop-thread-0] INFO  i.v.c.i.l.c.VertxIsolatedDeployer - Succeeded in deploying verticle
2025-12-21 17:20:02.911 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 17:20:02.920 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid customer tier: BASIC
2025-12-21 17:20:02.957 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 17:20:02 GMT] "POST /v1/points/quote HTTP/1.1" 400 114 "-" "PostmanRuntime/7.51.0"
2025-12-21 17:20:32.564 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59750
2025-12-21 17:20:32.588 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59753
2025-12-21 17:20:34.907 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:34 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:36.301 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58976
2025-12-21 17:20:36.302 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58979
2025-12-21 17:20:36.484 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 17:20:36.512 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:36 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:36.513 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 17:20:36.658 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58981
2025-12-21 17:20:36.660 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58984
2025-12-21 17:20:36.700 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:20:36.700 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 17:20:37.035 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 17:20:37.035 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 17:20:37.038 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:36 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:37.038 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:20:37.163 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58987
2025-12-21 17:20:37.165 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58990
2025-12-21 17:20:37.186 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:20:37.186 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 17:20:37.195 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 17:20:37.198 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 17:20:37.200 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:37 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:37.200 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:20:37.331 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58993
2025-12-21 17:20:37.333 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58996
2025-12-21 17:20:37.350 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 17:20:37.351 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 17:20:37.356 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:37 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:37.454 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58998
2025-12-21 17:20:37.455 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59001
2025-12-21 17:20:37.471 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in ECONOMY
2025-12-21 17:20:37.472 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid customer tier: INVALID_CLASS
2025-12-21 17:20:37.473 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:37 GMT] "POST /v1/points/quote HTTP/1.1" 400 122 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:37.560 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59003
2025-12-21 17:20:37.561 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59006
2025-12-21 17:20:37.585 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 17:20:37.586 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 17:20:37.594 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 17:20:37.595 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:37 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:37.595 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 17:20:37.934 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59009
2025-12-21 17:20:37.935 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59012
2025-12-21 17:20:37.948 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:20:37.949 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:37 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:37.949 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:20:38.045 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59014
2025-12-21 17:20:38.047 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59017
2025-12-21 17:20:38.065 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:20:38.066 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:38.066 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:20:38.164 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59019
2025-12-21 17:20:38.165 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59022
2025-12-21 17:20:38.182 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 17:20:38.182 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:20:38.203 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 17:20:38.203 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 17:20:38.212 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 17:20:38.213 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:38.214 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 17:20:38.364 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59026
2025-12-21 17:20:38.365 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59029
2025-12-21 17:20:38.385 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 17:20:38.385 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 17:20:38.394 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:20:38.395 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 17:20:38.401 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 17:20:38.401 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 17:20:38.407 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$0(FxServiceClient.java:59)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 17:20:38.411 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$0(FxServiceClient.java:59)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 17:20:38.414 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:38 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:38.557 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59032
2025-12-21 17:20:38.559 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59035
2025-12-21 17:20:38.583 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:20:38.584 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:38.584 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:20:38.699 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59037
2025-12-21 17:20:38.701 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59040
2025-12-21 17:20:38.714 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:20:38.716 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:38.716 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:20:38.813 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59042
2025-12-21 17:20:38.814 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59045
2025-12-21 17:20:38.827 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:20:38.828 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:38.828 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:20:38.933 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59047
2025-12-21 17:20:38.934 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59050
2025-12-21 17:20:38.951 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 17:20:38.952 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 17:20:38.952 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:38 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:39.044 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59052
2025-12-21 17:20:39.046 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59055
2025-12-21 17:20:39.061 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 17:20:39.061 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 17:20:39.067 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 17:20:39.068 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 17:20:39.075 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 17:20:39.076 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:39.076 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 17:20:39.220 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59059
2025-12-21 17:20:39.221 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59062
2025-12-21 17:20:39.236 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 17:20:39.236 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 17:20:39.245 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 17:20:39.247 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:39.248 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 17:20:39.354 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59065
2025-12-21 17:20:39.355 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59068
2025-12-21 17:20:39.368 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 17:20:39.369 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:39.369 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 17:20:39.494 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59070
2025-12-21 17:20:39.495 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59073
2025-12-21 17:20:39.520 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:20:39.521 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:39.521 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:20:39.650 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59075
2025-12-21 17:20:39.651 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59078
2025-12-21 17:20:39.682 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 17:20:39.684 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:39.684 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:20:39.801 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59080
2025-12-21 17:20:39.801 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59083
2025-12-21 17:20:39.816 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 17:20:39.817 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:39.817 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:20:39.936 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59085
2025-12-21 17:20:39.938 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59088
2025-12-21 17:20:39.955 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 17:20:39.956 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:39.956 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:20:40.081 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59090
2025-12-21 17:20:40.082 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59093
2025-12-21 17:20:40.094 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:20:40.095 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:40 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:40.095 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 17:20:40.176 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59095
2025-12-21 17:20:40.177 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59098
2025-12-21 17:20:40.188 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:20:40.189 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:40 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:40.189 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 17:20:40.285 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59100
2025-12-21 17:20:40.286 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59103
2025-12-21 17:20:40.297 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:20:40.298 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:40 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:40.298 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 17:20:40.386 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59105
2025-12-21 17:20:40.387 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59108
2025-12-21 17:20:40.402 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 17:20:40.402 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 17:20:40 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 17:20:40.402 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 17:22:49.488 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 XYZ in ECONOMY
2025-12-21 17:22:49.488 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate XYZ -> USD (attempt 1)
2025-12-21 17:22:49.857 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 17:22:49.858 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate XYZ -> USD (attempt 2)
2025-12-21 17:22:49.864 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 17:22:49.864 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate XYZ -> USD (attempt 3)
2025-12-21 17:22:49.867 [vert.x-eventloop-thread-1] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 17:22:49.872 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.PromiseImpl.onFailure(PromiseImpl.java:54)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:43)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:393)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:387)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:310)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$handleCreateRequest$6(HttpContext.java:493)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.lambda$emitFailure$1(FutureBase.java:75)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:305)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:181)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:72)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.http.impl.HttpClientImpl.lambda$doRequest$4(HttpClientImpl.java:398)
	at io.vertx.core.net.impl.pool.Endpoint.lambda$getConnection$0(Endpoint.java:52)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:162)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:123)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$ConnectFailed$1.run(SimpleConnectionPool.java:380)
	at io.vertx.core.net.impl.pool.Task.runNextTasks(Task.java:43)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:82)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:244)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.lambda$connect$2(SimpleConnectionPool.java:258)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint.lambda$connect$2(SharedClientHttpStreamEndpoint.java:104)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.NetClientImpl.failed(NetClientImpl.java:347)
	at io.vertx.core.net.impl.NetClientImpl.lambda$connectInternal2$6(NetClientImpl.java:319)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:157)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.fulfillConnectPromise(AbstractNioChannel.java:322)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:338)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 17:22:49.877 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 17:22:49 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 18:16:48.305 [vert.x-eventloop-thread-1] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 18:16:48 GMT] "GET /health HTTP/1.1" 200 41 "-" "PostmanRuntime/7.51.0"
2025-12-21 18:58:18.676 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 18:58:18.684 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 18:58:18.701 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 18:58:18 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "PostmanRuntime/7.51.0"
2025-12-21 18:58:42.228 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5  in ECONOMY
2025-12-21 18:58:42.228 [vert.x-eventloop-thread-1] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid currency code
2025-12-21 18:58:42.228 [vert.x-eventloop-thread-1] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 18:58:42 GMT] "POST /v1/points/quote HTTP/1.1" 400 107 "-" "PostmanRuntime/7.51.0"
2025-12-21 19:12:30.381 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61214
2025-12-21 19:12:30.415 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61217
2025-12-21 19:12:32.953 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:32 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:34.574 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61219
2025-12-21 19:12:34.576 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61222
2025-12-21 19:12:34.806 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 19:12:34.944 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:34 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:34.945 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 19:12:35.114 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61224
2025-12-21 19:12:35.116 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61227
2025-12-21 19:12:35.164 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:12:35.165 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 19:12:35.523 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 19:12:35.523 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 19:12:35.525 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:35 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:35.526 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:12:35.660 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61230
2025-12-21 19:12:35.661 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61233
2025-12-21 19:12:35.679 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:12:35.679 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 19:12:35.691 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 19:12:35.693 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 19:12:35.697 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:35 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:35.698 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:12:35.858 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61236
2025-12-21 19:12:35.860 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61239
2025-12-21 19:12:35.884 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 19:12:35.885 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 19:12:35.891 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:35 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:36.007 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61241
2025-12-21 19:12:36.009 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61244
2025-12-21 19:12:36.026 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in ECONOMY
2025-12-21 19:12:36.027 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid customer tier: INVALID_CLASS
2025-12-21 19:12:36.028 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:36 GMT] "POST /v1/points/quote HTTP/1.1" 400 122 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:36.139 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61246
2025-12-21 19:12:36.140 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61249
2025-12-21 19:12:36.158 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 19:12:36.159 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 19:12:36.167 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 19:12:36.168 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:36 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:36.168 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 19:12:36.543 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61252
2025-12-21 19:12:36.547 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61255
2025-12-21 19:12:36.577 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:12:36.579 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:36 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:36.580 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:12:36.737 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61257
2025-12-21 19:12:36.740 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61260
2025-12-21 19:12:36.757 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:12:36.758 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:36 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:36.758 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:12:36.882 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61262
2025-12-21 19:12:36.883 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61265
2025-12-21 19:12:36.903 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 19:12:36.904 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 19:12:36.940 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 19:12:36.941 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 19:12:36.948 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 19:12:36.950 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:36 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:36.950 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 19:12:37.105 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61269
2025-12-21 19:12:37.106 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61272
2025-12-21 19:12:37.120 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 19:12:37.120 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 19:12:37.127 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 19:12:37.128 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 19:12:37.133 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 19:12:37.134 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 19:12:37.138 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:65)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 19:12:37.142 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:77)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:65)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 19:12:37.146 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:37 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:37.341 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61275
2025-12-21 19:12:37.342 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61278
2025-12-21 19:12:37.363 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:12:37.365 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:37 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:37.365 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:12:37.475 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61280
2025-12-21 19:12:37.476 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61283
2025-12-21 19:12:37.494 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:12:37.496 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:37 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:37.496 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:12:37.602 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61285
2025-12-21 19:12:37.603 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61288
2025-12-21 19:12:37.618 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:12:37.619 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:37 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:37.619 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:12:37.733 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61290
2025-12-21 19:12:37.735 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61293
2025-12-21 19:12:37.752 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 19:12:37.752 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 19:12:37.753 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:37 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:37.881 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61295
2025-12-21 19:12:37.884 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61298
2025-12-21 19:12:37.907 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 19:12:37.907 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 19:12:37.919 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 19:12:37.919 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 19:12:37.927 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 19:12:37.928 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:37 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:37.928 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 19:12:38.110 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61302
2025-12-21 19:12:38.112 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61305
2025-12-21 19:12:38.127 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 19:12:38.127 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 19:12:38.135 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 19:12:38.137 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:38.137 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 19:12:38.288 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61308
2025-12-21 19:12:38.290 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61311
2025-12-21 19:12:38.305 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 XYZ in ECONOMY
2025-12-21 19:12:38.305 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate XYZ -> USD (attempt 1)
2025-12-21 19:12:38.312 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: XYZ -> USD = 1.0
2025-12-21 19:12:38.313 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:38.314 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:12:38.423 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61314
2025-12-21 19:12:38.426 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61317
2025-12-21 19:12:38.444 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 19:12:38.445 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:38.445 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 19:12:38.617 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61319
2025-12-21 19:12:38.618 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61322
2025-12-21 19:12:38.650 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:12:38.651 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:38.651 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:12:38.792 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61324
2025-12-21 19:12:38.794 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61327
2025-12-21 19:12:38.809 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 19:12:38.810 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:38.810 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:12:38.966 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61329
2025-12-21 19:12:38.968 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61332
2025-12-21 19:12:38.994 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 19:12:38.996 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:38.996 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:12:39.159 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61334
2025-12-21 19:12:39.161 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61337
2025-12-21 19:12:39.177 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 19:12:39.178 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:39.178 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:12:39.326 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61339
2025-12-21 19:12:39.329 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61342
2025-12-21 19:12:39.355 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:12:39.358 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:39.358 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:12:39.472 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61344
2025-12-21 19:12:39.474 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61347
2025-12-21 19:12:39.487 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:12:39.488 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:39.488 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:12:39.578 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61349
2025-12-21 19:12:39.579 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61352
2025-12-21 19:12:39.594 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:12:39.595 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:39.596 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:12:39.715 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61354
2025-12-21 19:12:39.716 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61357
2025-12-21 19:12:39.730 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:12:39.731 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:12:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:12:39.731 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 19:15:36.679 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50961
2025-12-21 19:15:36.713 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50964
2025-12-21 19:15:39.359 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:39 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:40.749 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50966
2025-12-21 19:15:40.751 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50969
2025-12-21 19:15:40.938 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 19:15:40.978 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:40 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:40.978 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 19:15:41.142 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50971
2025-12-21 19:15:41.143 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50974
2025-12-21 19:15:41.198 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:15:41.198 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 19:15:41.608 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 19:15:41.609 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 19:15:41.611 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:41 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:41.611 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:15:41.741 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50977
2025-12-21 19:15:41.743 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50980
2025-12-21 19:15:41.766 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:15:41.766 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 19:15:41.779 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 19:15:41.782 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 19:15:41.784 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:41 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:41.784 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:15:42.002 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50983
2025-12-21 19:15:42.005 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50986
2025-12-21 19:15:42.036 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 19:15:42.037 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 19:15:42.043 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:42 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:42.224 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50988
2025-12-21 19:15:42.226 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50991
2025-12-21 19:15:42.247 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in ECONOMY
2025-12-21 19:15:42.247 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid customer tier: INVALID_CLASS
2025-12-21 19:15:42.248 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:42 GMT] "POST /v1/points/quote HTTP/1.1" 400 122 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:42.362 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50993
2025-12-21 19:15:42.364 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 50996
2025-12-21 19:15:42.381 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 19:15:42.382 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 19:15:42.389 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 19:15:42.391 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:42.391 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 19:15:42.700 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:50999
2025-12-21 19:15:42.702 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51002
2025-12-21 19:15:42.717 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:15:42.718 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:42.718 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:15:42.822 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51004
2025-12-21 19:15:42.823 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51007
2025-12-21 19:15:42.837 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:15:42.839 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:42.839 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:15:42.957 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51009
2025-12-21 19:15:42.959 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51012
2025-12-21 19:15:42.983 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 19:15:42.984 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 19:15:43.014 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 19:15:43.015 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 19:15:43.028 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 19:15:43.031 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:43.031 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 19:15:43.204 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51016
2025-12-21 19:15:43.206 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51019
2025-12-21 19:15:43.221 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 19:15:43.222 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 19:15:43.232 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 19:15:43.234 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 19:15:43.246 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 19:15:43.247 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 19:15:43.253 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:65)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 19:15:43.257 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:77)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:65)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 19:15:43.262 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:43 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:43.431 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51022
2025-12-21 19:15:43.432 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51025
2025-12-21 19:15:43.454 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:15:43.455 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:43.455 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:15:43.579 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51027
2025-12-21 19:15:43.582 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51030
2025-12-21 19:15:43.600 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:15:43.602 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:43.602 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:15:43.723 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51032
2025-12-21 19:15:43.725 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51035
2025-12-21 19:15:43.738 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:15:43.740 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:43.740 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:15:43.895 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51037
2025-12-21 19:15:43.896 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51040
2025-12-21 19:15:43.916 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 19:15:43.917 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 19:15:43.918 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:43 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:44.033 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51042
2025-12-21 19:15:44.035 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51045
2025-12-21 19:15:44.055 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 19:15:44.055 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 19:15:44.065 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 19:15:44.065 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 19:15:44.074 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 19:15:44.076 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:44 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:44.077 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 19:15:44.255 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51049
2025-12-21 19:15:44.257 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51052
2025-12-21 19:15:44.271 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 19:15:44.271 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 19:15:44.280 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 19:15:44.282 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:44 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:44.282 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 19:15:44.440 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51055
2025-12-21 19:15:44.442 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51058
2025-12-21 19:15:44.454 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 XYZ in ECONOMY
2025-12-21 19:15:44.455 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate XYZ -> USD (attempt 1)
2025-12-21 19:15:44.461 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: XYZ -> USD = 1.0
2025-12-21 19:15:44.463 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:44 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:44.463 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:15:44.562 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51061
2025-12-21 19:15:44.563 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51064
2025-12-21 19:15:44.577 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 19:15:44.578 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:44 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:44.578 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 19:15:44.756 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51066
2025-12-21 19:15:44.758 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51069
2025-12-21 19:15:44.791 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:15:44.792 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:44 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:44.792 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:15:44.955 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51071
2025-12-21 19:15:44.956 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51074
2025-12-21 19:15:44.968 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 19:15:44.968 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:44 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:44.969 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:15:45.090 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51076
2025-12-21 19:15:45.091 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51079
2025-12-21 19:15:45.106 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 19:15:45.107 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:45 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:45.107 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:15:45.233 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51081
2025-12-21 19:15:45.235 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51084
2025-12-21 19:15:45.247 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 19:15:45.248 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:45 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:45.248 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:15:45.376 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51086
2025-12-21 19:15:45.380 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51089
2025-12-21 19:15:45.395 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:15:45.395 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:45 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:45.395 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:15:45.491 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51091
2025-12-21 19:15:45.493 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51094
2025-12-21 19:15:45.505 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:15:45.506 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:45 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:45.506 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:15:45.595 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51096
2025-12-21 19:15:45.596 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51099
2025-12-21 19:15:45.609 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:15:45.610 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:45 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:45.610 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:15:45.710 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51101
2025-12-21 19:15:45.712 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51104
2025-12-21 19:15:45.727 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:15:45.728 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:15:45 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:15:45.728 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 19:17:01.688 [vert.x-eventloop-thread-1] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 XYZ in ECONOMY
2025-12-21 19:17:01.689 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate XYZ -> USD (attempt 1)
2025-12-21 19:17:01.709 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 19:17:01.709 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate XYZ -> USD (attempt 2)
2025-12-21 19:17:01.714 [vert.x-eventloop-thread-1] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (Connection refused: no further information: localhost/127.0.0.1:443)
2025-12-21 19:17:01.714 [vert.x-eventloop-thread-1] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate XYZ -> USD (attempt 3)
2025-12-21 19:17:01.717 [vert.x-eventloop-thread-1] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 19:17:01.721 [vert.x-eventloop-thread-1] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$getExchangeRateWithRetry$1(FxServiceClient.java:70)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.PromiseImpl.onFailure(PromiseImpl.java:54)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:43)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleFailure(HttpContext.java:393)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:387)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.fail(HttpContext.java:310)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$handleCreateRequest$6(HttpContext.java:493)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.lambda$emitFailure$1(FutureBase.java:75)
	at io.vertx.core.impl.ContextImpl.execute(ContextImpl.java:305)
	at io.vertx.core.impl.DuplicatedContext.execute(DuplicatedContext.java:181)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:72)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.http.impl.HttpClientImpl.lambda$doRequest$4(HttpClientImpl.java:398)
	at io.vertx.core.net.impl.pool.Endpoint.lambda$getConnection$0(Endpoint.java:52)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:162)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint$Request.handle(SharedClientHttpStreamEndpoint.java:123)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool$ConnectFailed$1.run(SimpleConnectionPool.java:380)
	at io.vertx.core.net.impl.pool.Task.runNextTasks(Task.java:43)
	at io.vertx.core.net.impl.pool.CombinerExecutor.submit(CombinerExecutor.java:82)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.execute(SimpleConnectionPool.java:244)
	at io.vertx.core.net.impl.pool.SimpleConnectionPool.lambda$connect$2(SimpleConnectionPool.java:258)
	at io.vertx.core.http.impl.SharedClientHttpStreamEndpoint.lambda$connect$2(SharedClientHttpStreamEndpoint.java:104)
	at io.vertx.core.impl.future.FutureImpl$4.onFailure(FutureImpl.java:188)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:55)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:335)
	at io.vertx.core.impl.ContextImpl.emit(ContextImpl.java:328)
	at io.vertx.core.net.impl.NetClientImpl.failed(NetClientImpl.java:347)
	at io.vertx.core.net.impl.NetClientImpl.lambda$connectInternal2$6(NetClientImpl.java:319)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.setFailure(DefaultPromise.java:110)
	at io.vertx.core.net.impl.ChannelProvider.lambda$handleConnect$0(ChannelProvider.java:157)
	at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)
	at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)
	at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)
	at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)
	at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)
	at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.fulfillConnectPromise(AbstractNioChannel.java:322)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:338)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/127.0.0.1:443
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:335)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:842)
2025-12-21 19:17:01.727 [vert.x-eventloop-thread-1] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 0:0:0:0:0:0:0:1 - - [Sun, 21 Dec 2025 19:17:01 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "PostmanRuntime/7.51.0"
2025-12-21 19:18:15.435 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64856
2025-12-21 19:18:15.453 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64859
2025-12-21 19:18:17.819 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:17 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:19.402 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64861
2025-12-21 19:18:19.404 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64864
2025-12-21 19:18:19.600 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 19:18:19.631 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:19.631 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 19:18:19.826 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64866
2025-12-21 19:18:19.827 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64869
2025-12-21 19:18:19.885 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:18:19.885 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 19:18:20.305 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 19:18:20.306 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 19:18:20.308 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:19 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:20.308 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:18:20.444 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64872
2025-12-21 19:18:20.446 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64875
2025-12-21 19:18:20.467 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:18:20.468 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 19:18:20.481 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 19:18:20.485 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 19:18:20.486 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:20 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:20.487 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:18:20.652 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64878
2025-12-21 19:18:20.654 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64881
2025-12-21 19:18:20.670 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 19:18:20.672 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 19:18:20.677 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:20 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:20.819 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64883
2025-12-21 19:18:20.820 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64886
2025-12-21 19:18:20.842 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in ECONOMY
2025-12-21 19:18:20.843 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid customer tier: INVALID_CLASS
2025-12-21 19:18:20.845 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:20 GMT] "POST /v1/points/quote HTTP/1.1" 400 119 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:20.989 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64888
2025-12-21 19:18:20.990 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64891
2025-12-21 19:18:21.006 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 19:18:21.006 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 19:18:21.015 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 19:18:21.017 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:21 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:21.017 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 19:18:21.379 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64894
2025-12-21 19:18:21.381 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64897
2025-12-21 19:18:21.401 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:18:21.402 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:21 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:21.402 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:18:21.518 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64899
2025-12-21 19:18:21.520 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64902
2025-12-21 19:18:21.546 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:18:21.547 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:21 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:21.547 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:18:21.691 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64904
2025-12-21 19:18:21.693 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64907
2025-12-21 19:18:21.716 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 19:18:21.716 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 19:18:21.743 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 19:18:21.743 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 19:18:21.751 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 19:18:21.753 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:21 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:21.753 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 19:18:21.936 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64911
2025-12-21 19:18:21.938 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64914
2025-12-21 19:18:21.959 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 19:18:21.960 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 19:18:21.974 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 19:18:21.975 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 19:18:21.988 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 19:18:21.988 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 19:18:21.994 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:65)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 19:18:21.999 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:77)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:65)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 19:18:22.001 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:21 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:22.191 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64917
2025-12-21 19:18:22.193 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64920
2025-12-21 19:18:22.210 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:18:22.211 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:22.212 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:18:22.334 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64922
2025-12-21 19:18:22.335 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64925
2025-12-21 19:18:22.354 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:18:22.355 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:22.355 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:18:22.449 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64927
2025-12-21 19:18:22.450 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64930
2025-12-21 19:18:22.465 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:18:22.466 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:22.467 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:18:22.579 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64932
2025-12-21 19:18:22.581 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64935
2025-12-21 19:18:22.604 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 19:18:22.605 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 19:18:22.605 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:22 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:22.697 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64937
2025-12-21 19:18:22.699 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64940
2025-12-21 19:18:22.716 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 19:18:22.717 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 19:18:22.726 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 19:18:22.726 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 19:18:22.733 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 19:18:22.736 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:22.736 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 19:18:22.902 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64944
2025-12-21 19:18:22.904 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64947
2025-12-21 19:18:22.919 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 19:18:22.920 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 19:18:22.928 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 19:18:22.930 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:22 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:22.930 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 19:18:23.063 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64950
2025-12-21 19:18:23.064 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64953
2025-12-21 19:18:23.093 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0  in ECONOMY
2025-12-21 19:18:23.094 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid currency code
2025-12-21 19:18:23.096 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:23 GMT] "POST /v1/points/quote HTTP/1.1" 400 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:23.250 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64955
2025-12-21 19:18:23.252 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64958
2025-12-21 19:18:23.267 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 19:18:23.269 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:23.269 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 19:18:23.439 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64960
2025-12-21 19:18:23.442 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64963
2025-12-21 19:18:23.468 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:18:23.468 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:23.469 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:18:23.629 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64965
2025-12-21 19:18:23.630 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64968
2025-12-21 19:18:23.642 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 19:18:23.643 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:23.643 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:18:23.771 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64970
2025-12-21 19:18:23.772 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64973
2025-12-21 19:18:23.786 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 19:18:23.786 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:23.787 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:18:23.929 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64975
2025-12-21 19:18:23.930 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64978
2025-12-21 19:18:23.944 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 19:18:23.945 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:23 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:23.945 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:18:24.058 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64980
2025-12-21 19:18:24.060 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64983
2025-12-21 19:18:24.073 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:18:24.074 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:24.075 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:18:24.167 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64985
2025-12-21 19:18:24.169 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64988
2025-12-21 19:18:24.180 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:18:24.181 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:24.181 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:18:24.310 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64990
2025-12-21 19:18:24.311 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64993
2025-12-21 19:18:24.325 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:18:24.326 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:24.326 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:18:24.470 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:64995
2025-12-21 19:18:24.473 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 64998
2025-12-21 19:18:24.485 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:18:24.486 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:18:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:18:24.486 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 19:34:04.085 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60439
2025-12-21 19:34:04.100 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60442
2025-12-21 19:34:06.537 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:06 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:08.132 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60444
2025-12-21 19:34:08.135 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60447
2025-12-21 19:34:08.394 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 19:34:08.426 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:08 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:08.426 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 19:34:08.596 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60449
2025-12-21 19:34:08.597 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60452
2025-12-21 19:34:08.644 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:34:08.645 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 19:34:09.093 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 19:34:09.094 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 19:34:09.096 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:08 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:09.096 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:34:09.234 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60455
2025-12-21 19:34:09.235 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60458
2025-12-21 19:34:09.253 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:34:09.254 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 19:34:09.262 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 19:34:09.264 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 19:34:09.265 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:09 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:09.266 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:34:09.402 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60461
2025-12-21 19:34:09.404 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60464
2025-12-21 19:34:09.422 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 19:34:09.423 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 19:34:09.427 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:09 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:09.543 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60466
2025-12-21 19:34:09.545 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60469
2025-12-21 19:34:09.562 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in ECONOMY
2025-12-21 19:34:09.563 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid customer tier: INVALID_CLASS
2025-12-21 19:34:09.564 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:09 GMT] "POST /v1/points/quote HTTP/1.1" 400 122 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:09.704 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60471
2025-12-21 19:34:09.705 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60474
2025-12-21 19:34:09.725 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 19:34:09.725 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 19:34:09.734 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 19:34:09.737 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:09 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:09.737 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 19:34:10.140 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60477
2025-12-21 19:34:10.142 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60480
2025-12-21 19:34:10.164 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:34:10.165 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:10 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:10.166 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:34:10.294 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60482
2025-12-21 19:34:10.295 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60485
2025-12-21 19:34:10.311 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:34:10.313 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:10 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:10.313 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:34:10.426 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60487
2025-12-21 19:34:10.428 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60490
2025-12-21 19:34:10.446 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 19:34:10.447 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 19:34:10.469 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 19:34:10.469 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 19:34:10.477 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 19:34:10.478 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:10 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:10.478 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 19:34:10.648 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60494
2025-12-21 19:34:10.649 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60497
2025-12-21 19:34:10.663 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 19:34:10.663 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 19:34:10.670 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 19:34:10.670 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 19:34:10.675 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 19:34:10.675 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 19:34:10.679 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:65)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 19:34:10.683 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:77)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:65)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 19:34:10.686 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:10 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:10.809 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60500
2025-12-21 19:34:10.811 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60503
2025-12-21 19:34:10.841 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:34:10.843 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:10 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:10.843 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:34:11.000 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60505
2025-12-21 19:34:11.004 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60508
2025-12-21 19:34:11.027 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:34:11.029 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:11.029 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:34:11.141 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60510
2025-12-21 19:34:11.142 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60513
2025-12-21 19:34:11.156 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:34:11.160 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:11.160 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:34:11.268 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60515
2025-12-21 19:34:11.270 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60518
2025-12-21 19:34:11.293 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 19:34:11.294 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 19:34:11.295 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:11 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:11.397 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60520
2025-12-21 19:34:11.399 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60523
2025-12-21 19:34:11.418 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 19:34:11.418 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 19:34:11.433 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 19:34:11.433 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 19:34:11.443 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 19:34:11.444 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:11.444 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 19:34:11.621 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60527
2025-12-21 19:34:11.623 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60530
2025-12-21 19:34:11.636 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:34:11.637 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: ERROR
2025-12-21 19:34:11.656 [qtp1034758190-789] ERROR WireMock - 
                                               Request was not matched
                                               =======================

-----------------------------------------------------------------------------------------------------------------------
| Closest stub                                             | Request                                                  |
-----------------------------------------------------------------------------------------------------------------------
                                                           |
GET                                                        | GET
/v1/promo                                                  | /v1/promos/ERROR                                    <<<<< URL does not match
                                                           |
                                                           |
-----------------------------------------------------------------------------------------------------------------------

2025-12-21 19:34:11.710 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: ERROR
2025-12-21 19:34:11.712 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:11.712 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:34:41.835 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60534
2025-12-21 19:34:41.836 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60537
2025-12-21 19:34:41.854 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 19:34:41.854 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 19:34:41.861 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 19:34:41.863 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:41 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:41.863 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 19:34:41.993 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60540
2025-12-21 19:34:41.995 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60543
2025-12-21 19:34:42.011 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0  in ECONOMY
2025-12-21 19:34:42.012 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid currency code
2025-12-21 19:34:42.012 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:42 GMT] "POST /v1/points/quote HTTP/1.1" 400 104 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:42.115 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60545
2025-12-21 19:34:42.117 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60548
2025-12-21 19:34:42.131 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 19:34:42.133 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:42.133 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 19:34:42.312 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60550
2025-12-21 19:34:42.314 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60553
2025-12-21 19:34:42.349 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:34:42.352 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:42.352 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:34:42.478 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60555
2025-12-21 19:34:42.479 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60558
2025-12-21 19:34:42.493 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 19:34:42.494 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:42.494 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:34:42.631 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60560
2025-12-21 19:34:42.632 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60563
2025-12-21 19:34:42.645 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 19:34:42.646 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:42.647 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:34:42.798 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60565
2025-12-21 19:34:42.799 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60568
2025-12-21 19:34:42.810 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 19:34:42.811 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:42.811 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:34:42.934 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60570
2025-12-21 19:34:42.935 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60573
2025-12-21 19:34:42.951 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:34:42.952 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:42.952 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:34:43.055 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60575
2025-12-21 19:34:43.057 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60578
2025-12-21 19:34:43.071 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:34:43.072 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:43.072 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:34:43.161 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60580
2025-12-21 19:34:43.163 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60583
2025-12-21 19:34:43.176 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:34:43.177 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:43.177 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:34:43.268 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60585
2025-12-21 19:34:43.270 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60588
2025-12-21 19:34:43.284 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:34:43.285 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:34:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:34:43.285 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 19:35:19.308 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51375
2025-12-21 19:35:19.345 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51378
2025-12-21 19:35:22.247 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:22 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:23.995 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58840
2025-12-21 19:35:23.997 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58843
2025-12-21 19:35:24.241 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 19:35:24.268 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:24.268 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 19:35:24.441 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58845
2025-12-21 19:35:24.442 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58848
2025-12-21 19:35:24.496 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:35:24.496 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 19:35:24.939 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 19:35:24.940 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 19:35:24.942 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:24 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:24.943 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:35:25.106 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58851
2025-12-21 19:35:25.108 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58854
2025-12-21 19:35:25.130 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:35:25.130 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 19:35:25.139 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 19:35:25.141 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 19:35:25.142 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:25.142 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:35:25.307 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58857
2025-12-21 19:35:25.308 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58860
2025-12-21 19:35:25.327 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 19:35:25.328 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 19:35:25.332 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:25 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:25.493 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58862
2025-12-21 19:35:25.497 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58865
2025-12-21 19:35:25.520 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in ECONOMY
2025-12-21 19:35:25.520 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid customer tier: INVALID_CLASS
2025-12-21 19:35:25.521 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:25 GMT] "POST /v1/points/quote HTTP/1.1" 400 122 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:25.638 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58867
2025-12-21 19:35:25.640 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58870
2025-12-21 19:35:25.657 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 19:35:25.658 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 19:35:25.665 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 19:35:25.666 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:25 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:25.667 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 19:35:26.016 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58873
2025-12-21 19:35:26.018 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58876
2025-12-21 19:35:26.038 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:35:26.039 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:26.040 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:35:26.168 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58878
2025-12-21 19:35:26.170 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58881
2025-12-21 19:35:26.185 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:35:26.186 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:26.187 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:35:26.306 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58883
2025-12-21 19:35:26.308 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58886
2025-12-21 19:35:26.339 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 19:35:26.339 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 19:35:26.368 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 19:35:26.368 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 19:35:26.376 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 19:35:26.377 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:26.378 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 19:35:26.540 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58890
2025-12-21 19:35:26.543 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58893
2025-12-21 19:35:26.559 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 19:35:26.559 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 19:35:26.566 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 19:35:26.566 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 19:35:26.572 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 19:35:26.573 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 19:35:26.579 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:65)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 19:35:26.585 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:77)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:65)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 19:35:26.588 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:26 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:26.724 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58896
2025-12-21 19:35:26.726 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58899
2025-12-21 19:35:26.743 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:35:26.744 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:26.744 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:35:26.864 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58901
2025-12-21 19:35:26.866 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58904
2025-12-21 19:35:26.879 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:35:26.880 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:26 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:26.880 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:35:26.996 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58906
2025-12-21 19:35:26.999 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58909
2025-12-21 19:35:27.017 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:35:27.019 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:27.019 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:35:27.122 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58911
2025-12-21 19:35:27.124 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58914
2025-12-21 19:35:27.145 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 19:35:27.145 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 19:35:27.147 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:27 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:27.270 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58916
2025-12-21 19:35:27.272 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58919
2025-12-21 19:35:27.289 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 19:35:27.290 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 19:35:27.299 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 19:35:27.299 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 19:35:27.306 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 19:35:27.308 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:27.308 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 19:35:27.497 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:58923
2025-12-21 19:35:27.498 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 58926
2025-12-21 19:35:27.512 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:35:27.513 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: ERROR
2025-12-21 19:35:27.527 [qtp1034758190-789] ERROR WireMock - 
                                               Request was not matched
                                               =======================

-----------------------------------------------------------------------------------------------------------------------
| Closest stub                                             | Request                                                  |
-----------------------------------------------------------------------------------------------------------------------
                                                           |
GET                                                        | GET
/v1/promo                                                  | /v1/promos/ERROR                                    <<<<< URL does not match
                                                           |
                                                           |
-----------------------------------------------------------------------------------------------------------------------

2025-12-21 19:35:27.573 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: ERROR
2025-12-21 19:35:27.574 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:27 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:27.574 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:35:57.683 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53581
2025-12-21 19:35:57.685 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53584
2025-12-21 19:35:57.703 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 19:35:57.703 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 19:35:57.714 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 19:35:57.715 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:57 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:57.716 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 19:35:57.866 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53587
2025-12-21 19:35:57.868 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53590
2025-12-21 19:35:57.888 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0  in ECONOMY
2025-12-21 19:35:57.889 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid currency code
2025-12-21 19:35:57.890 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:57 GMT] "POST /v1/points/quote HTTP/1.1" 400 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:57.990 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53592
2025-12-21 19:35:57.991 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53595
2025-12-21 19:35:58.007 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 19:35:58.008 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:58.008 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 19:35:58.187 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53597
2025-12-21 19:35:58.190 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53600
2025-12-21 19:35:58.226 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:35:58.228 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:58.229 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:35:58.371 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53602
2025-12-21 19:35:58.373 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53605
2025-12-21 19:35:58.389 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 19:35:58.390 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:58.390 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:35:58.524 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53607
2025-12-21 19:35:58.525 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53610
2025-12-21 19:35:58.545 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 19:35:58.548 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:58.549 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:35:58.716 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53612
2025-12-21 19:35:58.717 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53615
2025-12-21 19:35:58.728 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 19:35:58.729 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:58.729 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:35:58.857 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53617
2025-12-21 19:35:58.859 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53620
2025-12-21 19:35:58.873 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:35:58.874 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:58.874 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:35:58.970 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53622
2025-12-21 19:35:58.970 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53625
2025-12-21 19:35:58.984 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:35:58.985 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:58 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:58.985 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:35:59.089 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53627
2025-12-21 19:35:59.091 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53630
2025-12-21 19:35:59.104 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:35:59.106 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:59 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:59.106 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:35:59.200 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53632
2025-12-21 19:35:59.201 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53635
2025-12-21 19:35:59.213 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:35:59.214 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:35:59 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:35:59.214 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 19:37:04.617 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:60858
2025-12-21 19:37:04.627 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 60861
2025-12-21 19:37:07.021 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:06 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:08.428 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61811
2025-12-21 19:37:08.430 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61814
2025-12-21 19:37:08.655 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 19:37:08.701 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:08 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:08.702 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 19:37:08.868 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61816
2025-12-21 19:37:08.870 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61819
2025-12-21 19:37:08.921 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:37:08.921 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 19:37:09.333 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 19:37:09.333 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 19:37:09.337 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:08 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:09.338 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:37:09.472 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:61822
2025-12-21 19:37:09.473 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 61825
2025-12-21 19:37:09.488 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:37:09.489 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 19:37:09.501 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 19:37:09.505 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 19:37:09.507 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:09 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:09.508 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:37:09.663 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51401
2025-12-21 19:37:09.665 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51404
2025-12-21 19:37:09.694 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 19:37:09.695 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 19:37:09.699 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:09 GMT] "POST /v1/points/quote HTTP/1.1" 400 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:09.832 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51406
2025-12-21 19:37:09.835 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51409
2025-12-21 19:37:09.860 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in ECONOMY
2025-12-21 19:37:09.861 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid customer tier: INVALID_CLASS
2025-12-21 19:37:09.863 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:09 GMT] "POST /v1/points/quote HTTP/1.1" 400 122 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:09.986 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51411
2025-12-21 19:37:09.987 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51414
2025-12-21 19:37:10.015 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 19:37:10.015 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 19:37:10.025 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 19:37:10.028 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:10 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:10.028 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 19:37:10.400 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51417
2025-12-21 19:37:10.402 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51420
2025-12-21 19:37:10.421 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:37:10.422 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:10 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:10.422 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:37:10.527 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51422
2025-12-21 19:37:10.529 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51425
2025-12-21 19:37:10.542 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:37:10.543 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:10 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:10.543 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:37:10.669 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51427
2025-12-21 19:37:10.670 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51430
2025-12-21 19:37:10.691 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 19:37:10.692 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 19:37:10.722 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 19:37:10.722 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 19:37:10.732 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 19:37:10.733 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:10 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:10.734 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 19:37:10.897 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51434
2025-12-21 19:37:10.899 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51437
2025-12-21 19:37:10.913 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 19:37:10.913 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 19:37:10.919 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 19:37:10.920 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 19:37:10.925 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 19:37:10.926 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 19:37:10.930 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:65)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 19:37:10.934 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:77)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:65)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 19:37:10.936 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:10 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:11.051 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51440
2025-12-21 19:37:11.053 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51443
2025-12-21 19:37:11.066 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:37:11.067 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:11.067 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:37:11.161 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51445
2025-12-21 19:37:11.163 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51448
2025-12-21 19:37:11.186 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:37:11.187 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:11.187 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:37:11.283 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51450
2025-12-21 19:37:11.285 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51453
2025-12-21 19:37:11.298 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:37:11.299 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:11.299 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:37:11.399 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51455
2025-12-21 19:37:11.400 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51458
2025-12-21 19:37:11.417 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 19:37:11.417 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 19:37:11.418 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:11 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:11.513 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51460
2025-12-21 19:37:11.514 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51464
2025-12-21 19:37:11.529 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 19:37:11.531 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 19:37:11.538 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 19:37:11.539 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 19:37:11.545 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 19:37:11.546 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:11.547 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 19:37:11.716 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51468
2025-12-21 19:37:11.717 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51475
2025-12-21 19:37:11.729 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:37:11.730 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 19:37:11.744 [qtp1355815204-789] ERROR WireMock - 
                                               Request was not matched
                                               =======================

-----------------------------------------------------------------------------------------------------------------------
| Closest stub                                             | Request                                                  |
-----------------------------------------------------------------------------------------------------------------------
                                                           |
GET                                                        | GET
/v1/promo                                                  | /v1/promos/SUMMER25                                 <<<<< URL does not match
                                                           |
                                                           |
-----------------------------------------------------------------------------------------------------------------------

2025-12-21 19:37:11.781 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: SUMMER25
2025-12-21 19:37:11.782 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:11 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:11.783 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:37:41.901 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59059
2025-12-21 19:37:41.902 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59062
2025-12-21 19:37:41.916 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 19:37:41.916 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 19:37:41.922 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 19:37:41.923 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:41 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:41.923 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 19:37:42.059 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59065
2025-12-21 19:37:42.061 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59068
2025-12-21 19:37:42.074 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0  in ECONOMY
2025-12-21 19:37:42.075 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid currency code
2025-12-21 19:37:42.076 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:42 GMT] "POST /v1/points/quote HTTP/1.1" 400 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:42.187 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59070
2025-12-21 19:37:42.188 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59073
2025-12-21 19:37:42.202 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 19:37:42.203 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:42.203 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 19:37:42.361 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59075
2025-12-21 19:37:42.362 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59078
2025-12-21 19:37:42.387 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:37:42.389 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:42.389 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:37:42.515 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59080
2025-12-21 19:37:42.517 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59083
2025-12-21 19:37:42.531 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 19:37:42.532 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:42.532 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:37:42.669 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59085
2025-12-21 19:37:42.671 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59088
2025-12-21 19:37:42.683 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 19:37:42.684 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:42.684 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:37:42.814 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59090
2025-12-21 19:37:42.816 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59093
2025-12-21 19:37:42.829 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 19:37:42.829 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:42.831 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:37:42.949 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59095
2025-12-21 19:37:42.951 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59098
2025-12-21 19:37:42.968 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:37:42.971 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:42.972 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:37:43.063 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59100
2025-12-21 19:37:43.065 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59103
2025-12-21 19:37:43.080 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:37:43.081 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:43.081 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:37:43.177 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59105
2025-12-21 19:37:43.178 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59108
2025-12-21 19:37:43.192 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:37:43.193 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:43.194 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:37:43.301 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:59110
2025-12-21 19:37:43.303 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 59113
2025-12-21 19:37:43.315 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:37:43.316 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:37:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:37:43.316 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
2025-12-21 19:38:34.917 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:55192
2025-12-21 19:38:34.937 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 55195
2025-12-21 19:38:37.344 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:37 GMT] "GET /health HTTP/1.1" 200 41 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:38.881 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54331
2025-12-21 19:38:38.883 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54334
2025-12-21 19:38:39.107 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in FIRST
2025-12-21 19:38:39.154 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:38 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:39.154 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 3000 total points
2025-12-21 19:38:39.322 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53957
2025-12-21 19:38:39.324 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53960
2025-12-21 19:38:39.369 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:38:39.369 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: INACTIVE
2025-12-21 19:38:39.744 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: INACTIVE
2025-12-21 19:38:39.744 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo INACTIVE is inactive
2025-12-21 19:38:39.747 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 121 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:39.747 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:38:39.875 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53963
2025-12-21 19:38:39.876 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53966
2025-12-21 19:38:39.896 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:38:39.898 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: OLDPROMO
2025-12-21 19:38:39.906 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: OLDPROMO
2025-12-21 19:38:39.911 [vert.x-eventloop-thread-0] INFO  c.a.l.s.PointsCalculationService - Promo OLDPROMO has expired
2025-12-21 19:38:39.912 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:39 GMT] "POST /v1/points/quote HTTP/1.1" 200 120 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:39.912 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:38:40.068 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53969
2025-12-21 19:38:40.070 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53972
2025-12-21 19:38:40.090 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in INVALID_CLASS
2025-12-21 19:38:40.091 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid cabin class: INVALID_CLASS
2025-12-21 19:38:40.095 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:40 GMT] "POST /v1/points/quote HTTP/1.1" 400 117 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:40.213 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:54030
2025-12-21 19:38:40.215 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 54033
2025-12-21 19:38:40.234 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2000.0 USD in ECONOMY
2025-12-21 19:38:40.235 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid customer tier: INVALID_CLASS
2025-12-21 19:38:40.237 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:40 GMT] "POST /v1/points/quote HTTP/1.1" 400 122 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:40.349 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53694
2025-12-21 19:38:40.351 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53697
2025-12-21 19:38:40.369 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1234.5 USD in ECONOMY
2025-12-21 19:38:40.369 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: SUMMER25
2025-12-21 19:38:40.377 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: SUMMER25
2025-12-21 19:38:40.379 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:40 GMT] "POST /v1/points/quote HTTP/1.1" 200 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:40.379 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1727 total points
2025-12-21 19:38:40.669 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53700
2025-12-21 19:38:40.671 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53703
2025-12-21 19:38:40.685 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:38:40.686 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:40 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:40.686 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:38:40.818 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53705
2025-12-21 19:38:40.821 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53708
2025-12-21 19:38:40.839 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:38:40.840 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:40 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:40.840 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:38:40.984 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:53710
2025-12-21 19:38:40.988 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 53713
2025-12-21 19:38:41.010 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in BUSINESS
2025-12-21 19:38:41.010 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 19:38:41.060 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: EUR -> USD = 1.1
2025-12-21 19:38:41.061 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: NONE
2025-12-21 19:38:41.071 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo code not found: NONE
2025-12-21 19:38:41.072 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:41 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:41.072 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1430 total points
2025-12-21 19:38:41.253 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51929
2025-12-21 19:38:41.255 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51932
2025-12-21 19:38:41.268 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 EUR in ECONOMY
2025-12-21 19:38:41.268 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 1)
2025-12-21 19:38:41.276 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 19:38:41.276 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 2)
2025-12-21 19:38:41.282 [vert.x-eventloop-thread-0] WARN  c.a.loyalty.service.FxServiceClient - FX service call failed, retrying... (FX service returned status 500)
2025-12-21 19:38:41.282 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate EUR -> USD (attempt 3)
2025-12-21 19:38:41.286 [vert.x-eventloop-thread-0] ERROR c.a.loyalty.service.FxServiceClient - FX service call failed after 3 attempts
com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:65)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-12-21 19:38:41.290 [vert.x-eventloop-thread-0] ERROR c.a.l.handler.PointsQuoteHandler - Unexpected error processing points quote
com.airline.loyalty.exception.ExternalServiceException: Failed to fetch exchange rate after 3 attempts
	at com.airline.loyalty.service.FxServiceClient.lambda$1(FxServiceClient.java:77)
	at io.vertx.core.impl.future.Composition.onFailure(Composition.java:50)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FutureImpl.tryFail(FutureImpl.java:265)
	at io.vertx.core.impl.future.Composition$1.onFailure(Composition.java:66)
	at io.vertx.core.impl.future.FutureBase.emitFailure(FutureBase.java:81)
	at io.vertx.core.impl.future.FailedFuture.addListener(FailedFuture.java:98)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:43)
	at io.vertx.core.impl.future.FutureBase.emitSuccess(FutureBase.java:66)
	at io.vertx.core.impl.future.FutureImpl.tryComplete(FutureImpl.java:246)
	at io.vertx.core.impl.future.PromiseImpl.onSuccess(PromiseImpl.java:49)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:41)
	at io.vertx.core.impl.future.PromiseImpl.handle(PromiseImpl.java:23)
	at io.vertx.ext.web.client.impl.HttpContext.handleDispatchResponse(HttpContext.java:397)
	at io.vertx.ext.web.client.impl.HttpContext.execute(HttpContext.java:384)
	at io.vertx.ext.web.client.impl.HttpContext.next(HttpContext.java:362)
	at io.vertx.ext.web.client.impl.HttpContext.fire(HttpContext.java:329)
	at io.vertx.ext.web.client.impl.HttpContext.dispatchResponse(HttpContext.java:291)
	at io.vertx.ext.web.client.impl.HttpContext.lambda$null$7(HttpContext.java:507)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:276)
	at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:258)
	at io.vertx.core.impl.ContextInternal.lambda$runOnContext$0(ContextInternal.java:56)
	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:566)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.airline.loyalty.exception.ExternalServiceException: FX service returned status 500
	at com.airline.loyalty.service.FxServiceClient.lambda$0(FxServiceClient.java:65)
	at io.vertx.core.impl.future.Composition.onSuccess(Composition.java:38)
	... 22 common frames omitted
2025-12-21 19:38:41.293 [vert.x-eventloop-thread-0] ERROR i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:41 GMT] "POST /v1/points/quote HTTP/1.1" 500 125 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:41.422 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51935
2025-12-21 19:38:41.423 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51938
2025-12-21 19:38:41.438 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:38:41.440 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:41 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:41.440 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:38:41.535 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51940
2025-12-21 19:38:41.536 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51943
2025-12-21 19:38:41.553 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:38:41.554 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:41 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:41.554 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:38:41.629 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51945
2025-12-21 19:38:41.630 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51948
2025-12-21 19:38:41.648 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:38:41.649 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:41 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:41.649 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:38:41.810 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51950
2025-12-21 19:38:41.813 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51953
2025-12-21 19:38:41.827 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 0.0 USD in ECONOMY
2025-12-21 19:38:41.827 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Fare amount must be greater than zero
2025-12-21 19:38:41.828 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:41 GMT] "POST /v1/points/quote HTTP/1.1" 400 123 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:41.933 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51955
2025-12-21 19:38:41.936 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51958
2025-12-21 19:38:41.953 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 2500.0 GBP in BUSINESS
2025-12-21 19:38:41.954 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate GBP -> USD (attempt 1)
2025-12-21 19:38:41.962 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: GBP -> USD = 1.27
2025-12-21 19:38:41.962 [vert.x-eventloop-thread-0] DEBUG c.a.l.service.PromoServiceClient - Fetching promo details for code: WINTER25
2025-12-21 19:38:41.968 [vert.x-eventloop-thread-0] INFO  c.a.l.service.PromoServiceClient - Promo details retrieved: WINTER25
2025-12-21 19:38:41.970 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:41 GMT] "POST /v1/points/quote HTTP/1.1" 200 108 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:41.970 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 5079 total points
2025-12-21 19:38:42.127 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51962
2025-12-21 19:38:42.128 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51965
2025-12-21 19:38:42.139 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 150000.0 JPY in FIRST
2025-12-21 19:38:42.139 [vert.x-eventloop-thread-0] DEBUG c.a.loyalty.service.FxServiceClient - Fetching FX rate JPY -> USD (attempt 1)
2025-12-21 19:38:42.146 [vert.x-eventloop-thread-0] INFO  c.a.loyalty.service.FxServiceClient - FX rate retrieved: JPY -> USD = 0.0067
2025-12-21 19:38:42.147 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 106 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:42.147 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1507 total points
2025-12-21 19:38:42.283 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51968
2025-12-21 19:38:42.285 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51971
2025-12-21 19:38:42.297 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0  in ECONOMY
2025-12-21 19:38:42.298 [vert.x-eventloop-thread-0] WARN  c.a.l.handler.PointsQuoteHandler - Validation error: Invalid currency code
2025-12-21 19:38:42.299 [vert.x-eventloop-thread-0] WARN  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:42 GMT] "POST /v1/points/quote HTTP/1.1" 400 107 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:42.391 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51973
2025-12-21 19:38:42.392 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51976
2025-12-21 19:38:42.411 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 500.0 USD in ECONOMY
2025-12-21 19:38:42.412 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 101 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:42.412 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 500 total points
2025-12-21 19:38:42.581 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51978
2025-12-21 19:38:42.583 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51981
2025-12-21 19:38:42.615 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:38:42.616 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:42.617 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:38:42.748 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51983
2025-12-21 19:38:42.750 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51986
2025-12-21 19:38:42.765 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in PREMIUM_ECONOMY
2025-12-21 19:38:42.765 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:42.766 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:38:42.887 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51988
2025-12-21 19:38:42.889 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51991
2025-12-21 19:38:42.905 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in BUSINESS
2025-12-21 19:38:42.906 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:42 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:42.906 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:38:43.032 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51993
2025-12-21 19:38:43.034 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 51996
2025-12-21 19:38:43.045 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in FIRST
2025-12-21 19:38:43.046 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:43.047 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:38:43.155 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:51998
2025-12-21 19:38:43.156 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52001
2025-12-21 19:38:43.169 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:38:43.170 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 103 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:43.170 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1000 total points
2025-12-21 19:38:43.272 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52003
2025-12-21 19:38:43.274 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52006
2025-12-21 19:38:43.284 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:38:43.285 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:43.285 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1150 total points
2025-12-21 19:38:43.376 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52008
2025-12-21 19:38:43.378 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52011
2025-12-21 19:38:43.393 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:38:43.394 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:43.395 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1300 total points
2025-12-21 19:38:43.494 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Points Quote Service listening on localhost:52013
2025-12-21 19:38:43.496 [vert.x-eventloop-thread-0] INFO  com.airline.loyalty.MainVerticle - Metrics server listening on port 52016
2025-12-21 19:38:43.508 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Processing points quote request for 1000.0 USD in ECONOMY
2025-12-21 19:38:43.509 [vert.x-eventloop-thread-0] INFO  i.v.e.w.h.impl.LoggerHandlerImpl - 127.0.0.1 - - [Sun, 21 Dec 2025 19:38:43 GMT] "POST /v1/points/quote HTTP/1.1" 200 105 "-" "Apache-HttpClient/4.5.13 (Java/21.0.7)"
2025-12-21 19:38:43.510 [vert.x-eventloop-thread-0] INFO  c.a.l.handler.PointsQuoteHandler - Points quote successful: 1500 total points
